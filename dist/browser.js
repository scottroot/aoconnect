var qo=Object.create;var Gn=Object.defineProperty;var Wo=Object.getOwnPropertyDescriptor;var Ko=Object.getOwnPropertyNames;var Ho=Object.getPrototypeOf,Yo=Object.prototype.hasOwnProperty;var we=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Jo=(r,e)=>{for(var t in e)Gn(r,t,{get:e[t],enumerable:!0})},Qo=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ko(e))!Yo.call(r,i)&&i!==t&&Gn(r,i,{get:()=>e[i],enumerable:!(n=Wo(e,i))||n.enumerable});return r};var qn=(r,e,t)=>(t=r!=null?qo(Ho(r)):{},Qo(e||!r||!r.__esModule?Gn(t,"default",{value:r,enumerable:!0}):t,r));var ns=we((Hf,rs)=>{"use strict";function Me(r){if(typeof r!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=r}typeof Symbol<"u"&&(Me.prototype[Symbol.iterator]=function(){return this});Me.of=function(){var r=arguments,e=r.length,t=0;return new Me(function(){return t>=e?{done:!0}:{done:!1,value:r[t++]}})};Me.empty=function(){var r=new Me(function(){return{done:!0}});return r};Me.fromSequence=function(r){var e=0,t=r.length;return new Me(function(){return e>=t?{done:!0}:{done:!1,value:r[e++]}})};Me.is=function(r){return r instanceof Me?!0:typeof r=="object"&&r!==null&&typeof r.next=="function"};rs.exports=Me});var is=we(Wn=>{"use strict";Wn.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Wn.SYMBOL_SUPPORT=typeof Symbol<"u"});var tn=we((Jf,as)=>{"use strict";var ss=is(),tu=ss.ARRAY_BUFFER_SUPPORT,ru=ss.SYMBOL_SUPPORT;as.exports=function(e,t){var n,i,s,a,u;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof t!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||tu&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,a=e.length;s<a;s++)t(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(t);return}if(ru&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(n=e,s=0;u=n.next(),u.done!==!0;)t(u.value,s),s++;return}for(i in e)e.hasOwnProperty(i)&&t(e[i],i)}});var rn=we(Le=>{"use strict";var nu=Math.pow(2,8)-1,iu=Math.pow(2,16)-1,su=Math.pow(2,32)-1,au=Math.pow(2,7)-1,ou=Math.pow(2,15)-1,uu=Math.pow(2,31)-1;Le.getPointerArray=function(r){var e=r-1;if(e<=nu)return Uint8Array;if(e<=iu)return Uint16Array;if(e<=su)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")};Le.getSignedPointerArray=function(r){var e=r-1;return e<=au?Int8Array:e<=ou?Int16Array:e<=uu?Int32Array:Float64Array};Le.getNumberType=function(r){return r===(r|0)?Math.sign(r)===-1?r<=127&&r>=-128?Int8Array:r<=32767&&r>=-32768?Int16Array:Int32Array:r<=255?Uint8Array:r<=65535?Uint16Array:Uint32Array:Float64Array};var cu={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};Le.getMinimalRepresentation=function(r,e){var t=null,n=0,i,s,a,u,d;for(u=0,d=r.length;u<d;u++)a=e?e(r[u]):r[u],s=Le.getNumberType(a),i=cu[s.name],i>n&&(n=i,t=s);return t};Le.isTypedArray=function(r){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(r)};Le.concat=function(){var r=0,e,t,n;for(e=0,n=arguments.length;e<n;e++)r+=arguments[e].length;var i=new arguments[0].constructor(r);for(e=0,t=0;e<n;e++)i.set(arguments[e],t),t+=arguments[e].length;return i};Le.indices=function(r){for(var e=Le.getPointerArray(r),t=new e(r),n=0;n<r;n++)t[n]=n;return t}});var Hn=we(ur=>{"use strict";var os=tn(),us=rn();function lu(r){return Array.isArray(r)||us.isTypedArray(r)}function Kn(r){if(typeof r.length=="number")return r.length;if(typeof r.size=="number")return r.size}function du(r){var e=Kn(r),t=typeof e=="number"?new Array(e):[],n=0;return os(r,function(i){t[n++]=i}),t}function hu(r){var e=Kn(r),t=typeof e=="number"?us.getPointerArray(e):Array,n=typeof e=="number"?new Array(e):[],i=typeof e=="number"?new t(e):[],s=0;return os(r,function(a){n[s]=a,i[s]=s++}),[n,i]}ur.isArrayLike=lu;ur.guessLength=Kn;ur.toArray=du;ur.toArrayWithIndices=hu});var ls=we((ep,cs)=>{"use strict";var Yn=ns(),fu=tn(),pu=rn(),gu=Hn();function re(r,e,t){if(arguments.length<2&&(t=r,r=null,e=null),this.capacity=t,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var n=pu.getPointerArray(t);this.forward=new n(t),this.backward=new n(t),this.K=typeof r=="function"?new r(t):new Array(t),this.V=typeof e=="function"?new e(t):new Array(t),this.size=0,this.head=0,this.tail=0,this.items={}}re.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};re.prototype.splayOnTop=function(r){var e=this.head;if(this.head===r)return this;var t=this.backward[r],n=this.forward[r];return this.tail===r?this.tail=t:this.backward[n]=t,this.forward[t]=n,this.backward[e]=r,this.head=r,this.forward[r]=e,this};re.prototype.set=function(r,e){var t=this.items[r];if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?t=this.size++:(t=this.tail,this.tail=this.backward[t],delete this.items[this.K[t]]),this.items[r]=t,this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};re.prototype.setpop=function(r,e){var t=null,n=null,i=this.items[r];return typeof i<"u"?(this.splayOnTop(i),t=this.V[i],this.V[i]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?i=this.size++:(i=this.tail,this.tail=this.backward[i],t=this.V[i],n=this.K[i],delete this.items[n]),this.items[r]=i,this.K[i]=r,this.V[i]=e,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:t}:null)};re.prototype.has=function(r){return r in this.items};re.prototype.get=function(r){var e=this.items[r];if(!(typeof e>"u"))return this.splayOnTop(e),this.V[e]};re.prototype.peek=function(r){var e=this.items[r];if(!(typeof e>"u"))return this.V[e]};re.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,n=this.size,i=this.head,s=this.K,a=this.V,u=this.forward;t<n;)r.call(e,a[i],s[i],this),i=u[i],t++};re.prototype.keys=function(){var r=0,e=this.size,t=this.head,n=this.K,i=this.forward;return new Yn(function(){if(r>=e)return{done:!0};var s=n[t];return r++,r<e&&(t=i[t]),{done:!1,value:s}})};re.prototype.values=function(){var r=0,e=this.size,t=this.head,n=this.V,i=this.forward;return new Yn(function(){if(r>=e)return{done:!0};var s=n[t];return r++,r<e&&(t=i[t]),{done:!1,value:s}})};re.prototype.entries=function(){var r=0,e=this.size,t=this.head,n=this.K,i=this.V,s=this.forward;return new Yn(function(){if(r>=e)return{done:!0};var a=n[t],u=i[t];return r++,r<e&&(t=s[t]),{done:!1,value:[a,u]}})};typeof Symbol<"u"&&(re.prototype[Symbol.iterator]=re.prototype.entries);re.prototype.inspect=function(){for(var r=new Map,e=this.entries(),t;t=e.next(),!t.done;)r.set(t.value[0],t.value[1]);return Object.defineProperty(r,"constructor",{value:re,enumerable:!1}),r};typeof Symbol<"u"&&(re.prototype[Symbol.for("nodejs.util.inspect.custom")]=re.prototype.inspect);re.from=function(r,e,t,n){if(arguments.length<2){if(n=gu.guessLength(r),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=e,e=null,t=null);var i=new re(e,t,n);return fu(r,function(s,a){i.set(a,s)}),i};cs.exports=re});var hs=we((tp,ds)=>{"use strict";var Mt=ls(),mu=tn(),yu=rn(),vu=Hn();function ue(r,e,t){if(arguments.length<2&&(t=r,r=null,e=null),this.capacity=t,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-map: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-map: capacity should be a finite positive integer.");var n=yu.getPointerArray(t);this.forward=new n(t),this.backward=new n(t),this.K=typeof r=="function"?new r(t):new Array(t),this.V=typeof e=="function"?new e(t):new Array(t),this.size=0,this.head=0,this.tail=0,this.items=new Map}ue.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items.clear()};ue.prototype.set=function(r,e){var t=this.items.get(r);if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?t=this.size++:(t=this.tail,this.tail=this.backward[t],this.items.delete(this.K[t])),this.items.set(r,t),this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};ue.prototype.setpop=function(r,e){var t=null,n=null,i=this.items.get(r);return typeof i<"u"?(this.splayOnTop(i),t=this.V[i],this.V[i]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?i=this.size++:(i=this.tail,this.tail=this.backward[i],t=this.V[i],n=this.K[i],this.items.delete(n)),this.items.set(r,i),this.K[i]=r,this.V[i]=e,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:t}:null)};ue.prototype.has=function(r){return this.items.has(r)};ue.prototype.get=function(r){var e=this.items.get(r);if(!(typeof e>"u"))return this.splayOnTop(e),this.V[e]};ue.prototype.peek=function(r){var e=this.items.get(r);if(!(typeof e>"u"))return this.V[e]};ue.prototype.splayOnTop=Mt.prototype.splayOnTop;ue.prototype.forEach=Mt.prototype.forEach;ue.prototype.keys=Mt.prototype.keys;ue.prototype.values=Mt.prototype.values;ue.prototype.entries=Mt.prototype.entries;typeof Symbol<"u"&&(ue.prototype[Symbol.iterator]=ue.prototype.entries);ue.prototype.inspect=Mt.prototype.inspect;ue.from=function(r,e,t,n){if(arguments.length<2){if(n=vu.guessLength(r),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=e,e=null,t=null);var i=new ue(e,t,n);return mu(r,function(s,a){i.set(a,s)}),i};ds.exports=ue});var Is=we((op,Cs)=>{"use strict";var Gt=1e3,qt=Gt*60,Wt=qt*60,At=Wt*24,Ac=At*7,kc=At*365.25;Cs.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Cc(r);if(t==="number"&&isFinite(r))return e.long?Rc(r):Ic(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Cc(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*kc;case"weeks":case"week":case"w":return t*Ac;case"days":case"day":case"d":return t*At;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Wt;case"minutes":case"minute":case"mins":case"min":case"m":return t*qt;case"seconds":case"second":case"secs":case"sec":case"s":return t*Gt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Ic(r){var e=Math.abs(r);return e>=At?Math.round(r/At)+"d":e>=Wt?Math.round(r/Wt)+"h":e>=qt?Math.round(r/qt)+"m":e>=Gt?Math.round(r/Gt)+"s":r+"ms"}function Rc(r){var e=Math.abs(r);return e>=At?fn(r,e,At,"day"):e>=Wt?fn(r,e,Wt,"hour"):e>=qt?fn(r,e,qt,"minute"):e>=Gt?fn(r,e,Gt,"second"):r+" ms"}function fn(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Os=we((up,Rs)=>{"use strict";function Oc(r){t.debug=t,t.default=t,t.coerce=d,t.disable=s,t.enable=i,t.enabled=a,t.humanize=Is(),t.destroy=h,Object.keys(r).forEach(p=>{t[p]=r[p]}),t.names=[],t.skips=[],t.formatters={};function e(p){let m=0;for(let _=0;_<p.length;_++)m=(m<<5)-m+p.charCodeAt(_),m|=0;return t.colors[Math.abs(m)%t.colors.length]}t.selectColor=e;function t(p){let m,_=null,T,A;function S(...I){if(!S.enabled)return;let B=S,$=Number(new Date),G=$-(m||$);B.diff=G,B.prev=m,B.curr=$,m=$,I[0]=t.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let z=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(H,ce)=>{if(H==="%%")return"%";z++;let Ve=t.formatters[ce];if(typeof Ve=="function"){let Ge=I[z];H=Ve.call(B,Ge),I.splice(z,1),z--}return H}),t.formatArgs.call(B,I),(B.log||t.log).apply(B,I)}return S.namespace=p,S.useColors=t.useColors(),S.color=t.selectColor(p),S.extend=n,S.destroy=t.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>_!==null?_:(T!==t.namespaces&&(T=t.namespaces,A=t.enabled(p)),A),set:I=>{_=I}}),typeof t.init=="function"&&t.init(S),S}function n(p,m){let _=t(this.namespace+(typeof m>"u"?":":m)+p);return _.log=this.log,_}function i(p){t.save(p),t.namespaces=p,t.names=[],t.skips=[];let m,_=(typeof p=="string"?p:"").split(/[\s,]+/),T=_.length;for(m=0;m<T;m++)_[m]&&(p=_[m].replace(/\*/g,".*?"),p[0]==="-"?t.skips.push(new RegExp("^"+p.slice(1)+"$")):t.names.push(new RegExp("^"+p+"$")))}function s(){let p=[...t.names.map(u),...t.skips.map(u).map(m=>"-"+m)].join(",");return t.enable(""),p}function a(p){if(p[p.length-1]==="*")return!0;let m,_;for(m=0,_=t.skips.length;m<_;m++)if(t.skips[m].test(p))return!1;for(m=0,_=t.names.length;m<_;m++)if(t.names[m].test(p))return!0;return!1}function u(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}function d(p){return p instanceof Error?p.stack||p.message:p}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Rs.exports=Oc});var Bs=we((be,pn)=>{"use strict";be.formatArgs=Uc;be.save=Mc;be.load=Lc;be.useColors=Bc;be.storage=Pc();be.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();be.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Bc(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Uc(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+pn.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}be.log=console.debug||console.log||(()=>{});function Mc(r){try{r?be.storage.setItem("debug",r):be.storage.removeItem("debug")}catch{}}function Lc(){let r;try{r=be.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function Pc(){try{return localStorage}catch{}}pn.exports=Os()(be);var{formatters:Fc}=pn.exports;Fc.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ao=we(Ln=>{"use strict";Ln.byteLength=Dh;Ln.toByteArray=$h;Ln.fromByteArray=Gh;var Ze=[],Se=[],Nh=typeof Uint8Array<"u"?Uint8Array:Array,Ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(It=0,io=Ri.length;It<io;++It)Ze[It]=Ri[It],Se[Ri.charCodeAt(It)]=It;var It,io;Se[45]=62;Se[95]=63;function so(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Dh(r){var e=so(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Zh(r,e,t){return(e+t)*3/4-t}function $h(r){var e,t=so(r),n=t[0],i=t[1],s=new Nh(Zh(r,n,i)),a=0,u=i>0?n-4:n,d;for(d=0;d<u;d+=4)e=Se[r.charCodeAt(d)]<<18|Se[r.charCodeAt(d+1)]<<12|Se[r.charCodeAt(d+2)]<<6|Se[r.charCodeAt(d+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Se[r.charCodeAt(d)]<<2|Se[r.charCodeAt(d+1)]>>4,s[a++]=e&255),i===1&&(e=Se[r.charCodeAt(d)]<<10|Se[r.charCodeAt(d+1)]<<4|Se[r.charCodeAt(d+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function zh(r){return Ze[r>>18&63]+Ze[r>>12&63]+Ze[r>>6&63]+Ze[r&63]}function Vh(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(zh(n));return i.join("")}function Gh(r){for(var e,t=r.length,n=t%3,i=[],s=16383,a=0,u=t-n;a<u;a+=s)i.push(Vh(r,a,a+s>u?u:a+s));return n===1?(e=r[t-1],i.push(Ze[e>>2]+Ze[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Ze[e>>10]+Ze[e>>4&63]+Ze[e<<2&63]+"=")),i.join("")}});var oo=we(Oi=>{"use strict";Oi.read=function(r,e,t,n,i){var s,a,u=i*8-n-1,d=(1<<u)-1,h=d>>1,p=-7,m=t?i-1:0,_=t?-1:1,T=r[e+m];for(m+=_,s=T&(1<<-p)-1,T>>=-p,p+=u;p>0;s=s*256+r[e+m],m+=_,p-=8);for(a=s&(1<<-p)-1,s>>=-p,p+=n;p>0;a=a*256+r[e+m],m+=_,p-=8);if(s===0)s=1-h;else{if(s===d)return a?NaN:(T?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-h}return(T?-1:1)*a*Math.pow(2,s-n)};Oi.write=function(r,e,t,n,i,s){var a,u,d,h=s*8-i-1,p=(1<<h)-1,m=p>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=n?0:s-1,A=n?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=p):(a=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+m>=1?e+=_/d:e+=_*Math.pow(2,1-m),e*d>=2&&(a++,d/=2),a+m>=p?(u=0,a=p):a+m>=1?(u=(e*d-1)*Math.pow(2,i),a=a+m):(u=e*Math.pow(2,m-1)*Math.pow(2,i),a=0));i>=8;r[t+T]=u&255,T+=A,u/=256,i-=8);for(a=a<<i|u,h+=i;h>0;r[t+T]=a&255,T+=A,a/=256,h-=8);r[t+T-A]|=S*128}});var So=we(ir=>{"use strict";var Bi=ao(),rr=oo(),uo=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ir.Buffer=v;ir.SlowBuffer=Jh;ir.INSPECT_MAX_BYTES=50;var Pn=2147483647;ir.kMaxLength=Pn;v.TYPED_ARRAY_SUPPORT=qh();!v.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function qh(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(v.prototype,"parent",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.buffer}});Object.defineProperty(v.prototype,"offset",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.byteOffset}});function Ye(r){if(r>Pn)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,v.prototype),e}function v(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Pi(r)}return fo(r,e,t)}v.poolSize=8192;function fo(r,e,t){if(typeof r=="string")return Kh(r,e);if(ArrayBuffer.isView(r))return Hh(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if($e(r,ArrayBuffer)||r&&$e(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($e(r,SharedArrayBuffer)||r&&$e(r.buffer,SharedArrayBuffer)))return Mi(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return v.from(n,e,t);let i=Yh(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return v.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}v.from=function(r,e,t){return fo(r,e,t)};Object.setPrototypeOf(v.prototype,Uint8Array.prototype);Object.setPrototypeOf(v,Uint8Array);function po(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Wh(r,e,t){return po(r),r<=0?Ye(r):e!==void 0?typeof t=="string"?Ye(r).fill(e,t):Ye(r).fill(e):Ye(r)}v.alloc=function(r,e,t){return Wh(r,e,t)};function Pi(r){return po(r),Ye(r<0?0:Fi(r)|0)}v.allocUnsafe=function(r){return Pi(r)};v.allocUnsafeSlow=function(r){return Pi(r)};function Kh(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!v.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=go(r,e)|0,n=Ye(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Ui(r){let e=r.length<0?0:Fi(r.length)|0,t=Ye(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function Hh(r){if($e(r,Uint8Array)){let e=new Uint8Array(r);return Mi(e.buffer,e.byteOffset,e.byteLength)}return Ui(r)}function Mi(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,v.prototype),n}function Yh(r){if(v.isBuffer(r)){let e=Fi(r.length)|0,t=Ye(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Ni(r.length)?Ye(0):Ui(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Ui(r.data)}function Fi(r){if(r>=Pn)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Pn.toString(16)+" bytes");return r|0}function Jh(r){return+r!=r&&(r=0),v.alloc(+r)}v.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==v.prototype};v.compare=function(e,t){if($e(e,Uint8Array)&&(e=v.from(e,e.offset,e.byteLength)),$e(t,Uint8Array)&&(t=v.from(t,t.offset,t.byteLength)),!v.isBuffer(e)||!v.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let s=0,a=Math.min(n,i);s<a;++s)if(e[s]!==t[s]){n=e[s],i=t[s];break}return n<i?-1:i<n?1:0};v.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};v.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return v.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=v.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){let a=e[n];if($e(a,Uint8Array))s+a.length>i.length?(v.isBuffer(a)||(a=v.from(a)),a.copy(i,s)):Uint8Array.prototype.set.call(i,a,s);else if(v.isBuffer(a))a.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=a.length}return i};function go(r,e){if(v.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||$e(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Li(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return To(r).length;default:if(i)return n?-1:Li(r).length;e=(""+e).toLowerCase(),i=!0}}v.byteLength=go;function Qh(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return cf(this,e,t);case"utf8":case"utf-8":return yo(this,e,t);case"ascii":return of(this,e,t);case"latin1":case"binary":return uf(this,e,t);case"base64":return sf(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return lf(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}v.prototype._isBuffer=!0;function Rt(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}v.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)Rt(this,t,t+1);return this};v.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)Rt(this,t,t+3),Rt(this,t+1,t+2);return this};v.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)Rt(this,t,t+7),Rt(this,t+1,t+6),Rt(this,t+2,t+5),Rt(this,t+3,t+4);return this};v.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?yo(this,0,e):Qh.apply(this,arguments)};v.prototype.toLocaleString=v.prototype.toString;v.prototype.equals=function(e){if(!v.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:v.compare(this,e)===0};v.prototype.inspect=function(){let e="",t=ir.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};uo&&(v.prototype[uo]=v.prototype.inspect);v.prototype.compare=function(e,t,n,i,s){if($e(e,Uint8Array)&&(e=v.from(e,e.offset,e.byteLength)),!v.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),t<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=n)return 0;if(i>=s)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;let a=s-i,u=n-t,d=Math.min(a,u),h=this.slice(i,s),p=e.slice(t,n);for(let m=0;m<d;++m)if(h[m]!==p[m]){a=h[m],u=p[m];break}return a<u?-1:u<a?1:0};function mo(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Ni(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=v.from(e,n)),v.isBuffer(e))return e.length===0?-1:co(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):co(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function co(r,e,t,n,i){let s=1,a=r.length,u=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;s=2,a/=2,u/=2,t/=2}function d(p,m){return s===1?p[m]:p.readUInt16BE(m*s)}let h;if(i){let p=-1;for(h=t;h<a;h++)if(d(r,h)===d(e,p===-1?0:h-p)){if(p===-1&&(p=h),h-p+1===u)return p*s}else p!==-1&&(h-=h-p),p=-1}else for(t+u>a&&(t=a-u),h=t;h>=0;h--){let p=!0;for(let m=0;m<u;m++)if(d(r,h+m)!==d(e,m)){p=!1;break}if(p)return h}return-1}v.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};v.prototype.indexOf=function(e,t,n){return mo(this,e,t,n,!0)};v.prototype.lastIndexOf=function(e,t,n){return mo(this,e,t,n,!1)};function Xh(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let s=e.length;n>s/2&&(n=s/2);let a;for(a=0;a<n;++a){let u=parseInt(e.substr(a*2,2),16);if(Ni(u))return a;r[t+a]=u}return a}function ef(r,e,t,n){return Fn(Li(e,r.length-t),r,t,n)}function tf(r,e,t,n){return Fn(pf(e),r,t,n)}function rf(r,e,t,n){return Fn(To(e),r,t,n)}function nf(r,e,t,n){return Fn(gf(e,r.length-t),r,t,n)}v.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-t;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let a=!1;for(;;)switch(i){case"hex":return Xh(this,e,t,n);case"utf8":case"utf-8":return ef(this,e,t,n);case"ascii":case"latin1":case"binary":return tf(this,e,t,n);case"base64":return rf(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nf(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function sf(r,e,t){return e===0&&t===r.length?Bi.fromByteArray(r):Bi.fromByteArray(r.slice(e,t))}function yo(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let s=r[i],a=null,u=s>239?4:s>223?3:s>191?2:1;if(i+u<=t){let d,h,p,m;switch(u){case 1:s<128&&(a=s);break;case 2:d=r[i+1],(d&192)===128&&(m=(s&31)<<6|d&63,m>127&&(a=m));break;case 3:d=r[i+1],h=r[i+2],(d&192)===128&&(h&192)===128&&(m=(s&15)<<12|(d&63)<<6|h&63,m>2047&&(m<55296||m>57343)&&(a=m));break;case 4:d=r[i+1],h=r[i+2],p=r[i+3],(d&192)===128&&(h&192)===128&&(p&192)===128&&(m=(s&15)<<18|(d&63)<<12|(h&63)<<6|p&63,m>65535&&m<1114112&&(a=m))}}a===null?(a=65533,u=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=u}return af(n)}var lo=4096;function af(r){let e=r.length;if(e<=lo)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=lo));return t}function of(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function uf(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function cf(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let s=e;s<t;++s)i+=mf[r[s]];return i}function lf(r,e,t){let n=r.slice(e,t),i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}v.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,v.prototype),i};function ae(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}v.prototype.readUintLE=v.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||ae(e,t,this.length);let i=this[e],s=1,a=0;for(;++a<t&&(s*=256);)i+=this[e+a]*s;return i};v.prototype.readUintBE=v.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||ae(e,t,this.length);let i=this[e+--t],s=1;for(;t>0&&(s*=256);)i+=this[e+--t]*s;return i};v.prototype.readUint8=v.prototype.readUInt8=function(e,t){return e=e>>>0,t||ae(e,1,this.length),this[e]};v.prototype.readUint16LE=v.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||ae(e,2,this.length),this[e]|this[e+1]<<8};v.prototype.readUint16BE=v.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||ae(e,2,this.length),this[e]<<8|this[e+1]};v.prototype.readUint32LE=v.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||ae(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};v.prototype.readUint32BE=v.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||ae(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};v.prototype.readBigUInt64LE=ct(function(e){e=e>>>0,nr(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&jr(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))});v.prototype.readBigUInt64BE=ct(function(e){e=e>>>0,nr(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&jr(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)});v.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||ae(e,t,this.length);let i=this[e],s=1,a=0;for(;++a<t&&(s*=256);)i+=this[e+a]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};v.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||ae(e,t,this.length);let i=t,s=1,a=this[e+--i];for(;i>0&&(s*=256);)a+=this[e+--i]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*t)),a};v.prototype.readInt8=function(e,t){return e=e>>>0,t||ae(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};v.prototype.readInt16LE=function(e,t){e=e>>>0,t||ae(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};v.prototype.readInt16BE=function(e,t){e=e>>>0,t||ae(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};v.prototype.readInt32LE=function(e,t){return e=e>>>0,t||ae(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};v.prototype.readInt32BE=function(e,t){return e=e>>>0,t||ae(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};v.prototype.readBigInt64LE=ct(function(e){e=e>>>0,nr(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&jr(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});v.prototype.readBigInt64BE=ct(function(e){e=e>>>0,nr(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&jr(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});v.prototype.readFloatLE=function(e,t){return e=e>>>0,t||ae(e,4,this.length),rr.read(this,e,!0,23,4)};v.prototype.readFloatBE=function(e,t){return e=e>>>0,t||ae(e,4,this.length),rr.read(this,e,!1,23,4)};v.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||ae(e,8,this.length),rr.read(this,e,!0,52,8)};v.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||ae(e,8,this.length),rr.read(this,e,!1,52,8)};function ve(r,e,t,n,i,s){if(!v.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}v.prototype.writeUintLE=v.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;ve(this,e,t,n,u,0)}let s=1,a=0;for(this[t]=e&255;++a<n&&(s*=256);)this[t+a]=e/s&255;return t+n};v.prototype.writeUintBE=v.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;ve(this,e,t,n,u,0)}let s=n-1,a=1;for(this[t+s]=e&255;--s>=0&&(a*=256);)this[t+s]=e/a&255;return t+n};v.prototype.writeUint8=v.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||ve(this,e,t,1,255,0),this[t]=e&255,t+1};v.prototype.writeUint16LE=v.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||ve(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};v.prototype.writeUint16BE=v.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||ve(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};v.prototype.writeUint32LE=v.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||ve(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};v.prototype.writeUint32BE=v.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||ve(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function vo(r,e,t,n,i){Eo(e,n,i,r,t,7);let s=Number(e&BigInt(4294967295));r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,t}function wo(r,e,t,n,i){Eo(e,n,i,r,t,7);let s=Number(e&BigInt(4294967295));r[t+7]=s,s=s>>8,r[t+6]=s,s=s>>8,r[t+5]=s,s=s>>8,r[t+4]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=a,a=a>>8,r[t+2]=a,a=a>>8,r[t+1]=a,a=a>>8,r[t]=a,t+8}v.prototype.writeBigUInt64LE=ct(function(e,t=0){return vo(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});v.prototype.writeBigUInt64BE=ct(function(e,t=0){return wo(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});v.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let d=Math.pow(2,8*n-1);ve(this,e,t,n,d-1,-d)}let s=0,a=1,u=0;for(this[t]=e&255;++s<n&&(a*=256);)e<0&&u===0&&this[t+s-1]!==0&&(u=1),this[t+s]=(e/a>>0)-u&255;return t+n};v.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let d=Math.pow(2,8*n-1);ve(this,e,t,n,d-1,-d)}let s=n-1,a=1,u=0;for(this[t+s]=e&255;--s>=0&&(a*=256);)e<0&&u===0&&this[t+s+1]!==0&&(u=1),this[t+s]=(e/a>>0)-u&255;return t+n};v.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||ve(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};v.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||ve(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};v.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||ve(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};v.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||ve(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};v.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||ve(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};v.prototype.writeBigInt64LE=ct(function(e,t=0){return vo(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});v.prototype.writeBigInt64BE=ct(function(e,t=0){return wo(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _o(r,e,t,n,i,s){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function bo(r,e,t,n,i){return e=+e,t=t>>>0,i||_o(r,e,t,4,34028234663852886e22,-34028234663852886e22),rr.write(r,e,t,n,23,4),t+4}v.prototype.writeFloatLE=function(e,t,n){return bo(this,e,t,!0,n)};v.prototype.writeFloatBE=function(e,t,n){return bo(this,e,t,!1,n)};function xo(r,e,t,n,i){return e=+e,t=t>>>0,i||_o(r,e,t,8,17976931348623157e292,-17976931348623157e292),rr.write(r,e,t,n,52,8),t+8}v.prototype.writeDoubleLE=function(e,t,n){return xo(this,e,t,!0,n)};v.prototype.writeDoubleBE=function(e,t,n){return xo(this,e,t,!1,n)};v.prototype.copy=function(e,t,n,i){if(!v.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),s};v.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!v.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let a=e.charCodeAt(0);(i==="utf8"&&a<128||i==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let s;if(typeof e=="number")for(s=t;s<n;++s)this[s]=e;else{let a=v.isBuffer(e)?e:v.from(e,i),u=a.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-t;++s)this[s+t]=a[s%u]}return this};var tr={};function ji(r,e,t){tr[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}ji("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);ji("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);ji("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=ho(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=ho(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function ho(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function df(r,e,t){nr(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&jr(e,r.length-(t+1))}function Eo(r,e,t,n,i,s){if(r>t||r<e){let a=typeof e=="bigint"?"n":"",u;throw s>3?e===0||e===BigInt(0)?u=`>= 0${a} and < 2${a} ** ${(s+1)*8}${a}`:u=`>= -(2${a} ** ${(s+1)*8-1}${a}) and < 2 ** ${(s+1)*8-1}${a}`:u=`>= ${e}${a} and <= ${t}${a}`,new tr.ERR_OUT_OF_RANGE("value",u,r)}df(n,i,s)}function nr(r,e){if(typeof r!="number")throw new tr.ERR_INVALID_ARG_TYPE(e,"number",r)}function jr(r,e,t){throw Math.floor(r)!==r?(nr(r,t),new tr.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new tr.ERR_BUFFER_OUT_OF_BOUNDS:new tr.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var hf=/[^+/0-9A-Za-z-_]/g;function ff(r){if(r=r.split("=")[0],r=r.trim().replace(hf,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Li(r,e){e=e||1/0;let t,n=r.length,i=null,s=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function pf(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function gf(r,e){let t,n,i,s=[];for(let a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),n=t>>8,i=t%256,s.push(i),s.push(n);return s}function To(r){return Bi.toByteArray(ff(r))}function Fn(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function $e(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Ni(r){return r!==r}var mf=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function ct(r){return typeof BigInt>"u"?yf:r}function yf(){throw new Error("BigInt not supported")}});var Wr=class{constructor({fetch:e,MU_URL:t,logger:n}){this.fetch=e,this.MU_URL=t,this.logger=n.child("deployMessage")}async execute(e){try{let{processId:t,data:n,tags:i,anchor:s,signer:a}=e,u=await a({data:n,tags:i,target:t,anchor:s});this.logger.tap("Signing data")({processId:t,data:n,tags:i,anchor:s});let d=await this.fetch(this.MU_URL,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},redirect:"follow",body:u.raw});if(!d.ok){let p=await d.text();throw this.logger.tap("Error encountered when writing message via MU")(p),new Error(`Error while communicating with MU: ${d.status}: ${p}`)}let h=await d.json();return this.logger.tap("Successfully wrote message via MU")(h),{messageId:u.id}}catch(t){throw this.logger.tap("Error")(t),t}}},Kr=class{constructor({fetch:e,MU_URL:t,logger:n}){this.fetch=e,this.MU_URL=t,this.logger=n.child("deployProcess")}async execute(e){try{let{data:t,tags:n,signer:i}=e,s=await i({data:t,tags:n});this.logger.tap("Signing data")({data:t,tags:n});let a=await this.fetch(this.MU_URL,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},redirect:"follow",body:s.raw});if(!a.ok){let d=await a.text();throw this.logger.tap("Error encountered when deploying process via MU")(d),new Error(`Error while communicating with MU: ${a.status}: ${d}`)}let u=await a.json();return this.logger.tap("Successfully deployed process via MU")(u),{processId:s.id}}catch(t){throw this.logger.tap("Error")(t),t}}},Hr=class{constructor({fetch:e,MU_URL:t,logger:n}){this.fetch=e,this.MU_URL=t,this.logger=n.child("deployMonitor")}async execute(e){try{let{processId:t,data:n,tags:i,anchor:s,signer:a}=e,u=await a({data:n,tags:i,target:t,anchor:s});this.logger.tap("Signing data")({processId:t,data:n,tags:i,anchor:s});let d=await this.fetch(`${this.MU_URL}/monitor/${t}`,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},redirect:"follow",body:u.raw});if(!d.ok){let p=await d.text();throw this.logger.tap("Error encountered when subscribing to process via MU")(p),new Error(`Error while communicating with MU: ${d.status}: ${p}`)}let h={ok:!0};return this.logger.tap("Successfully subscribed to process via MU")(h),{messageId:u.id}}catch(t){throw this.logger.tap("Error")(t),t}}},Yr=class{constructor({fetch:e,MU_URL:t,logger:n}){this.fetch=e,this.MU_URL=t,this.logger=n.child("deployUnmonitor")}async execute(e){try{let{processId:t,data:n,tags:i,anchor:s,signer:a}=e,u=await a({data:n,tags:i,target:t,anchor:s});this.logger.tap("Signing data")({processId:t,data:n,tags:i,anchor:s});let d=await this.fetch(`${this.MU_URL}/monitor/${t}`,{method:"DELETE",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},redirect:"follow",body:u.raw});if(!d.ok){let p=await d.text();throw this.logger.tap("Error encountered when unsubscribing to process via MU")(p),new Error(`Error while communicating with MU: ${d.status}: ${p}`)}let h={ok:!0};return this.logger.tap("Successfully unsubscribed to process via MU")(h),{messageId:u.id}}catch(t){throw this.logger.tap("Error")(t),t}}},Jr=class{constructor({fetch:e,MU_URL:t,logger:n}){this.fetch=e,this.MU_URL=t,this.logger=n.child("deployAssign")}async execute(e){try{let{process:t,message:n,baseLayer:i,exclude:s}=e,a=i?"&base-layer":"",u=s?"&exclude="+s.join(","):"",d=[this.MU_URL,"?",`process-id=${t}`,"&",`assign=${n}`,a,u].join(""),h=await this.fetch(d,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"}});if(!h.ok){let m=await h.text();throw this.logger.tap("Error encountered when writing assignment via MU")(m),new Error(`Error while communicating with MU: ${h.status}: ${m}`)}let p=await h.json();return this.logger.tap("Successfully wrote assignment via MU")(p),{assignmentId:p.id}}catch(t){throw this.logger.tap("Error")(t),t}}};var Qr=class{constructor({fetch:e,CU_URL:t,logger:n}){this.fetch=e,this.CU_URL=t,this.logger=n}async execute(e){return this.logger.tap("posting dryrun request to CU")(e),await(await this.fetch(`${this.CU_URL}/dry-run?process-id=${e.Target}`,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"follow",body:JSON.stringify(e)})).json()}},Xr=class{constructor({fetch:e,CU_URL:t,logger:n}){this.fetch=e,this.CU_URL=t,this.logger=n}async execute({id:e,processId:t}){let n=`${this.CU_URL}/result/${e}?process-id=${t}`;return this.logger.tap("fetching message result from CU")(n),await(await this.fetch(n,{method:"GET",headers:{Accept:"application/json"},redirect:"follow"})).json()}},en=class{constructor({fetch:e,CU_URL:t,logger:n}){this.fetch=e,this.CU_URL=t,this.logger=n}async execute({process:e,from:t,to:n,sort:i,limit:s}){let a=new URL(`${this.CU_URL}/results/${e}`),u=new URLSearchParams(a.search);return t&&u.append("from",t),n&&u.append("to",n),i&&u.append("sort",i),s&&u.append("limit",s.toString()),a.search=u.toString(),this.logger.tap("fetching message result from CU")(a.toString()),await(await this.fetch(a.toString(),{method:"GET",headers:{Accept:"application/json"},redirect:"follow"})).json()}};var Jn=qn(hs(),1),nn,fs=({MAX_SIZE:r})=>nn||(nn=new Jn.default(r),nn),Lt=class{constructor({logger:e,fetch:t,cache:n=new Jn.default(100)}){this.logger=e,this.fetch=t,this.cache=n}async execute({suUrl:e,processId:t}){if(this.cache.has(t))return this.cache.get(t);try{let n=await this.fetch(`${e}/processes/${t}`,{method:"GET",redirect:"follow"});if(!n.ok)throw this.logger("Error Encountered when fetching process meta from SU '%s' for process '%s'",e,t),new Error(`Encountered Error fetching scheduled messages from Scheduler Unit: ${n.status}: ${await n.text()}`);let i=await n.json();return this.logger("Caching process meta for process '%s'",t),this.cache.set(t,{tags:i.tags}),i}catch(n){throw this.logger("Error: %s",n.message),n}}};var q;(function(r){r.assertEqual=i=>i;function e(i){}r.assertIs=e;function t(i){throw new Error}r.assertNever=t,r.arrayToEnum=i=>{let s={};for(let a of i)s[a]=a;return s},r.getValidEnumValues=i=>{let s=r.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),a={};for(let u of s)a[u]=i[u];return r.objectValues(a)},r.objectValues=i=>r.objectKeys(i).map(function(s){return i[s]}),r.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let s=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},r.find=(i,s)=>{for(let a of i)if(s(a))return a},r.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}r.joinValues=n,r.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(q||(q={}));var Xn;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Xn||(Xn={}));var R=q.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),et=r=>{switch(typeof r){case"undefined":return R.undefined;case"string":return R.string;case"number":return isNaN(r)?R.nan:R.number;case"boolean":return R.boolean;case"function":return R.function;case"bigint":return R.bigint;case"symbol":return R.symbol;case"object":return Array.isArray(r)?R.array:r===null?R.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?R.promise:typeof Map<"u"&&r instanceof Map?R.map:typeof Set<"u"&&r instanceof Set?R.set:typeof Date<"u"&&r instanceof Date?R.date:R.object;default:return R.unknown}},b=q.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),_u=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:"),de=class r extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(s){return s.message},n={_errors:[]},i=s=>{for(let a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(t(a));else{let u=n,d=0;for(;d<a.path.length;){let h=a.path[d];d===a.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(t(a))):u[h]=u[h]||{_errors:[]},u=u[h],d++}}};return i(this),n}static assert(e){if(!(e instanceof r))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,q.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},n=[];for(let i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};de.create=r=>new de(r);var jt=(r,e)=>{let t;switch(r.code){case b.invalid_type:r.received===R.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case b.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,q.jsonStringifyReplacer)}`;break;case b.unrecognized_keys:t=`Unrecognized key(s) in object: ${q.joinValues(r.keys,", ")}`;break;case b.invalid_union:t="Invalid input";break;case b.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${q.joinValues(r.options)}`;break;case b.invalid_enum_value:t=`Invalid enum value. Expected ${q.joinValues(r.options)}, received '${r.received}'`;break;case b.invalid_arguments:t="Invalid function arguments";break;case b.invalid_return_type:t="Invalid function return type";break;case b.invalid_date:t="Invalid date";break;case b.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:q.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case b.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case b.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case b.custom:t="Invalid input";break;case b.invalid_intersection_types:t="Intersection results could not be merged";break;case b.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case b.not_finite:t="Number must be finite";break;default:t=e.defaultError,q.assertNever(r)}return{message:t}},ms=jt;function bu(r){ms=r}function sn(){return ms}var an=r=>{let{data:e,path:t,errorMaps:n,issueData:i}=r,s=[...t,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let u="",d=n.filter(h=>!!h).slice().reverse();for(let h of d)u=h(a,{data:e,defaultError:u}).message;return{...i,path:s,message:u}},xu=[];function k(r,e){let t=sn(),n=an({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===jt?void 0:jt].filter(i=>!!i)});r.common.issues.push(n)}var le=class r{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let i of t){if(i.status==="aborted")return F;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let i of t){let s=await i.key,a=await i.value;n.push({key:s,value:a})}return r.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let i of t){let{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return F;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[s.value]=a.value)}return{status:e.value,value:n}}},F=Object.freeze({status:"aborted"}),Ft=r=>({status:"dirty",value:r}),he=r=>({status:"valid",value:r}),ei=r=>r.status==="aborted",ti=r=>r.status==="dirty",dr=r=>r.status==="valid",hr=r=>typeof Promise<"u"&&r instanceof Promise;function on(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function ys(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}var U;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(U||(U={}));var cr,lr,Ee=class{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},ps=(r,e)=>{if(dr(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new de(r.common.issues);return this._error=t,this._error}}};function N(r){if(!r)return{};let{errorMap:e,invalid_type_error:t,required_error:n,description:i}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,u)=>{var d,h;let{message:p}=r;return a.code==="invalid_enum_value"?{message:p??u.defaultError}:typeof u.data>"u"?{message:(d=p??n)!==null&&d!==void 0?d:u.defaultError}:a.code!=="invalid_type"?{message:u.defaultError}:{message:(h=p??t)!==null&&h!==void 0?h:u.defaultError}},description:i}}var D=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return et(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:et(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new le,ctx:{common:e.parent.common,data:e.data,parsedType:et(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(hr(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let i={common:{issues:[],async:(n=t?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:et(e)},s=this._parseSync({data:e,path:i.path,parent:i});return ps(i,s)}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:et(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(hr(i)?i:Promise.resolve(i));return ps(n,s)}refine(e,t){let n=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,s)=>{let a=e(i),u=()=>s.addIssue({code:b.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(d=>d?!0:(u(),!1)):a?!0:(u(),!1)})}refinement(e,t){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof t=="function"?t(n,i):t),!1))}_refinement(e){return new _e({schema:this,typeName:L.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return xe.create(this,this._def)}nullable(){return Fe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ke.create(this,this._def)}promise(){return nt.create(this,this._def)}or(e){return yt.create([this,e],this._def)}and(e){return vt.create(this,e,this._def)}transform(e){return new _e({...N(this._def),schema:this,typeName:L.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new Et({...N(this._def),innerType:this,defaultValue:t,typeName:L.ZodDefault})}brand(){return new fr({typeName:L.ZodBranded,type:this,...N(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new Tt({...N(this._def),innerType:this,catchValue:t,typeName:L.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return pr.create(this,e)}readonly(){return St.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Eu=/^c[^\s-]{8,}$/i,Tu=/^[0-9a-z]+$/,Su=/^[0-9A-HJKMNP-TV-Z]{26}$/,Au=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ku=/^[a-z0-9_-]{21}$/i,Cu=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Iu=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ru="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Qn,Ou=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Bu=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Uu=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,vs="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Mu=new RegExp(`^${vs}$`);function ws(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Lu(r){return new RegExp(`^${ws(r)}$`)}function _s(r){let e=`${vs}T${ws(r)}`,t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Pu(r,e){return!!((e==="v4"||!e)&&Ou.test(r)||(e==="v6"||!e)&&Bu.test(r))}var tt=class r extends D{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==R.string){let s=this._getOrReturnCtx(e);return k(s,{code:b.invalid_type,expected:R.string,received:s.parsedType}),F}let n=new le,i;for(let s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),k(i,{code:b.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),k(i,{code:b.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){let a=e.data.length>s.value,u=e.data.length<s.value;(a||u)&&(i=this._getOrReturnCtx(e,i),a?k(i,{code:b.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):u&&k(i,{code:b.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")Iu.test(e.data)||(i=this._getOrReturnCtx(e,i),k(i,{validation:"email",code:b.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")Qn||(Qn=new RegExp(Ru,"u")),Qn.test(e.data)||(i=this._getOrReturnCtx(e,i),k(i,{validation:"emoji",code:b.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")Au.test(e.data)||(i=this._getOrReturnCtx(e,i),k(i,{validation:"uuid",code:b.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")ku.test(e.data)||(i=this._getOrReturnCtx(e,i),k(i,{validation:"nanoid",code:b.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")Eu.test(e.data)||(i=this._getOrReturnCtx(e,i),k(i,{validation:"cuid",code:b.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")Tu.test(e.data)||(i=this._getOrReturnCtx(e,i),k(i,{validation:"cuid2",code:b.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")Su.test(e.data)||(i=this._getOrReturnCtx(e,i),k(i,{validation:"ulid",code:b.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),k(i,{validation:"url",code:b.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),k(i,{validation:"regex",code:b.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),k(i,{code:b.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),k(i,{code:b.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),k(i,{code:b.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?_s(s).test(e.data)||(i=this._getOrReturnCtx(e,i),k(i,{code:b.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?Mu.test(e.data)||(i=this._getOrReturnCtx(e,i),k(i,{code:b.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?Lu(s).test(e.data)||(i=this._getOrReturnCtx(e,i),k(i,{code:b.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?Cu.test(e.data)||(i=this._getOrReturnCtx(e,i),k(i,{validation:"duration",code:b.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?Pu(e.data,s.version)||(i=this._getOrReturnCtx(e,i),k(i,{validation:"ip",code:b.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?Uu.test(e.data)||(i=this._getOrReturnCtx(e,i),k(i,{validation:"base64",code:b.invalid_string,message:s.message}),n.dirty()):q.assertNever(s);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(i=>e.test(i),{validation:t,code:b.invalid_string,...U.errToObj(n)})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...U.errToObj(e)})}url(e){return this._addCheck({kind:"url",...U.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...U.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...U.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...U.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...U.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...U.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...U.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...U.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...U.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...U.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...U.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...U.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...U.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...U.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...U.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...U.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...U.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...U.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...U.errToObj(t)})}nonempty(e){return this.min(1,U.errToObj(e))}trim(){return new r({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};tt.create=r=>{var e;return new tt({checks:[],typeName:L.ZodString,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...N(r)})};function Fu(r,e){let t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=t>n?t:n,s=parseInt(r.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}var dt=class r extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==R.number){let s=this._getOrReturnCtx(e);return k(s,{code:b.invalid_type,expected:R.number,received:s.parsedType}),F}let n,i=new le;for(let s of this._def.checks)s.kind==="int"?q.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),k(n,{code:b.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),k(n,{code:b.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),k(n,{code:b.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?Fu(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),k(n,{code:b.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),k(n,{code:b.not_finite,message:s.message}),i.dirty()):q.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,U.toString(t))}gt(e,t){return this.setLimit("min",e,!1,U.toString(t))}lte(e,t){return this.setLimit("max",e,!0,U.toString(t))}lt(e,t){return this.setLimit("max",e,!1,U.toString(t))}setLimit(e,t,n,i){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:U.toString(i)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:U.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:U.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:U.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:U.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:U.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:U.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:U.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:U.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:U.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&q.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};dt.create=r=>new dt({checks:[],typeName:L.ZodNumber,coerce:r?.coerce||!1,...N(r)});var ht=class r extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==R.bigint){let s=this._getOrReturnCtx(e);return k(s,{code:b.invalid_type,expected:R.bigint,received:s.parsedType}),F}let n,i=new le;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),k(n,{code:b.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),k(n,{code:b.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),k(n,{code:b.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):q.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,U.toString(t))}gt(e,t){return this.setLimit("min",e,!1,U.toString(t))}lte(e,t){return this.setLimit("max",e,!0,U.toString(t))}lt(e,t){return this.setLimit("max",e,!1,U.toString(t))}setLimit(e,t,n,i){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:U.toString(i)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:U.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:U.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:U.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:U.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:U.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};ht.create=r=>{var e;return new ht({checks:[],typeName:L.ZodBigInt,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...N(r)})};var ft=class extends D{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==R.boolean){let n=this._getOrReturnCtx(e);return k(n,{code:b.invalid_type,expected:R.boolean,received:n.parsedType}),F}return he(e.data)}};ft.create=r=>new ft({typeName:L.ZodBoolean,coerce:r?.coerce||!1,...N(r)});var pt=class r extends D{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==R.date){let s=this._getOrReturnCtx(e);return k(s,{code:b.invalid_type,expected:R.date,received:s.parsedType}),F}if(isNaN(e.data.getTime())){let s=this._getOrReturnCtx(e);return k(s,{code:b.invalid_date}),F}let n=new le,i;for(let s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),k(i,{code:b.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),k(i,{code:b.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):q.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:U.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:U.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};pt.create=r=>new pt({checks:[],coerce:r?.coerce||!1,typeName:L.ZodDate,...N(r)});var Nt=class extends D{_parse(e){if(this._getType(e)!==R.symbol){let n=this._getOrReturnCtx(e);return k(n,{code:b.invalid_type,expected:R.symbol,received:n.parsedType}),F}return he(e.data)}};Nt.create=r=>new Nt({typeName:L.ZodSymbol,...N(r)});var gt=class extends D{_parse(e){if(this._getType(e)!==R.undefined){let n=this._getOrReturnCtx(e);return k(n,{code:b.invalid_type,expected:R.undefined,received:n.parsedType}),F}return he(e.data)}};gt.create=r=>new gt({typeName:L.ZodUndefined,...N(r)});var mt=class extends D{_parse(e){if(this._getType(e)!==R.null){let n=this._getOrReturnCtx(e);return k(n,{code:b.invalid_type,expected:R.null,received:n.parsedType}),F}return he(e.data)}};mt.create=r=>new mt({typeName:L.ZodNull,...N(r)});var rt=class extends D{constructor(){super(...arguments),this._any=!0}_parse(e){return he(e.data)}};rt.create=r=>new rt({typeName:L.ZodAny,...N(r)});var We=class extends D{constructor(){super(...arguments),this._unknown=!0}_parse(e){return he(e.data)}};We.create=r=>new We({typeName:L.ZodUnknown,...N(r)});var Ae=class extends D{_parse(e){let t=this._getOrReturnCtx(e);return k(t,{code:b.invalid_type,expected:R.never,received:t.parsedType}),F}};Ae.create=r=>new Ae({typeName:L.ZodNever,...N(r)});var Dt=class extends D{_parse(e){if(this._getType(e)!==R.undefined){let n=this._getOrReturnCtx(e);return k(n,{code:b.invalid_type,expected:R.void,received:n.parsedType}),F}return he(e.data)}};Dt.create=r=>new Dt({typeName:L.ZodVoid,...N(r)});var Ke=class r extends D{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==R.array)return k(t,{code:b.invalid_type,expected:R.array,received:t.parsedType}),F;if(i.exactLength!==null){let a=t.data.length>i.exactLength.value,u=t.data.length<i.exactLength.value;(a||u)&&(k(t,{code:a?b.too_big:b.too_small,minimum:u?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(k(t,{code:b.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(k(t,{code:b.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((a,u)=>i.type._parseAsync(new Ee(t,a,t.path,u)))).then(a=>le.mergeArray(n,a));let s=[...t.data].map((a,u)=>i.type._parseSync(new Ee(t,a,t.path,u)));return le.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new r({...this._def,minLength:{value:e,message:U.toString(t)}})}max(e,t){return new r({...this._def,maxLength:{value:e,message:U.toString(t)}})}length(e,t){return new r({...this._def,exactLength:{value:e,message:U.toString(t)}})}nonempty(e){return this.min(1,e)}};Ke.create=(r,e)=>new Ke({type:r,minLength:null,maxLength:null,exactLength:null,typeName:L.ZodArray,...N(e)});function Pt(r){if(r instanceof me){let e={};for(let t in r.shape){let n=r.shape[t];e[t]=xe.create(Pt(n))}return new me({...r._def,shape:()=>e})}else return r instanceof Ke?new Ke({...r._def,type:Pt(r.element)}):r instanceof xe?xe.create(Pt(r.unwrap())):r instanceof Fe?Fe.create(Pt(r.unwrap())):r instanceof Pe?Pe.create(r.items.map(e=>Pt(e))):r}var me=class r extends D{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=q.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==R.object){let h=this._getOrReturnCtx(e);return k(h,{code:b.invalid_type,expected:R.object,received:h.parsedType}),F}let{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),u=[];if(!(this._def.catchall instanceof Ae&&this._def.unknownKeys==="strip"))for(let h in i.data)a.includes(h)||u.push(h);let d=[];for(let h of a){let p=s[h],m=i.data[h];d.push({key:{status:"valid",value:h},value:p._parse(new Ee(i,m,i.path,h)),alwaysSet:h in i.data})}if(this._def.catchall instanceof Ae){let h=this._def.unknownKeys;if(h==="passthrough")for(let p of u)d.push({key:{status:"valid",value:p},value:{status:"valid",value:i.data[p]}});else if(h==="strict")u.length>0&&(k(i,{code:b.unrecognized_keys,keys:u}),n.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let h=this._def.catchall;for(let p of u){let m=i.data[p];d.push({key:{status:"valid",value:p},value:h._parse(new Ee(i,m,i.path,p)),alwaysSet:p in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let h=[];for(let p of d){let m=await p.key,_=await p.value;h.push({key:m,value:_,alwaysSet:p.alwaysSet})}return h}).then(h=>le.mergeObjectSync(n,h)):le.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(e){return U.errToObj,new r({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var i,s,a,u;let d=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,t,n).message)!==null&&a!==void 0?a:n.defaultError;return t.code==="unrecognized_keys"?{message:(u=U.errToObj(e).message)!==null&&u!==void 0?u:d}:{message:d}}}:{}})}strip(){return new r({...this._def,unknownKeys:"strip"})}passthrough(){return new r({...this._def,unknownKeys:"passthrough"})}extend(e){return new r({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new r({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:L.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new r({...this._def,catchall:e})}pick(e){let t={};return q.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new r({...this._def,shape:()=>t})}omit(e){let t={};return q.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new r({...this._def,shape:()=>t})}deepPartial(){return Pt(this)}partial(e){let t={};return q.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()}),new r({...this._def,shape:()=>t})}required(e){let t={};return q.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof xe;)s=s._def.innerType;t[n]=s}}),new r({...this._def,shape:()=>t})}keyof(){return bs(q.objectKeys(this.shape))}};me.create=(r,e)=>new me({shape:()=>r,unknownKeys:"strip",catchall:Ae.create(),typeName:L.ZodObject,...N(e)});me.strictCreate=(r,e)=>new me({shape:()=>r,unknownKeys:"strict",catchall:Ae.create(),typeName:L.ZodObject,...N(e)});me.lazycreate=(r,e)=>new me({shape:r,unknownKeys:"strip",catchall:Ae.create(),typeName:L.ZodObject,...N(e)});var yt=class extends D{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;function i(s){for(let u of s)if(u.result.status==="valid")return u.result;for(let u of s)if(u.result.status==="dirty")return t.common.issues.push(...u.ctx.common.issues),u.result;let a=s.map(u=>new de(u.ctx.common.issues));return k(t,{code:b.invalid_union,unionErrors:a}),F}if(t.common.async)return Promise.all(n.map(async s=>{let a={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(i);{let s,a=[];for(let d of n){let h={...t,common:{...t.common,issues:[]},parent:null},p=d._parseSync({data:t.data,path:t.path,parent:h});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:h}),h.common.issues.length&&a.push(h.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;let u=a.map(d=>new de(d));return k(t,{code:b.invalid_union,unionErrors:u}),F}}get options(){return this._def.options}};yt.create=(r,e)=>new yt({options:r,typeName:L.ZodUnion,...N(e)});var qe=r=>r instanceof wt?qe(r.schema):r instanceof _e?qe(r.innerType()):r instanceof _t?[r.value]:r instanceof bt?r.options:r instanceof xt?q.objectValues(r.enum):r instanceof Et?qe(r._def.innerType):r instanceof gt?[void 0]:r instanceof mt?[null]:r instanceof xe?[void 0,...qe(r.unwrap())]:r instanceof Fe?[null,...qe(r.unwrap())]:r instanceof fr||r instanceof St?qe(r.unwrap()):r instanceof Tt?qe(r._def.innerType):[],un=class r extends D{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==R.object)return k(t,{code:b.invalid_type,expected:R.object,received:t.parsedType}),F;let n=this.discriminator,i=t.data[n],s=this.optionsMap.get(i);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(k(t,{code:b.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),F)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let i=new Map;for(let s of t){let a=qe(s.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let u of a){if(i.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);i.set(u,s)}}return new r({typeName:L.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...N(n)})}};function ri(r,e){let t=et(r),n=et(e);if(r===e)return{valid:!0,data:r};if(t===R.object&&n===R.object){let i=q.objectKeys(e),s=q.objectKeys(r).filter(u=>i.indexOf(u)!==-1),a={...r,...e};for(let u of s){let d=ri(r[u],e[u]);if(!d.valid)return{valid:!1};a[u]=d.data}return{valid:!0,data:a}}else if(t===R.array&&n===R.array){if(r.length!==e.length)return{valid:!1};let i=[];for(let s=0;s<r.length;s++){let a=r[s],u=e[s],d=ri(a,u);if(!d.valid)return{valid:!1};i.push(d.data)}return{valid:!0,data:i}}else return t===R.date&&n===R.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}var vt=class extends D{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),i=(s,a)=>{if(ei(s)||ei(a))return F;let u=ri(s.value,a.value);return u.valid?((ti(s)||ti(a))&&t.dirty(),{status:t.value,value:u.data}):(k(n,{code:b.invalid_intersection_types}),F)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};vt.create=(r,e,t)=>new vt({left:r,right:e,typeName:L.ZodIntersection,...N(t)});var Pe=class r extends D{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==R.array)return k(n,{code:b.invalid_type,expected:R.array,received:n.parsedType}),F;if(n.data.length<this._def.items.length)return k(n,{code:b.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),F;!this._def.rest&&n.data.length>this._def.items.length&&(k(n,{code:b.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let s=[...n.data].map((a,u)=>{let d=this._def.items[u]||this._def.rest;return d?d._parse(new Ee(n,a,n.path,u)):null}).filter(a=>!!a);return n.common.async?Promise.all(s).then(a=>le.mergeArray(t,a)):le.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new r({...this._def,rest:e})}};Pe.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Pe({items:r,typeName:L.ZodTuple,rest:null,...N(e)})};var cn=class r extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==R.object)return k(n,{code:b.invalid_type,expected:R.object,received:n.parsedType}),F;let i=[],s=this._def.keyType,a=this._def.valueType;for(let u in n.data)i.push({key:s._parse(new Ee(n,u,n.path,u)),value:a._parse(new Ee(n,n.data[u],n.path,u)),alwaysSet:u in n.data});return n.common.async?le.mergeObjectAsync(t,i):le.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof D?new r({keyType:e,valueType:t,typeName:L.ZodRecord,...N(n)}):new r({keyType:tt.create(),valueType:e,typeName:L.ZodRecord,...N(t)})}},Zt=class extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==R.map)return k(n,{code:b.invalid_type,expected:R.map,received:n.parsedType}),F;let i=this._def.keyType,s=this._def.valueType,a=[...n.data.entries()].map(([u,d],h)=>({key:i._parse(new Ee(n,u,n.path,[h,"key"])),value:s._parse(new Ee(n,d,n.path,[h,"value"]))}));if(n.common.async){let u=new Map;return Promise.resolve().then(async()=>{for(let d of a){let h=await d.key,p=await d.value;if(h.status==="aborted"||p.status==="aborted")return F;(h.status==="dirty"||p.status==="dirty")&&t.dirty(),u.set(h.value,p.value)}return{status:t.value,value:u}})}else{let u=new Map;for(let d of a){let h=d.key,p=d.value;if(h.status==="aborted"||p.status==="aborted")return F;(h.status==="dirty"||p.status==="dirty")&&t.dirty(),u.set(h.value,p.value)}return{status:t.value,value:u}}}};Zt.create=(r,e,t)=>new Zt({valueType:e,keyType:r,typeName:L.ZodMap,...N(t)});var $t=class r extends D{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==R.set)return k(n,{code:b.invalid_type,expected:R.set,received:n.parsedType}),F;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(k(n,{code:b.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(k(n,{code:b.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());let s=this._def.valueType;function a(d){let h=new Set;for(let p of d){if(p.status==="aborted")return F;p.status==="dirty"&&t.dirty(),h.add(p.value)}return{status:t.value,value:h}}let u=[...n.data.values()].map((d,h)=>s._parse(new Ee(n,d,n.path,h)));return n.common.async?Promise.all(u).then(d=>a(d)):a(u)}min(e,t){return new r({...this._def,minSize:{value:e,message:U.toString(t)}})}max(e,t){return new r({...this._def,maxSize:{value:e,message:U.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};$t.create=(r,e)=>new $t({valueType:r,minSize:null,maxSize:null,typeName:L.ZodSet,...N(e)});var ln=class r extends D{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==R.function)return k(t,{code:b.invalid_type,expected:R.function,received:t.parsedType}),F;function n(u,d){return an({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,sn(),jt].filter(h=>!!h),issueData:{code:b.invalid_arguments,argumentsError:d}})}function i(u,d){return an({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,sn(),jt].filter(h=>!!h),issueData:{code:b.invalid_return_type,returnTypeError:d}})}let s={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof nt){let u=this;return he(async function(...d){let h=new de([]),p=await u._def.args.parseAsync(d,s).catch(T=>{throw h.addIssue(n(d,T)),h}),m=await Reflect.apply(a,this,p);return await u._def.returns._def.type.parseAsync(m,s).catch(T=>{throw h.addIssue(i(m,T)),h})})}else{let u=this;return he(function(...d){let h=u._def.args.safeParse(d,s);if(!h.success)throw new de([n(d,h.error)]);let p=Reflect.apply(a,this,h.data),m=u._def.returns.safeParse(p,s);if(!m.success)throw new de([i(p,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new r({...this._def,args:Pe.create(e).rest(We.create())})}returns(e){return new r({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new r({args:e||Pe.create([]).rest(We.create()),returns:t||We.create(),typeName:L.ZodFunction,...N(n)})}},wt=class extends D{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};wt.create=(r,e)=>new wt({getter:r,typeName:L.ZodLazy,...N(e)});var _t=class extends D{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return k(t,{received:t.data,code:b.invalid_literal,expected:this._def.value}),F}return{status:"valid",value:e.data}}get value(){return this._def.value}};_t.create=(r,e)=>new _t({value:r,typeName:L.ZodLiteral,...N(e)});function bs(r,e){return new bt({values:r,typeName:L.ZodEnum,...N(e)})}var bt=class r extends D{constructor(){super(...arguments),cr.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),n=this._def.values;return k(t,{expected:q.joinValues(n),received:t.parsedType,code:b.invalid_type}),F}if(on(this,cr,"f")||ys(this,cr,new Set(this._def.values),"f"),!on(this,cr,"f").has(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return k(t,{received:t.data,code:b.invalid_enum_value,options:n}),F}return he(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return r.create(e,{...this._def,...t})}exclude(e,t=this._def){return r.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}};cr=new WeakMap;bt.create=bs;var xt=class extends D{constructor(){super(...arguments),lr.set(this,void 0)}_parse(e){let t=q.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==R.string&&n.parsedType!==R.number){let i=q.objectValues(t);return k(n,{expected:q.joinValues(i),received:n.parsedType,code:b.invalid_type}),F}if(on(this,lr,"f")||ys(this,lr,new Set(q.getValidEnumValues(this._def.values)),"f"),!on(this,lr,"f").has(e.data)){let i=q.objectValues(t);return k(n,{received:n.data,code:b.invalid_enum_value,options:i}),F}return he(e.data)}get enum(){return this._def.values}};lr=new WeakMap;xt.create=(r,e)=>new xt({values:r,typeName:L.ZodNativeEnum,...N(e)});var nt=class extends D{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==R.promise&&t.common.async===!1)return k(t,{code:b.invalid_type,expected:R.promise,received:t.parsedType}),F;let n=t.parsedType===R.promise?t.data:Promise.resolve(t.data);return he(n.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}};nt.create=(r,e)=>new nt({type:r,typeName:L.ZodPromise,...N(e)});var _e=class extends D{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===L.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:a=>{k(n,a),a.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){let a=i.transform(n.data,s);if(n.common.async)return Promise.resolve(a).then(async u=>{if(t.value==="aborted")return F;let d=await this._def.schema._parseAsync({data:u,path:n.path,parent:n});return d.status==="aborted"?F:d.status==="dirty"||t.value==="dirty"?Ft(d.value):d});{if(t.value==="aborted")return F;let u=this._def.schema._parseSync({data:a,path:n.path,parent:n});return u.status==="aborted"?F:u.status==="dirty"||t.value==="dirty"?Ft(u.value):u}}if(i.type==="refinement"){let a=u=>{let d=i.refinement(u,s);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(n.common.async===!1){let u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?F:(u.status==="dirty"&&t.dirty(),a(u.value),{status:t.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?F:(u.status==="dirty"&&t.dirty(),a(u.value).then(()=>({status:t.value,value:u.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!dr(a))return a;let u=i.transform(a.value,s);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>dr(a)?Promise.resolve(i.transform(a.value,s)).then(u=>({status:t.value,value:u})):a);q.assertNever(i)}};_e.create=(r,e,t)=>new _e({schema:r,typeName:L.ZodEffects,effect:e,...N(t)});_e.createWithPreprocess=(r,e,t)=>new _e({schema:e,effect:{type:"preprocess",transform:r},typeName:L.ZodEffects,...N(t)});var xe=class extends D{_parse(e){return this._getType(e)===R.undefined?he(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};xe.create=(r,e)=>new xe({innerType:r,typeName:L.ZodOptional,...N(e)});var Fe=class extends D{_parse(e){return this._getType(e)===R.null?he(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Fe.create=(r,e)=>new Fe({innerType:r,typeName:L.ZodNullable,...N(e)});var Et=class extends D{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===R.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};Et.create=(r,e)=>new Et({innerType:r,typeName:L.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...N(e)});var Tt=class extends D{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return hr(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new de(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new de(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Tt.create=(r,e)=>new Tt({innerType:r,typeName:L.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...N(e)});var zt=class extends D{_parse(e){if(this._getType(e)!==R.nan){let n=this._getOrReturnCtx(e);return k(n,{code:b.invalid_type,expected:R.nan,received:n.parsedType}),F}return{status:"valid",value:e.data}}};zt.create=r=>new zt({typeName:L.ZodNaN,...N(r)});var ju=Symbol("zod_brand"),fr=class extends D{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},pr=class r extends D{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?F:s.status==="dirty"?(t.dirty(),Ft(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?F:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,t){return new r({in:e,out:t,typeName:L.ZodPipeline})}},St=class extends D{_parse(e){let t=this._def.innerType._parse(e),n=i=>(dr(i)&&(i.value=Object.freeze(i.value)),i);return hr(t)?t.then(i=>n(i)):n(t)}unwrap(){return this._def.innerType}};St.create=(r,e)=>new St({innerType:r,typeName:L.ZodReadonly,...N(e)});function xs(r,e={},t){return r?rt.create().superRefine((n,i)=>{var s,a;if(!r(n)){let u=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,d=(a=(s=u.fatal)!==null&&s!==void 0?s:t)!==null&&a!==void 0?a:!0,h=typeof u=="string"?{message:u}:u;i.addIssue({code:"custom",...h,fatal:d})}}):rt.create()}var Nu={object:me.lazycreate},L;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(L||(L={}));var Du=(r,e={message:`Input not instance of ${r.name}`})=>xs(t=>t instanceof r,e),Es=tt.create,Ts=dt.create,Zu=zt.create,$u=ht.create,Ss=ft.create,zu=pt.create,Vu=Nt.create,Gu=gt.create,qu=mt.create,Wu=rt.create,Ku=We.create,Hu=Ae.create,Yu=Dt.create,Ju=Ke.create,Qu=me.create,Xu=me.strictCreate,ec=yt.create,tc=un.create,rc=vt.create,nc=Pe.create,ic=cn.create,sc=Zt.create,ac=$t.create,oc=ln.create,uc=wt.create,cc=_t.create,lc=bt.create,dc=xt.create,hc=nt.create,gs=_e.create,fc=xe.create,pc=Fe.create,gc=_e.createWithPreprocess,mc=pr.create,yc=()=>Es().optional(),vc=()=>Ts().optional(),wc=()=>Ss().optional(),_c={string:r=>tt.create({...r,coerce:!0}),number:r=>dt.create({...r,coerce:!0}),boolean:r=>ft.create({...r,coerce:!0}),bigint:r=>ht.create({...r,coerce:!0}),date:r=>pt.create({...r,coerce:!0})},bc=F,y=Object.freeze({__proto__:null,defaultErrorMap:jt,setErrorMap:bu,getErrorMap:sn,makeIssue:an,EMPTY_PATH:xu,addIssueToContext:k,ParseStatus:le,INVALID:F,DIRTY:Ft,OK:he,isAborted:ei,isDirty:ti,isValid:dr,isAsync:hr,get util(){return q},get objectUtil(){return Xn},ZodParsedType:R,getParsedType:et,ZodType:D,datetimeRegex:_s,ZodString:tt,ZodNumber:dt,ZodBigInt:ht,ZodBoolean:ft,ZodDate:pt,ZodSymbol:Nt,ZodUndefined:gt,ZodNull:mt,ZodAny:rt,ZodUnknown:We,ZodNever:Ae,ZodVoid:Dt,ZodArray:Ke,ZodObject:me,ZodUnion:yt,ZodDiscriminatedUnion:un,ZodIntersection:vt,ZodTuple:Pe,ZodRecord:cn,ZodMap:Zt,ZodSet:$t,ZodFunction:ln,ZodLazy:wt,ZodLiteral:_t,ZodEnum:bt,ZodNativeEnum:xt,ZodPromise:nt,ZodEffects:_e,ZodTransformer:_e,ZodOptional:xe,ZodNullable:Fe,ZodDefault:Et,ZodCatch:Tt,ZodNaN:zt,BRAND:ju,ZodBranded:fr,ZodPipeline:pr,ZodReadonly:St,custom:xs,Schema:D,ZodSchema:D,late:Nu,get ZodFirstPartyTypeKind(){return L},coerce:_c,any:Wu,array:Ju,bigint:$u,boolean:Ss,date:zu,discriminatedUnion:tc,effect:gs,enum:lc,function:oc,instanceof:Du,intersection:rc,lazy:uc,literal:cc,map:sc,nan:Zu,nativeEnum:dc,never:Hu,null:qu,nullable:pc,number:Ts,object:Qu,oboolean:wc,onumber:vc,optional:fc,ostring:yc,pipeline:mc,preprocess:gc,promise:hc,record:ic,set:ac,strictObject:Xu,string:Es,symbol:Vu,transformer:gs,tuple:nc,undefined:Gu,union:ec,unknown:Ku,void:Yu,NEVER:bc,ZodIssueCode:b,quotelessJson:_u,ZodError:de});var As=({url:r,path:e})=>{if(!e)return r;e.startsWith("/")&&(e=e.slice(1));let t=new URL(r);return t.pathname=t.pathname.replace(/\/$/,"")+"/"+e,t.toString()};function ks(r=[]){let e=r.reduce((t,n)=>(t[n.name]||(t[n.name]=[]),t[n.name].push(n.value),t),{});return Object.entries(e).reduce((t,[n,i])=>(t[n]=i.length>1?i:[i[0]],t),{})}function Vt(r,{name:e,value:t}){return r.filter(n=>n.name!==e?!0:t!==void 0?n.value!==t:!1)}function ni(r,e){return typeof r=="string"?r===e:Array.isArray(r)?r.includes(e):!1}function xc(r){return r instanceof de}function se(r){let e;return xc(r)?(e=new Error(Ec(r)),e.stack=(e.stack||"")+`
`+(r.stack||"")):r instanceof Error?e=r:r&&typeof r=="object"&&"message"in r?e=new Error(r.message):typeof r=="string"?e=new Error(r):e=new Error("An error occurred"),e}function dn(r,e,t){return r.issues.reduce((n,i)=>{switch(i.code){case b.invalid_arguments:return n.concat(dn(i.argumentsError,422,"Invalid Arguments"));case b.invalid_return_type:return n.concat(dn(i.returnTypeError,500,"Invalid Return"));case b.invalid_union:return n.concat(i.unionErrors.flatMap(s=>dn(s,400,"Invalid Union")));default:return n.concat({...i,status:e,contextCode:t})}},[])}function Ec(r){return dn(r,400,"").reduce((n,i)=>{let{message:s,path:a,contextCode:u}=i,d=a[1]||a[0],h=u?`${u} `:"";return n.push(`${h}'${d}': ${s}.`),n},[]).join(" | ")}var Tc=y.object({data:y.object({transactions:y.object({edges:y.array(y.object({node:y.record(y.any())}))})})}),hn=class{constructor({logger:e,fetch:t,GRAPHQL_URL:n}){this.logger=e,this.fetch=t,this.GRAPHQL_URL=n,this.query_template=`
    query GetTransactions ($transactionIds: [ID!]!) {
      transactions(ids: $transactionIds) {
        edges {
          node {
            owner {
              address
            }
            tags {
              name
              value
            }
            block {
              id
              height
              timestamp
            }
          }
        }
      }
    }`}async execute(e){try{let t=await this.fetch(this.GRAPHQL_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:this.query_template,variables:{transactionIds:[e]}})});if(!t.ok)throw this.logger('Error Encountered when querying gateway for transaction "%s"',e),new Error(`${t.status}: ${await t.text()}`);let n=await t.json();return Tc.parse(n).data.transactions.edges[0].node}catch(t){throw this.logger("Error: %s",t.message),se(t)}}};var Us=qn(Bs(),1),ii=(r="aoconnect-ts")=>{let e=(0,Us.default)(r);return e.child=t=>ii(`${e.namespace}:${t}`),e.tap=(t,...n)=>i=>(e(t,...n,i),i),e};var je=y.object({name:y.string(),value:y.string()}),dp=y.array(je),ke=y.function().args(y.object({data:y.any(),tags:y.array(je),target:y.string().optional(),anchor:y.string().optional()})).returns(y.promise(y.object({id:y.string(),raw:y.any()}))),Ms=y.function().args(y.object({Id:y.string(),Target:y.string(),Owner:y.string(),Anchor:y.string().optional(),Data:y.any().default("1234"),Tags:y.array(y.object({name:y.string(),value:y.string()}))})).returns(y.promise(y.any())),Ls=y.function().args(y.object({id:y.string().min(1,{message:"message id is required"}),processId:y.string().min(1,{message:"process id is required"})})).returns(y.promise(y.any())),hp=y.function().args(y.object({process:y.string().min(1,{message:"process id is required"}),from:y.string().optional(),to:y.string().optional(),sort:y.enum(["ASC","DESC"]).default("ASC"),limit:y.number().optional()})).returns(y.promise(y.object({edges:y.array(y.object({cursor:y.string(),node:y.object({Output:y.any().optional(),Messages:y.array(y.any()).optional(),Spawns:y.array(y.any()).optional(),Error:y.any().optional()})}))}))),si=y.function().args(y.object({processId:y.string(),data:y.any(),tags:y.array(je),anchor:y.string().optional(),signer:ke})).returns(y.promise(y.object({messageId:y.string()}).passthrough())),Ps=y.function().args(y.object({data:y.any(),tags:y.array(je),signer:ke})).returns(y.promise(y.object({processId:y.string()}).passthrough())),Fs=y.function().args(y.object({process:y.string(),message:y.string(),baseLayer:y.boolean().optional(),exclude:y.array(y.string()).optional()})).returns(y.promise(y.object({assignmentId:y.string()}).passthrough())),gn=si,fp=y.function().args(y.object({suUrl:y.string().url(),processId:y.string()})).returns(y.promise(y.object({tags:y.array(je)}).passthrough())),pp=y.function().args(y.string()).returns(y.promise(y.object({url:y.string()}))),js=y.function().args(y.string()).returns(y.promise(y.boolean())),Ns=y.function().args(y.string()).returns(y.promise(y.object({tags:y.array(je)}).passthrough()));async function Ds({loadResult:r},e){return Ls.implement(r)(e)}var jc=y.object({id:y.string().min(1,{message:"message is required to be a message id"}),processId:y.string().min(1,{message:"process is required to be a process id"})});function Zs(r){return async e=>{try{console.log(`getResult, args = ${JSON.stringify(e)}`);let t={id:e.message,processId:e.process};jc.parse(t);let n=await Ds(r,t);return r.logger.tap('readResult result for message "%s": %O',n),n}catch(t){throw se(t)}}}function $s(r){let{tags:e,...t}=r,i=[{name:"Data-Protocol",value:"ao"},{name:"Variant"},{name:"Type"},{name:"SDK"}].reduce((s,a)=>Vt(s,a),e||[]);return i=[...i,{name:"Data-Protocol",value:"ao"},{name:"Variant",value:"ao.TN.1"},{name:"Type",value:"Message"},{name:"SDK",value:"aoconnect"}],i=i.map(s=>je.parse(s)),{...t,tags:i}}function zs(r,e){if(r.data)return r;let{data:t,tags:n,...i}=r,s=Math.random().toString().slice(-4),a=Vt(n,{name:"Content-Type"});return a.push({name:"Content-Type",value:"text/plain"}),e.tap('added pseudo-random string as message "data"'),{...i,data:s,tags:a}}function Vs(r){let e=si.implement(r.deployMessage);return async t=>{try{let{process:n,signer:i,...s}=t;if(!n)throw"Missing process id";let a=ke.implement(i),u=$s(s),h={...zs(u,r.logger),processId:n,signer:ke.implement(a)},p=await e(h),m={...t,messageId:p.messageId};return r.logger.tap('Deploy message result for process "%s": %O',n)(m),p}catch(n){throw se(n)}}}async function Nc({loadTransactionMeta:r,logger:e,module:t}){try{let i=await Ns.implement(r)(t),s=ks(i.tags);if(!ni(s["Data-Protocol"],"ao"))throw"Tag 'Data-Protocol': value 'ao' was not found on module";if(!ni(s.Type,"Module"))throw"Tag 'Data-Protocol': value 'Module' was not found on module";if(!s["Module-Format"])throw"Tag 'Module-Format': was not found on module";if(!s["Input-Encoding"])throw"Tag 'Input-Encoding': was not found on module";if(!s["Output-Encoding"])throw"Tag 'Output-Encoding': was not found on module";return e.tap("Verified module source"),!0}catch(n){return e.tap(`Verifying module source failed: ${n}`),!1}}async function Dc({logger:r,validateScheduler:e,scheduler:t}){try{return await js.implement(e)(t)?(r.tap("Verified scheduler"),!0):(r.tap(`Verifying scheduler failed: Valid Scheduler-Location owned by ${t} not found`),!1)}catch(n){return r.tap(`Verifying scheduler failed: ${n}`),!1}}function Zc({signer:r,logger:e}){return r?!0:(e.tap("signer not found"),!1)}async function Gs(r,e){let t=r.logger.child("verifyInput");return await Nc({loadTransactionMeta:r.loadTransactionMeta,module:e.module,logger:t})?await Dc({validateScheduler:r.validateScheduler,scheduler:e.scheduler,logger:t})?Zc({signer:e.signer,logger:t})?(t.tap("Successfully verified inputs"),!0):(t.tap("Failed to validate signer."),!1):(t.tap("Failed to validate scheduler."),!1):(t.tap("Failed to validate module."),!1)}function $c({tags:r,module:e,scheduler:t}){let n=[{name:"Data-Protocol",value:"ao"},{name:"Variant"},{name:"Type"},{name:"Module"},{name:"Scheduler"},{name:"SDK"}],i=r||[],s=n.reduce((a,u)=>Vt(a,u),i);return s=[...s,{name:"Data-Protocol",value:"ao"},{name:"Variant",value:"ao.TN.1"},{name:"Type",value:"Process"},{name:"Module",value:e},{name:"Scheduler",value:t},{name:"SDK",value:"aoconnect"}],s.map(a=>je.parse(a))}function zc(r,e){if(!r.tags)throw"No tags present when building data for spawn.";if(r.data)return{data:r.data,tags:r.tags};let{tags:t,...n}=r,i=Math.random().toString().slice(-4),s=Vt(t,{name:"Content-Type"});return s.push({name:"Content-Type",value:"text/plain"}),e.tap('added pseudo-random string as message "data"'),{...n,data:i,tags:s}}async function qs(r,e){let t=r.logger.child("uploadProcess"),{data:n,tags:i}=zc(e,t),s=$c({...e,tags:i});return await Ps.implement(r.deployProcess)({data:n,tags:s,signer:ke.implement(e.signer)})}function Ws(r){return async e=>{try{if(!await Gs(r,e))throw"Invalid inputs";return await qs(r,e)}catch(t){throw se(t)}}}async function Ks(r,e){return{monitorId:(await gn.implement(r.deployMonitor)({processId:e.process,signer:ke.implement(e.signer),data:Math.random().toString().slice(-4),tags:[]})).messageId}}function Hs(r){return async e=>{try{return await Ks(r,e)}catch(t){throw se(t)}}}async function Ys(r,e){return{monitorId:(await gn.implement(r.deployUnmonitor)({processId:e.process,signer:ke.implement(e.signer),data:Math.random().toString().slice(-4),tags:[]})).messageId}}function Js(r){return async e=>{try{return await Ys(r,e)}catch(t){throw se(t)}}}var Vc=y.object({Id:y.string(),Target:y.string(),Owner:y.string(),Anchor:y.string().optional(),Data:y.any().default("1234"),Tags:y.array(y.object({name:y.string(),value:y.string()}))});function Qs(r){let e=Vc.parse(r),t=[...e.Tags.map(n=>n),{name:"Data-Protocol",value:"ao"},{name:"Type",value:"Message"},{name:"Variant",value:"ao.TN.1"}];return{Id:e.Id,Target:e.Target,Owner:e.Owner,Anchor:e.Anchor??"ABCD",Data:e.Data??Math.random().toString().slice(-4),Tags:t}}function Gc({process:r,data:e,tags:t,anchor:n,...i}){return{Id:"1234",Owner:"1234",...i,Target:r,Data:e??"1234",Tags:t??[],Anchor:n??"0"}}function Xs(r){let e=Ms.implement(r.dryrunFetch);return async t=>{try{let n=Gc(t),i=Qs(n);return await e(i)}catch(n){throw se(n)}}}async function ea(r,e){return{assignmentId:(await Fs.implement(r.deployAssign)({process:e.process,message:e.message,baseLayer:e.baseLayer,exclude:e.exclude})).assignmentId}}function ta(r){return async e=>{try{return await ea(r,e)}catch(t){throw se(t)}}}var ra=y.object({process:y.string().min(1,{message:"process identifier is required"}),from:y.string().optional(),to:y.string().optional(),sort:y.enum(["ASC","DESC"]).default("ASC"),limit:y.number().optional()}),qc=y.object({edges:y.array(y.object({cursor:y.string(),node:y.object({Output:y.any().optional(),Messages:y.array(y.any()).optional(),Spawns:y.array(y.any()).optional(),Error:y.any().optional()})}))}),Wc=y.function().args(ra).returns(y.promise(qc));function na(r){return async function(e){try{let t=ra.parse(e),i=await Wc.implement(r.queryResults)(t);return r.logger.tap('readResults result for message "%s": %O',e.process)(i),i}catch(t){throw se(t)}}}var Kc={"@@functional/placeholder":!0};function X(r){return r===Kc}function fe(r){return function e(t){return arguments.length===0||X(t)?e:r.apply(this,arguments)}}function ne(r){return function e(t,n){switch(arguments.length){case 0:return e;case 1:return X(t)?e:fe(function(i){return r(t,i)});default:return X(t)&&X(n)?e:X(t)?fe(function(i){return r(i,n)}):X(n)?fe(function(i){return r(t,i)}):r(t,n)}}}function Bn(r,e){switch(r){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,i){return e.apply(this,arguments)};case 4:return function(t,n,i,s){return e.apply(this,arguments)};case 5:return function(t,n,i,s,a){return e.apply(this,arguments)};case 6:return function(t,n,i,s,a,u){return e.apply(this,arguments)};case 7:return function(t,n,i,s,a,u,d){return e.apply(this,arguments)};case 8:return function(t,n,i,s,a,u,d,h){return e.apply(this,arguments)};case 9:return function(t,n,i,s,a,u,d,h,p){return e.apply(this,arguments)};case 10:return function(t,n,i,s,a,u,d,h,p,m){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function ma(r,e,t){return function(){for(var n=[],i=0,s=r,a=0,u=!1;a<e.length||i<arguments.length;){var d;a<e.length&&(!X(e[a])||i>=arguments.length)?d=e[a]:(d=arguments[i],i+=1),n[a]=d,X(d)?u=!0:s-=1,a+=1}return!u&&s<=0?t.apply(this,n):Bn(Math.max(0,s),ma(r,n,t))}}var Hc=ne(function(r,e){return r===1?fe(e):Bn(r,ma(r,[],e))}),ya=Hc;function bi(r){return function e(t,n,i){switch(arguments.length){case 0:return e;case 1:return X(t)?e:ne(function(s,a){return r(t,s,a)});case 2:return X(t)&&X(n)?e:X(t)?ne(function(s,a){return r(s,n,a)}):X(n)?ne(function(s,a){return r(t,s,a)}):fe(function(s){return r(t,n,s)});default:return X(t)&&X(n)&&X(i)?e:X(t)&&X(n)?ne(function(s,a){return r(s,a,i)}):X(t)&&X(i)?ne(function(s,a){return r(s,n,a)}):X(n)&&X(i)?ne(function(s,a){return r(t,s,a)}):X(t)?fe(function(s){return r(s,n,i)}):X(n)?fe(function(s){return r(t,s,i)}):X(i)?fe(function(s){return r(t,n,s)}):r(t,n,i)}}}var xi=Array.isArray||function(r){return r!=null&&r.length>=0&&Object.prototype.toString.call(r)==="[object Array]"};function Yc(r){return r!=null&&typeof r["@@transducer/step"]=="function"}function Ei(r,e,t){return function(){if(arguments.length===0)return t();var n=arguments[arguments.length-1];if(!xi(n)){for(var i=0;i<r.length;){if(typeof n[r[i]]=="function")return n[r[i]].apply(n,Array.prototype.slice.call(arguments,0,-1));i+=1}if(Yc(n)){var s=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return s(n)}}return t.apply(this,arguments)}}function Jc(r){return r&&r["@@transducer/reduced"]?r:{"@@transducer/value":r,"@@transducer/reduced":!0}}var br={init:function(){return this.xf["@@transducer/init"]()},result:function(r){return this.xf["@@transducer/result"](r)}};function ia(r){for(var e=[],t;!(t=r.next()).done;)e.push(t.value);return e}function sa(r,e,t){for(var n=0,i=t.length;n<i;){if(r(e,t[n]))return!0;n+=1}return!1}function Qc(r){var e=String(r).match(/^function (\w*)/);return e==null?"":e[1]}function wn(r,e){return Object.prototype.hasOwnProperty.call(e,r)}function Xc(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}var ai=typeof Object.is=="function"?Object.is:Xc,aa=Object.prototype.toString,el=function(){return aa.call(arguments)==="[object Arguments]"?function(r){return aa.call(r)==="[object Arguments]"}:function(r){return wn("callee",r)}}(),tl=el,rl=!{toString:null}.propertyIsEnumerable("toString"),oa=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ua=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),nl=function(r,e){for(var t=0;t<r.length;){if(r[t]===e)return!0;t+=1}return!1},il=fe(typeof Object.keys=="function"&&!ua?function(r){return Object(r)!==r?[]:Object.keys(r)}:function(r){if(Object(r)!==r)return[];var e,t,n=[],i=ua&&tl(r);for(e in r)wn(e,r)&&(!i||e!=="length")&&(n[n.length]=e);if(rl)for(t=oa.length-1;t>=0;)e=oa[t],wn(e,r)&&!nl(n,e)&&(n[n.length]=e),t-=1;return n}),Yt=il,sl=fe(function(r){return r===null?"Null":r===void 0?"Undefined":Object.prototype.toString.call(r).slice(8,-1)}),ca=sl;function la(r,e,t,n){var i=ia(r),s=ia(e);function a(u,d){return Ti(u,d,t.slice(),n.slice())}return!sa(function(u,d){return!sa(a,d,u)},s,i)}function Ti(r,e,t,n){if(ai(r,e))return!0;var i=ca(r);if(i!==ca(e))return!1;if(typeof r["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof r["fantasy-land/equals"]=="function"&&r["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](r);if(typeof r.equals=="function"||typeof e.equals=="function")return typeof r.equals=="function"&&r.equals(e)&&typeof e.equals=="function"&&e.equals(r);switch(i){case"Arguments":case"Array":case"Object":if(typeof r.constructor=="function"&&Qc(r.constructor)==="Promise")return r===e;break;case"Boolean":case"Number":case"String":if(!(typeof r==typeof e&&ai(r.valueOf(),e.valueOf())))return!1;break;case"Date":if(!ai(r.valueOf(),e.valueOf()))return!1;break;case"Error":return r.name===e.name&&r.message===e.message;case"RegExp":if(!(r.source===e.source&&r.global===e.global&&r.ignoreCase===e.ignoreCase&&r.multiline===e.multiline&&r.sticky===e.sticky&&r.unicode===e.unicode))return!1;break}for(var s=t.length-1;s>=0;){if(t[s]===r)return n[s]===e;s-=1}switch(i){case"Map":return r.size!==e.size?!1:la(r.entries(),e.entries(),t.concat([r]),n.concat([e]));case"Set":return r.size!==e.size?!1:la(r.values(),e.values(),t.concat([r]),n.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=Yt(r);if(a.length!==Yt(e).length)return!1;var u=t.concat([r]),d=n.concat([e]);for(s=a.length-1;s>=0;){var h=a[s];if(!(wn(h,e)&&Ti(e[h],r[h],u,d)))return!1;s-=1}return!0}var al=ne(function(r,e){return Ti(r,e,[],[])}),va=al;function ol(r,e,t){var n,i;if(typeof r.indexOf=="function")switch(typeof e){case"number":if(e===0){for(n=1/e;t<r.length;){if(i=r[t],i===0&&1/i===n)return t;t+=1}return-1}else if(e!==e){for(;t<r.length;){if(i=r[t],typeof i=="number"&&i!==i)return t;t+=1}return-1}return r.indexOf(e,t);case"string":case"boolean":case"function":case"undefined":return r.indexOf(e,t);case"object":if(e===null)return r.indexOf(e,t)}for(;t<r.length;){if(va(r[t],e))return t;t+=1}return-1}function ul(r,e){return ol(e,r,0)>=0}function _r(r,e){for(var t=0,n=e.length,i=Array(n);t<n;)i[t]=r(e[t]),t+=1;return i}function oi(r){var e=r.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var gr=function(r){return(r<10?"0":"")+r},cl=typeof Date.prototype.toISOString=="function"?function(r){return r.toISOString()}:function(r){return r.getUTCFullYear()+"-"+gr(r.getUTCMonth()+1)+"-"+gr(r.getUTCDate())+"T"+gr(r.getUTCHours())+":"+gr(r.getUTCMinutes())+":"+gr(r.getUTCSeconds())+"."+(r.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},ll=cl;function dl(r){return function(){return!r.apply(this,arguments)}}function wa(r,e,t){for(var n=0,i=t.length;n<i;)e=r(e,t[n]),n+=1;return e}function hl(r,e){for(var t=0,n=e.length,i=[];t<n;)r(e[t])&&(i[i.length]=e[t]),t+=1;return i}function fl(r){return Object.prototype.toString.call(r)==="[object Object]"}var pl=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=br.init,r.prototype["@@transducer/result"]=br.result,r.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},r}();function gl(r){return function(e){return new pl(r,e)}}var ml=ne(Ei(["fantasy-land/filter","filter"],gl,function(r,e){return fl(e)?wa(function(t,n){return r(e[n])&&(t[n]=e[n]),t},{},Yt(e)):hl(r,e)})),yl=ml,vl=ne(function(r,e){return yl(dl(r),e)}),wl=vl;function _a(r,e){var t=function(s){var a=e.concat([r]);return ul(s,a)?"<Circular>":_a(s,a)},n=function(s,a){return _r(function(u){return oi(u)+": "+t(s[u])},a.slice().sort())};switch(Object.prototype.toString.call(r)){case"[object Arguments]":return"(function() { return arguments; }("+_r(t,r).join(", ")+"))";case"[object Array]":return"["+_r(t,r).concat(n(r,wl(function(s){return/^\d+$/.test(s)},Yt(r)))).join(", ")+"]";case"[object Boolean]":return typeof r=="object"?"new Boolean("+t(r.valueOf())+")":r.toString();case"[object Date]":return"new Date("+(isNaN(r.valueOf())?t(NaN):oi(ll(r)))+")";case"[object Map]":return"new Map("+t(Array.from(r))+")";case"[object Null]":return"null";case"[object Number]":return typeof r=="object"?"new Number("+t(r.valueOf())+")":1/r===-1/0?"-0":r.toString(10);case"[object Set]":return"new Set("+t(Array.from(r).sort())+")";case"[object String]":return typeof r=="object"?"new String("+t(r.valueOf())+")":oi(r);case"[object Undefined]":return"undefined";default:if(typeof r.toString=="function"){var i=r.toString();if(i!=="[object Object]")return i}return"{"+n(r,Yt(r)).join(", ")+"}"}}var _l=fe(function(r){return _a(r,[])}),da=_l,bl=ne(function(r,e){if(r===e)return e;function t(u,d){if(u>d!=d>u)return d>u?d:u}var n=t(r,e);if(n!==void 0)return n;var i=t(typeof r,typeof e);if(i!==void 0)return i===typeof r?r:e;var s=da(r),a=t(s,da(e));return a!==void 0&&a===s?r:e}),xl=bl,El=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=br.init,r.prototype["@@transducer/result"]=br.result,r.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},r}(),Tl=function(r){return function(e){return new El(r,e)}},Sl=Tl,Al=ne(Ei(["fantasy-land/map","map"],Sl,function(r,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return ya(e.length,function(){return r.call(this,e.apply(this,arguments))});case"[object Object]":return wa(function(t,n){return t[n]=r(e[n]),t},{},Yt(e));default:return _r(r,e)}})),kl=Al,ba=Number.isInteger||function(r){return r<<0===r};function xa(r){return Object.prototype.toString.call(r)==="[object String]"}function Ea(r,e){var t=r<0?e.length+r:r;return xa(e)?e.charAt(t):e[t]}var Cl=ne(function(r,e){if(e!=null)return ba(r)?Ea(r,e):e[r]}),Un=Cl,Il=ne(function(r,e){return kl(Un(r),e)}),Rl=Il,Ol=fe(function(r){return xi(r)?!0:!r||typeof r!="object"||xa(r)?!1:r.length===0?!0:r.length>0?r.hasOwnProperty(0)&&r.hasOwnProperty(r.length-1):!1}),Bl=Ol,ha=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function Ul(r,e,t){return function(n,i,s){if(Bl(s))return r(n,i,s);if(s==null)return i;if(typeof s["fantasy-land/reduce"]=="function")return e(n,i,s,"fantasy-land/reduce");if(s[ha]!=null)return t(n,i,s[ha]());if(typeof s.next=="function")return t(n,i,s);if(typeof s.reduce=="function")return e(n,i,s,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function Ml(r,e,t){for(var n=0,i=t.length;n<i;){if(e=r["@@transducer/step"](e,t[n]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return r["@@transducer/result"](e)}var Ll=ne(function(r,e){return Bn(r.length,function(){return r.apply(e,arguments)})}),Pl=Ll;function Fl(r,e,t){for(var n=t.next();!n.done;){if(e=r["@@transducer/step"](e,n.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=t.next()}return r["@@transducer/result"](e)}function jl(r,e,t,n){return r["@@transducer/result"](t[n](Pl(r["@@transducer/step"],r),e))}var Nl=Ul(Ml,jl,Fl),Dl=Nl,Zl=function(){function r(e){this.f=e}return r.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},r.prototype["@@transducer/result"]=function(e){return e},r.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},r}();function $l(r){return new Zl(r)}var zl=bi(function(r,e,t){return Dl(typeof r=="function"?$l(r):r,e,t)}),Ta=zl;function Vl(r,e){return function(){return e.call(this,r.apply(this,arguments))}}function Sa(r,e){return function(){var t=arguments.length;if(t===0)return e();var n=arguments[t-1];return xi(n)||typeof n[r]!="function"?e.apply(this,arguments):n[r].apply(n,Array.prototype.slice.call(arguments,0,t-1))}}var Gl=bi(Sa("slice",function(r,e,t){return Array.prototype.slice.call(t,r,e)})),ql=Gl,Wl=fe(Sa("tail",ql(1,1/0))),Kl=Wl;function Aa(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return Bn(arguments[0].length,Ta(Vl,arguments[0],Kl(arguments)))}var Hl=ne(function(r,e){return ya(Ta(xl,0,Rl("length",e)),function(){var t=arguments,n=this;return r.apply(n,_r(function(i){return i.apply(n,t)},e))})}),Yl=Hl,Jl=ne(function(r,e){return e==null||e!==e?r:e}),ci=Jl,Ql=function(){function r(e,t){this.xf=t,this.f=e,this.found=!1}return r.prototype["@@transducer/init"]=br.init,r.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},r.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=Jc(this.xf["@@transducer/step"](e,t))),e},r}();function Xl(r){return function(e){return new Ql(r,e)}}var ed=ne(Ei(["find"],Xl,function(r,e){for(var t=0,n=e.length;t<n;){if(r(e[t]))return e[t];t+=1}})),td=ed,rd=fe(function(r){return Yl(function(){return Array.prototype.slice.call(arguments,0)},r)}),nd=rd;function id(r,e){for(var t=e,n=0;n<r.length;n+=1){if(t==null)return;var i=r[n];ba(i)?t=Ea(i,t):t=t[i]}return t}var sd=ne(id),ka=sd,ad=bi(function(r,e,t){return va(r,Un(e,t))}),od=ad,_n=class extends Error{name="InvalidSchedulerLocation"},ud=class extends Error{name="SchedulerTagNotFound"},cd=class extends Error{name="TransactionNotFound"},ld="Url",dd="Time-To-Live",hd="Scheduler",li=r=>Aa(ci([]),td(od(r,"name")),ci({}),Un("value")),Ca=r=>Aa(e=>{if(!e)throw new cd(r);return e},Un("tags"),ci([]));function Ia({fetch:r,GRAPHQL_URL:e}){return async({query:t,variables:n})=>r(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,variables:n})}).then(i=>i.json())}function fd({fetch:r,GRAPHQL_URL:e}){let t=Ia({fetch:r,GRAPHQL_URL:e}),n=Ra({fetch:r,GRAPHQL_URL:e}),i=`
    query GetTransactions ($transactionIds: [ID!]!) {
      transactions(ids: $transactionIds) {
        edges {
          node {
            tags {
              name
              value
            }
          }
        }
      }
    }
  `;return async s=>t({query:i,variables:{transactionIds:[s]}}).then(ka(["data","transactions","edges","0","node"])).then(Ca(`Process ${s} was not found on gateway`)).then(li(hd)).then(a=>{if(!a)throw new ud('No "Scheduler" tag found on process');return n(a)})}function Ra({fetch:r,GRAPHQL_URL:e}){let t=Ia({fetch:r,GRAPHQL_URL:e}),n=`
    query GetSchedulerLocation ($owner: String!) {
      transactions (
        owners: [$owner]
        tags: [
          { name: "Data-Protocol", values: ["ao"] },
          { name: "Type", values: ["Scheduler-Location"] }
        ]
        # Only need the most recent Scheduler-Location
        sort: HEIGHT_DESC
        first: 1
      ) {
        edges {
          node {
            tags {
              name
              value
            }
          }
        }
      }
    }
  `;return async i=>t({query:n,variables:{owner:i}}).then(ka(["data","transactions","edges","0","node"])).then(Ca(`Could not find 'Scheduler-Location' owner by wallet ${i}`)).then(nd([li(ld),li(dd)])).then(([s,a])=>{if(!s)throw new _n('No "Url" tag found on Scheduler-Location');if(!a)throw new _n('No "Time-To-Live" tag found on Scheduler-Location');return{url:s,ttl:a,address:i}})}var Kt=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Oa=new Set,di=typeof process=="object"&&process?process:{},Ba=(r,e,t,n)=>{typeof di.emitWarning=="function"?di.emitWarning(r,e,t,n):console.error(`[${t}] ${e}: ${r}`)},bn=globalThis.AbortController,fa=globalThis.AbortSignal;if(typeof bn>"u"){fa=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(t,n){this._onabort.push(n)}},bn=class{constructor(){e()}signal=new fa;abort(t){if(!this.signal.aborted){this.signal.reason=t,this.signal.aborted=!0;for(let n of this.signal._onabort)n(t);this.signal.onabort?.(t)}}};let r=di.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{r&&(r=!1,Ba("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var pd=r=>!Oa.has(r),cg=Symbol("type"),it=r=>r&&r===Math.floor(r)&&r>0&&isFinite(r),Ua=r=>it(r)?r<=Math.pow(2,8)?Uint8Array:r<=Math.pow(2,16)?Uint16Array:r<=Math.pow(2,32)?Uint32Array:r<=Number.MAX_SAFE_INTEGER?mn:null:null,mn=class extends Array{constructor(r){super(r),this.fill(0)}},gd=class mr{heap;length;static#u=!1;static create(e){let t=Ua(e);if(!t)return[];mr.#u=!0;let n=new mr(e,t);return mr.#u=!1,n}constructor(e,t){if(!mr.#u)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},md=class Ma{#u;#d;#g;#m;#I;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#y;#n;#r;#e;#c;#h;#o;#s;#v;#a;#w;#_;#f;#b;#S;#l;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#f,sizes:e.#w,keyMap:e.#n,keyList:e.#r,valList:e.#e,next:e.#c,prev:e.#h,get head(){return e.#o},get tail(){return e.#s},free:e.#v,isBackgroundFetch:t=>e.#t(t),backgroundFetch:(t,n,i,s)=>e.#B(t,n,i,s),moveToTail:t=>e.#C(t),indexes:t=>e.#x(t),rindexes:t=>e.#E(t),isStale:t=>e.#p(t)}}get max(){return this.#u}get maxSize(){return this.#d}get calculatedSize(){return this.#y}get size(){return this.#i}get fetchMethod(){return this.#I}get dispose(){return this.#g}get disposeAfter(){return this.#m}constructor(e){let{max:t=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:a,updateAgeOnHas:u,allowStale:d,dispose:h,disposeAfter:p,noDisposeOnSet:m,noUpdateTTL:_,maxSize:T=0,maxEntrySize:A=0,sizeCalculation:S,fetchMethod:I,noDeleteOnFetchRejection:B,noDeleteOnStaleGet:$,allowStaleOnFetchRejection:G,allowStaleOnFetchAbort:z,ignoreFetchAbort:Y}=e;if(t!==0&&!it(t))throw new TypeError("max option must be a nonnegative integer");let H=t?Ua(t):Array;if(!H)throw new Error("invalid max value: "+t);if(this.#u=t,this.#d=T,this.maxEntrySize=A||this.#d,this.sizeCalculation=S,this.sizeCalculation){if(!this.#d&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(I!==void 0&&typeof I!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#I=I,this.#S=!!I,this.#n=new Map,this.#r=new Array(t).fill(void 0),this.#e=new Array(t).fill(void 0),this.#c=new H(t),this.#h=new H(t),this.#o=0,this.#s=0,this.#v=gd.create(t),this.#i=0,this.#y=0,typeof h=="function"&&(this.#g=h),typeof p=="function"?(this.#m=p,this.#a=[]):(this.#m=void 0,this.#a=void 0),this.#b=!!this.#g,this.#l=!!this.#m,this.noDisposeOnSet=!!m,this.noUpdateTTL=!!_,this.noDeleteOnFetchRejection=!!B,this.allowStaleOnFetchRejection=!!G,this.allowStaleOnFetchAbort=!!z,this.ignoreFetchAbort=!!Y,this.maxEntrySize!==0){if(this.#d!==0&&!it(this.#d))throw new TypeError("maxSize must be a positive integer if specified");if(!it(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#j()}if(this.allowStale=!!d,this.noDeleteOnStaleGet=!!$,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!u,this.ttlResolution=it(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!it(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#U()}if(this.#u===0&&this.ttl===0&&this.#d===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#u&&!this.#d){let ce="LRU_CACHE_UNBOUNDED";pd(ce)&&(Oa.add(ce),Ba("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ce,Ma))}}getRemainingTTL(e){return this.#n.has(e)?1/0:0}#U(){let e=new mn(this.#u),t=new mn(this.#u);this.#f=e,this.#_=t,this.#M=(s,a,u=Kt.now())=>{if(t[s]=a!==0?u:0,e[s]=a,a!==0&&this.ttlAutopurge){let d=setTimeout(()=>{this.#p(s)&&this.delete(this.#r[s])},a+1);d.unref&&d.unref()}},this.#A=s=>{t[s]=e[s]!==0?Kt.now():0},this.#T=(s,a)=>{if(e[a]){let u=e[a],d=t[a];if(!u||!d)return;s.ttl=u,s.start=d,s.now=n||i();let h=s.now-d;s.remainingTTL=u-h}};let n=0,i=()=>{let s=Kt.now();if(this.ttlResolution>0){n=s;let a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return s};this.getRemainingTTL=s=>{let a=this.#n.get(s);if(a===void 0)return 0;let u=e[a],d=t[a];if(!u||!d)return 1/0;let h=(n||i())-d;return u-h},this.#p=s=>{let a=t[s],u=e[s];return!!u&&!!a&&(n||i())-a>u}}#A=()=>{};#T=()=>{};#M=()=>{};#p=()=>!1;#j(){let e=new mn(this.#u);this.#y=0,this.#w=e,this.#k=t=>{this.#y-=e[t],e[t]=0},this.#L=(t,n,i,s)=>{if(this.#t(n))return 0;if(!it(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(n,t),!it(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#R=(t,n,i)=>{if(e[t]=n,this.#d){let s=this.#d-e[t];for(;this.#y>s;)this.#O(!0)}this.#y+=e[t],i&&(i.entrySize=n,i.totalCalculatedSize=this.#y)}}#k=e=>{};#R=(e,t,n)=>{};#L=(e,t,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#x({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#s;!(!this.#P(t)||((e||!this.#p(t))&&(yield t),t===this.#o));)t=this.#h[t]}*#E({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#o;!(!this.#P(t)||((e||!this.#p(t))&&(yield t),t===this.#s));)t=this.#c[t]}#P(e){return e!==void 0&&this.#n.get(this.#r[e])===e}*entries(){for(let e of this.#x())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*rentries(){for(let e of this.#E())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*keys(){for(let e of this.#x()){let t=this.#r[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*rkeys(){for(let e of this.#E()){let t=this.#r[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*values(){for(let e of this.#x())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#E())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let n of this.#x()){let i=this.#e[n],s=this.#t(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#r[n],this))return this.get(this.#r[n],t)}}forEach(e,t=this){for(let n of this.#x()){let i=this.#e[n],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#r[n],this)}}rforEach(e,t=this){for(let n of this.#E()){let i=this.#e[n],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#r[n],this)}}purgeStale(){let e=!1;for(let t of this.#E({allowStale:!0}))this.#p(t)&&(this.delete(this.#r[t]),e=!0);return e}info(e){let t=this.#n.get(e);if(t===void 0)return;let n=this.#e[t],i=this.#t(n)?n.__staleWhileFetching:n;if(i===void 0)return;let s={value:i};if(this.#f&&this.#_){let a=this.#f[t],u=this.#_[t];if(a&&u){let d=a-(Kt.now()-u);s.ttl=d,s.start=Date.now()}}return this.#w&&(s.size=this.#w[t]),s}dump(){let e=[];for(let t of this.#x({allowStale:!0})){let n=this.#r[t],i=this.#e[t],s=this.#t(i)?i.__staleWhileFetching:i;if(s===void 0||n===void 0)continue;let a={value:s};if(this.#f&&this.#_){a.ttl=this.#f[t];let u=Kt.now()-this.#_[t];a.start=Math.floor(Date.now()-u)}this.#w&&(a.size=this.#w[t]),e.unshift([n,a])}return e}load(e){this.clear();for(let[t,n]of e){if(n.start){let i=Date.now()-n.start;n.start=Kt.now()-i}this.set(t,n.value,n)}}set(e,t,n={}){if(t===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:u=this.sizeCalculation,status:d}=n,{noUpdateTTL:h=this.noUpdateTTL}=n,p=this.#L(e,t,n.size||0,u);if(this.maxEntrySize&&p>this.maxEntrySize)return d&&(d.set="miss",d.maxEntrySizeExceeded=!0),this.delete(e),this;let m=this.#i===0?void 0:this.#n.get(e);if(m===void 0)m=this.#i===0?this.#s:this.#v.length!==0?this.#v.pop():this.#i===this.#u?this.#O(!1):this.#i,this.#r[m]=e,this.#e[m]=t,this.#n.set(e,m),this.#c[this.#s]=m,this.#h[m]=this.#s,this.#s=m,this.#i++,this.#R(m,p,d),d&&(d.set="add"),h=!1;else{this.#C(m);let _=this.#e[m];if(t!==_){if(this.#S&&this.#t(_)){_.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:T}=_;T!==void 0&&!a&&(this.#b&&this.#g?.(T,e,"set"),this.#l&&this.#a?.push([T,e,"set"]))}else a||(this.#b&&this.#g?.(_,e,"set"),this.#l&&this.#a?.push([_,e,"set"]));if(this.#k(m),this.#R(m,p,d),this.#e[m]=t,d){d.set="replace";let T=_&&this.#t(_)?_.__staleWhileFetching:_;T!==void 0&&(d.oldValue=T)}}else d&&(d.set="update")}if(i!==0&&!this.#f&&this.#U(),this.#f&&(h||this.#M(m,i,s),d&&this.#T(d,m)),!a&&this.#l&&this.#a){let _=this.#a,T;for(;T=_?.shift();)this.#m?.(...T)}return this}pop(){try{for(;this.#i;){let e=this.#e[this.#o];if(this.#O(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#l&&this.#a){let e=this.#a,t;for(;t=e?.shift();)this.#m?.(...t)}}}#O(e){let t=this.#o,n=this.#r[t],i=this.#e[t];return this.#S&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#b||this.#l)&&(this.#b&&this.#g?.(i,n,"evict"),this.#l&&this.#a?.push([i,n,"evict"])),this.#k(t),e&&(this.#r[t]=void 0,this.#e[t]=void 0,this.#v.push(t)),this.#i===1?(this.#o=this.#s=0,this.#v.length=0):this.#o=this.#c[t],this.#n.delete(n),this.#i--,t}has(e,t={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=t,s=this.#n.get(e);if(s!==void 0){let a=this.#e[s];if(this.#t(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#p(s))i&&(i.has="stale",this.#T(i,s));else return n&&this.#A(s),i&&(i.has="hit",this.#T(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:n=this.allowStale}=t,i=this.#n.get(e);if(i===void 0||!n&&this.#p(i))return;let s=this.#e[i];return this.#t(s)?s.__staleWhileFetching:s}#B(e,t,n,i){let s=t===void 0?void 0:this.#e[t];if(this.#t(s))return s;let a=new bn,{signal:u}=n;u?.addEventListener("abort",()=>a.abort(u.reason),{signal:a.signal});let d={signal:a.signal,options:n,context:i},h=(S,I=!1)=>{let{aborted:B}=a.signal,$=n.ignoreFetchAbort&&S!==void 0;if(n.status&&(B&&!I?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,$&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),B&&!$&&!I)return m(a.signal.reason);let G=T;return this.#e[t]===T&&(S===void 0?G.__staleWhileFetching?this.#e[t]=G.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,S,d.options))),S},p=S=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=S),m(S)),m=S=>{let{aborted:I}=a.signal,B=I&&n.allowStaleOnFetchAbort,$=B||n.allowStaleOnFetchRejection,G=$||n.noDeleteOnFetchRejection,z=T;if(this.#e[t]===T&&(!G||z.__staleWhileFetching===void 0?this.delete(e):B||(this.#e[t]=z.__staleWhileFetching)),$)return n.status&&z.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),z.__staleWhileFetching;if(z.__returned===z)throw S},_=(S,I)=>{let B=this.#I?.(e,s,d);B&&B instanceof Promise&&B.then($=>S($===void 0?void 0:$),I),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(S(void 0),n.allowStaleOnFetchAbort&&(S=$=>h($,!0)))})};n.status&&(n.status.fetchDispatched=!0);let T=new Promise(_).then(h,p),A=Object.assign(T,{__abortController:a,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,A,{...d.options,status:void 0}),t=this.#n.get(e)):this.#e[t]=A,A}#t(e){if(!this.#S)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof bn}async fetch(e,t={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:u=this.noDisposeOnSet,size:d=0,sizeCalculation:h=this.sizeCalculation,noUpdateTTL:p=this.noUpdateTTL,noDeleteOnFetchRejection:m=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:_=this.allowStaleOnFetchRejection,ignoreFetchAbort:T=this.ignoreFetchAbort,allowStaleOnFetchAbort:A=this.allowStaleOnFetchAbort,context:S,forceRefresh:I=!1,status:B,signal:$}=t;if(!this.#S)return B&&(B.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:B});let G={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:a,noDisposeOnSet:u,size:d,sizeCalculation:h,noUpdateTTL:p,noDeleteOnFetchRejection:m,allowStaleOnFetchRejection:_,allowStaleOnFetchAbort:A,ignoreFetchAbort:T,status:B,signal:$},z=this.#n.get(e);if(z===void 0){B&&(B.fetch="miss");let Y=this.#B(e,z,G,S);return Y.__returned=Y}else{let Y=this.#e[z];if(this.#t(Y)){let Ge=n&&Y.__staleWhileFetching!==void 0;return B&&(B.fetch="inflight",Ge&&(B.returnedStale=!0)),Ge?Y.__staleWhileFetching:Y.__returned=Y}let H=this.#p(z);if(!I&&!H)return B&&(B.fetch="hit"),this.#C(z),i&&this.#A(z),B&&this.#T(B,z),Y;let ce=this.#B(e,z,G,S),Ve=ce.__staleWhileFetching!==void 0&&n;return B&&(B.fetch=H?"stale":"refresh",Ve&&H&&(B.returnedStale=!0)),Ve?ce.__staleWhileFetching:ce.__returned=ce}}get(e,t={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:a}=t,u=this.#n.get(e);if(u!==void 0){let d=this.#e[u],h=this.#t(d);return a&&this.#T(a,u),this.#p(u)?(a&&(a.get="stale"),h?(a&&n&&d.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?d.__staleWhileFetching:void 0):(s||this.delete(e),a&&n&&(a.returnedStale=!0),n?d:void 0)):(a&&(a.get="hit"),h?d.__staleWhileFetching:(this.#C(u),i&&this.#A(u),d))}else a&&(a.get="miss")}#F(e,t){this.#h[t]=e,this.#c[e]=t}#C(e){e!==this.#s&&(e===this.#o?this.#o=this.#c[e]:this.#F(this.#h[e],this.#c[e]),this.#F(this.#s,e),this.#s=e)}delete(e){let t=!1;if(this.#i!==0){let n=this.#n.get(e);if(n!==void 0)if(t=!0,this.#i===1)this.clear();else{this.#k(n);let i=this.#e[n];if(this.#t(i)?i.__abortController.abort(new Error("deleted")):(this.#b||this.#l)&&(this.#b&&this.#g?.(i,e,"delete"),this.#l&&this.#a?.push([i,e,"delete"])),this.#n.delete(e),this.#r[n]=void 0,this.#e[n]=void 0,n===this.#s)this.#s=this.#h[n];else if(n===this.#o)this.#o=this.#c[n];else{let s=this.#h[n];this.#c[s]=this.#c[n];let a=this.#c[n];this.#h[a]=this.#h[n]}this.#i--,this.#v.push(n)}}if(this.#l&&this.#a?.length){let n=this.#a,i;for(;i=n?.shift();)this.#m?.(...i)}return t}clear(){for(let e of this.#E({allowStale:!0})){let t=this.#e[e];if(this.#t(t))t.__abortController.abort(new Error("deleted"));else{let n=this.#r[e];this.#b&&this.#g?.(t,n,"delete"),this.#l&&this.#a?.push([t,n,"delete"])}}if(this.#n.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#f&&this.#_&&(this.#f.fill(0),this.#_.fill(0)),this.#w&&this.#w.fill(0),this.#o=0,this.#s=0,this.#v.length=0,this.#y=0,this.#i=0,this.#l&&this.#a){let e=this.#a,t;for(;t=e?.shift();)this.#m?.(...t)}}};function yd({size:r}){return new md({max:r,maxSize:5e6,sizeCalculation:e=>JSON.stringify(e).length,allowStale:!0})}function vd({cache:r}){return async e=>{if(r.max)return r.get(e)}}function wd({cache:r}){return async(e,{url:t,address:n},i)=>{if(r.max)return r.set(e,{url:t,address:n},{ttl:i})}}function _d({cache:r}){return async e=>{if(r.max)return r.get(e)}}function bd({cache:r}){return async(e,t,n)=>{if(r.max)return r.set(e,{url:t,address:e,ttl:n},{ttl:n})}}function xd({fetch:r}){return async(e,t)=>{let n=await r(`${e}?process-id=${t}`,{method:"GET",redirect:"manual"});return[301,302,307,308].includes(n.status)?new URL(n.headers.get("Location")).origin:e}}var W;(function(r){r.assertEqual=i=>i;function e(i){}r.assertIs=e;function t(i){throw new Error}r.assertNever=t,r.arrayToEnum=i=>{let s={};for(let a of i)s[a]=a;return s},r.getValidEnumValues=i=>{let s=r.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),a={};for(let u of s)a[u]=i[u];return r.objectValues(a)},r.objectValues=i=>r.objectKeys(i).map(function(s){return i[s]}),r.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let s=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},r.find=(i,s)=>{for(let a of i)if(s(a))return a},r.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}r.joinValues=n,r.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(W||(W={}));var hi;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(hi||(hi={}));var O=W.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),at=r=>{switch(typeof r){case"undefined":return O.undefined;case"string":return O.string;case"number":return isNaN(r)?O.nan:O.number;case"boolean":return O.boolean;case"function":return O.function;case"bigint":return O.bigint;case"symbol":return O.symbol;case"object":return Array.isArray(r)?O.array:r===null?O.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?O.promise:typeof Map<"u"&&r instanceof Map?O.map:typeof Set<"u"&&r instanceof Set?O.set:typeof Date<"u"&&r instanceof Date?O.date:O.object;default:return O.unknown}},x=W.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ed=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:"),Ie=class La extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(s){return s.message},n={_errors:[]},i=s=>{for(let a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(t(a));else{let u=n,d=0;for(;d<a.path.length;){let h=a.path[d];d===a.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(t(a))):u[h]=u[h]||{_errors:[]},u=u[h],d++}}};return i(this),n}static assert(e){if(!(e instanceof La))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,W.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},n=[];for(let i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};Ie.create=r=>new Ie(r);var Jt=(r,e)=>{let t;switch(r.code){case x.invalid_type:r.received===O.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case x.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,W.jsonStringifyReplacer)}`;break;case x.unrecognized_keys:t=`Unrecognized key(s) in object: ${W.joinValues(r.keys,", ")}`;break;case x.invalid_union:t="Invalid input";break;case x.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${W.joinValues(r.options)}`;break;case x.invalid_enum_value:t=`Invalid enum value. Expected ${W.joinValues(r.options)}, received '${r.received}'`;break;case x.invalid_arguments:t="Invalid function arguments";break;case x.invalid_return_type:t="Invalid function return type";break;case x.invalid_date:t="Invalid date";break;case x.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:W.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case x.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case x.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case x.custom:t="Invalid input";break;case x.invalid_intersection_types:t="Intersection results could not be merged";break;case x.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case x.not_finite:t="Number must be finite";break;default:t=e.defaultError,W.assertNever(r)}return{message:t}},Pa=Jt;function Td(r){Pa=r}function xn(){return Pa}var En=r=>{let{data:e,path:t,errorMaps:n,issueData:i}=r,s=[...t,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let u="",d=n.filter(h=>!!h).slice().reverse();for(let h of d)u=h(a,{data:e,defaultError:u}).message;return{...i,path:s,message:u}},Sd=[];function C(r,e){let t=xn(),n=En({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===Jt?void 0:Jt].filter(i=>!!i)});r.common.issues.push(n)}var ye=class Fa{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let i of t){if(i.status==="aborted")return j;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let i of t){let s=await i.key,a=await i.value;n.push({key:s,value:a})}return Fa.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let i of t){let{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return j;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[s.value]=a.value)}return{status:e.value,value:n}}},j=Object.freeze({status:"aborted"}),Tn=r=>({status:"dirty",value:r}),pe=r=>({status:"valid",value:r}),fi=r=>r.status==="aborted",pi=r=>r.status==="dirty",xr=r=>r.status==="valid",Sn=r=>typeof Promise<"u"&&r instanceof Promise;function An(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function ja(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}var M;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(M||(M={}));var yr,vr,De=class{constructor(r,e,t,n){this._cachedPath=[],this.parent=r,this.data=e,this._path=t,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},pa=(r,e)=>{if(xr(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new Ie(r.common.issues);return this._error=t,this._error}}};function Z(r){if(!r)return{};let{errorMap:e,invalid_type_error:t,required_error:n,description:i}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,a)=>{var u,d;let{message:h}=r;return s.code==="invalid_enum_value"?{message:h??a.defaultError}:typeof a.data>"u"?{message:(u=h??n)!==null&&u!==void 0?u:a.defaultError}:s.code!=="invalid_type"?{message:a.defaultError}:{message:(d=h??t)!==null&&d!==void 0?d:a.defaultError}},description:i}}var V=class{constructor(r){this.spa=this.safeParseAsync,this._def=r,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(r){return at(r.data)}_getOrReturnCtx(r,e){return e||{common:r.parent.common,data:r.data,parsedType:at(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}_processInputParams(r){return{status:new ye,ctx:{common:r.parent.common,data:r.data,parsedType:at(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}}_parseSync(r){let e=this._parse(r);if(Sn(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(r){let e=this._parse(r);return Promise.resolve(e)}parse(r,e){let t=this.safeParse(r,e);if(t.success)return t.data;throw t.error}safeParse(r,e){var t;let n={common:{issues:[],async:(t=e?.async)!==null&&t!==void 0?t:!1,contextualErrorMap:e?.errorMap},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:at(r)},i=this._parseSync({data:r,path:n.path,parent:n});return pa(n,i)}async parseAsync(r,e){let t=await this.safeParseAsync(r,e);if(t.success)return t.data;throw t.error}async safeParseAsync(r,e){let t={common:{issues:[],contextualErrorMap:e?.errorMap,async:!0},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:at(r)},n=this._parse({data:r,path:t.path,parent:t}),i=await(Sn(n)?n:Promise.resolve(n));return pa(t,i)}refine(r,e){let t=n=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(n):e;return this._refinement((n,i)=>{let s=r(n),a=()=>i.addIssue({code:x.custom,...t(n)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(a(),!1)):s?!0:(a(),!1)})}refinement(r,e){return this._refinement((t,n)=>r(t)?!0:(n.addIssue(typeof e=="function"?e(t,n):e),!1))}_refinement(r){return new Re({schema:this,typeName:P.ZodEffects,effect:{type:"refinement",refinement:r}})}superRefine(r){return this._refinement(r)}optional(){return Ne.create(this,this._def)}nullable(){return ut.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ct.create(this,this._def)}promise(){return er.create(this,this._def)}or(r){return Ir.create([this,r],this._def)}and(r){return Rr.create(this,r,this._def)}transform(r){return new Re({...Z(this._def),schema:this,typeName:P.ZodEffects,effect:{type:"transform",transform:r}})}default(r){let e=typeof r=="function"?r:()=>r;return new Mr({...Z(this._def),innerType:this,defaultValue:e,typeName:P.ZodDefault})}brand(){return new Si({typeName:P.ZodBranded,type:this,...Z(this._def)})}catch(r){let e=typeof r=="function"?r:()=>r;return new Lr({...Z(this._def),innerType:this,catchValue:e,typeName:P.ZodCatch})}describe(r){let e=this.constructor;return new e({...this._def,description:r})}pipe(r){return Ai.create(this,r)}readonly(){return Pr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Ad=/^c[^\s-]{8,}$/i,kd=/^[0-9a-z]+$/,Cd=/^[0-9A-HJKMNP-TV-Z]{26}$/,Id=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Rd=/^[a-z0-9_-]{21}$/i,Od=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Bd=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ud="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",ui,Md=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ld=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Pd=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Na="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Fd=new RegExp(`^${Na}$`);function Da(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function jd(r){return new RegExp(`^${Da(r)}$`)}function Za(r){let e=`${Na}T${Da(r)}`,t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Nd(r,e){return!!((e==="v4"||!e)&&Md.test(r)||(e==="v6"||!e)&&Ld.test(r))}var Qt=class wr extends V{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==O.string){let i=this._getOrReturnCtx(e);return C(i,{code:x.invalid_type,expected:O.string,received:i.parsedType}),j}let t=new ye,n;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),C(n,{code:x.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),C(n,{code:x.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if(i.kind==="length"){let s=e.data.length>i.value,a=e.data.length<i.value;(s||a)&&(n=this._getOrReturnCtx(e,n),s?C(n,{code:x.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&C(n,{code:x.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if(i.kind==="email")Bd.test(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{validation:"email",code:x.invalid_string,message:i.message}),t.dirty());else if(i.kind==="emoji")ui||(ui=new RegExp(Ud,"u")),ui.test(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{validation:"emoji",code:x.invalid_string,message:i.message}),t.dirty());else if(i.kind==="uuid")Id.test(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{validation:"uuid",code:x.invalid_string,message:i.message}),t.dirty());else if(i.kind==="nanoid")Rd.test(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{validation:"nanoid",code:x.invalid_string,message:i.message}),t.dirty());else if(i.kind==="cuid")Ad.test(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{validation:"cuid",code:x.invalid_string,message:i.message}),t.dirty());else if(i.kind==="cuid2")kd.test(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{validation:"cuid2",code:x.invalid_string,message:i.message}),t.dirty());else if(i.kind==="ulid")Cd.test(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{validation:"ulid",code:x.invalid_string,message:i.message}),t.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),C(n,{validation:"url",code:x.invalid_string,message:i.message}),t.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{validation:"regex",code:x.invalid_string,message:i.message}),t.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),C(n,{code:x.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),C(n,{code:x.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),C(n,{code:x.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty()):i.kind==="datetime"?Za(i).test(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{code:x.invalid_string,validation:"datetime",message:i.message}),t.dirty()):i.kind==="date"?Fd.test(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{code:x.invalid_string,validation:"date",message:i.message}),t.dirty()):i.kind==="time"?jd(i).test(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{code:x.invalid_string,validation:"time",message:i.message}),t.dirty()):i.kind==="duration"?Od.test(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{validation:"duration",code:x.invalid_string,message:i.message}),t.dirty()):i.kind==="ip"?Nd(e.data,i.version)||(n=this._getOrReturnCtx(e,n),C(n,{validation:"ip",code:x.invalid_string,message:i.message}),t.dirty()):i.kind==="base64"?Pd.test(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{validation:"base64",code:x.invalid_string,message:i.message}),t.dirty()):W.assertNever(i);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(i=>e.test(i),{validation:t,code:x.invalid_string,...M.errToObj(n)})}_addCheck(e){return new wr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...M.errToObj(e)})}url(e){return this._addCheck({kind:"url",...M.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...M.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...M.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...M.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...M.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...M.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...M.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...M.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...M.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...M.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...M.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...M.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...M.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...M.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...M.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...M.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...M.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...M.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...M.errToObj(t)})}nonempty(e){return this.min(1,M.errToObj(e))}trim(){return new wr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Qt.create=r=>{var e;return new Qt({checks:[],typeName:P.ZodString,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...Z(r)})};function Dd(r,e){let t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=t>n?t:n,s=parseInt(r.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}var Er=class gi extends V{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==O.number){let i=this._getOrReturnCtx(e);return C(i,{code:x.invalid_type,expected:O.number,received:i.parsedType}),j}let t,n=new ye;for(let i of this._def.checks)i.kind==="int"?W.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{code:x.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),C(t,{code:x.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),C(t,{code:x.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?Dd(e.data,i.value)!==0&&(t=this._getOrReturnCtx(e,t),C(t,{code:x.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{code:x.not_finite,message:i.message}),n.dirty()):W.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,M.toString(t))}gt(e,t){return this.setLimit("min",e,!1,M.toString(t))}lte(e,t){return this.setLimit("max",e,!0,M.toString(t))}lt(e,t){return this.setLimit("max",e,!1,M.toString(t))}setLimit(e,t,n,i){return new gi({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:M.toString(i)}]})}_addCheck(e){return new gi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:M.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:M.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:M.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:M.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:M.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:M.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:M.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:M.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:M.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&W.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};Er.create=r=>new Er({checks:[],typeName:P.ZodNumber,coerce:r?.coerce||!1,...Z(r)});var Tr=class mi extends V{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==O.bigint){let i=this._getOrReturnCtx(e);return C(i,{code:x.invalid_type,expected:O.bigint,received:i.parsedType}),j}let t,n=new ye;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),C(t,{code:x.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),C(t,{code:x.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),C(t,{code:x.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):W.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,M.toString(t))}gt(e,t){return this.setLimit("min",e,!1,M.toString(t))}lte(e,t){return this.setLimit("max",e,!0,M.toString(t))}lt(e,t){return this.setLimit("max",e,!1,M.toString(t))}setLimit(e,t,n,i){return new mi({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:M.toString(i)}]})}_addCheck(e){return new mi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:M.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:M.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:M.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:M.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:M.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Tr.create=r=>{var e;return new Tr({checks:[],typeName:P.ZodBigInt,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...Z(r)})};var Sr=class extends V{_parse(r){if(this._def.coerce&&(r.data=!!r.data),this._getType(r)!==O.boolean){let e=this._getOrReturnCtx(r);return C(e,{code:x.invalid_type,expected:O.boolean,received:e.parsedType}),j}return pe(r.data)}};Sr.create=r=>new Sr({typeName:P.ZodBoolean,coerce:r?.coerce||!1,...Z(r)});var Ar=class $a extends V{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==O.date){let i=this._getOrReturnCtx(e);return C(i,{code:x.invalid_type,expected:O.date,received:i.parsedType}),j}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return C(i,{code:x.invalid_date}),j}let t=new ye,n;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),C(n,{code:x.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),t.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),C(n,{code:x.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),t.dirty()):W.assertNever(i);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new $a({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:M.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:M.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};Ar.create=r=>new Ar({checks:[],coerce:r?.coerce||!1,typeName:P.ZodDate,...Z(r)});var kn=class extends V{_parse(r){if(this._getType(r)!==O.symbol){let e=this._getOrReturnCtx(r);return C(e,{code:x.invalid_type,expected:O.symbol,received:e.parsedType}),j}return pe(r.data)}};kn.create=r=>new kn({typeName:P.ZodSymbol,...Z(r)});var kr=class extends V{_parse(r){if(this._getType(r)!==O.undefined){let e=this._getOrReturnCtx(r);return C(e,{code:x.invalid_type,expected:O.undefined,received:e.parsedType}),j}return pe(r.data)}};kr.create=r=>new kr({typeName:P.ZodUndefined,...Z(r)});var Cr=class extends V{_parse(r){if(this._getType(r)!==O.null){let e=this._getOrReturnCtx(r);return C(e,{code:x.invalid_type,expected:O.null,received:e.parsedType}),j}return pe(r.data)}};Cr.create=r=>new Cr({typeName:P.ZodNull,...Z(r)});var Xt=class extends V{constructor(){super(...arguments),this._any=!0}_parse(r){return pe(r.data)}};Xt.create=r=>new Xt({typeName:P.ZodAny,...Z(r)});var kt=class extends V{constructor(){super(...arguments),this._unknown=!0}_parse(r){return pe(r.data)}};kt.create=r=>new kt({typeName:P.ZodUnknown,...Z(r)});var He=class extends V{_parse(r){let e=this._getOrReturnCtx(r);return C(e,{code:x.invalid_type,expected:O.never,received:e.parsedType}),j}};He.create=r=>new He({typeName:P.ZodNever,...Z(r)});var Cn=class extends V{_parse(r){if(this._getType(r)!==O.undefined){let e=this._getOrReturnCtx(r);return C(e,{code:x.invalid_type,expected:O.void,received:e.parsedType}),j}return pe(r.data)}};Cn.create=r=>new Cn({typeName:P.ZodVoid,...Z(r)});var Ct=class yn extends V{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==O.array)return C(t,{code:x.invalid_type,expected:O.array,received:t.parsedType}),j;if(i.exactLength!==null){let a=t.data.length>i.exactLength.value,u=t.data.length<i.exactLength.value;(a||u)&&(C(t,{code:a?x.too_big:x.too_small,minimum:u?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(C(t,{code:x.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(C(t,{code:x.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((a,u)=>i.type._parseAsync(new De(t,a,t.path,u)))).then(a=>ye.mergeArray(n,a));let s=[...t.data].map((a,u)=>i.type._parseSync(new De(t,a,t.path,u)));return ye.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new yn({...this._def,minLength:{value:e,message:M.toString(t)}})}max(e,t){return new yn({...this._def,maxLength:{value:e,message:M.toString(t)}})}length(e,t){return new yn({...this._def,exactLength:{value:e,message:M.toString(t)}})}nonempty(e){return this.min(1,e)}};Ct.create=(r,e)=>new Ct({type:r,minLength:null,maxLength:null,exactLength:null,typeName:P.ZodArray,...Z(e)});function Ht(r){if(r instanceof Te){let e={};for(let t in r.shape){let n=r.shape[t];e[t]=Ne.create(Ht(n))}return new Te({...r._def,shape:()=>e})}else return r instanceof Ct?new Ct({...r._def,type:Ht(r.element)}):r instanceof Ne?Ne.create(Ht(r.unwrap())):r instanceof ut?ut.create(Ht(r.unwrap())):r instanceof ot?ot.create(r.items.map(e=>Ht(e))):r}var Te=class Ce extends V{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=W.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==O.object){let d=this._getOrReturnCtx(e);return C(d,{code:x.invalid_type,expected:O.object,received:d.parsedType}),j}let{status:t,ctx:n}=this._processInputParams(e),{shape:i,keys:s}=this._getCached(),a=[];if(!(this._def.catchall instanceof He&&this._def.unknownKeys==="strip"))for(let d in n.data)s.includes(d)||a.push(d);let u=[];for(let d of s){let h=i[d],p=n.data[d];u.push({key:{status:"valid",value:d},value:h._parse(new De(n,p,n.path,d)),alwaysSet:d in n.data})}if(this._def.catchall instanceof He){let d=this._def.unknownKeys;if(d==="passthrough")for(let h of a)u.push({key:{status:"valid",value:h},value:{status:"valid",value:n.data[h]}});else if(d==="strict")a.length>0&&(C(n,{code:x.unrecognized_keys,keys:a}),t.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let h of a){let p=n.data[h];u.push({key:{status:"valid",value:h},value:d._parse(new De(n,p,n.path,h)),alwaysSet:h in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let d=[];for(let h of u){let p=await h.key,m=await h.value;d.push({key:p,value:m,alwaysSet:h.alwaysSet})}return d}).then(d=>ye.mergeObjectSync(t,d)):ye.mergeObjectSync(t,u)}get shape(){return this._def.shape()}strict(e){return M.errToObj,new Ce({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var i,s,a,u;let d=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,t,n).message)!==null&&a!==void 0?a:n.defaultError;return t.code==="unrecognized_keys"?{message:(u=M.errToObj(e).message)!==null&&u!==void 0?u:d}:{message:d}}}:{}})}strip(){return new Ce({...this._def,unknownKeys:"strip"})}passthrough(){return new Ce({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ce({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ce({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:P.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Ce({...this._def,catchall:e})}pick(e){let t={};return W.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new Ce({...this._def,shape:()=>t})}omit(e){let t={};return W.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new Ce({...this._def,shape:()=>t})}deepPartial(){return Ht(this)}partial(e){let t={};return W.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()}),new Ce({...this._def,shape:()=>t})}required(e){let t={};return W.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Ne;)i=i._def.innerType;t[n]=i}}),new Ce({...this._def,shape:()=>t})}keyof(){return Ka(W.objectKeys(this.shape))}};Te.create=(r,e)=>new Te({shape:()=>r,unknownKeys:"strip",catchall:He.create(),typeName:P.ZodObject,...Z(e)});Te.strictCreate=(r,e)=>new Te({shape:()=>r,unknownKeys:"strict",catchall:He.create(),typeName:P.ZodObject,...Z(e)});Te.lazycreate=(r,e)=>new Te({shape:r,unknownKeys:"strip",catchall:He.create(),typeName:P.ZodObject,...Z(e)});var Ir=class extends V{_parse(r){let{ctx:e}=this._processInputParams(r),t=this._def.options;function n(i){for(let a of i)if(a.result.status==="valid")return a.result;for(let a of i)if(a.result.status==="dirty")return e.common.issues.push(...a.ctx.common.issues),a.result;let s=i.map(a=>new Ie(a.ctx.common.issues));return C(e,{code:x.invalid_union,unionErrors:s}),j}if(e.common.async)return Promise.all(t.map(async i=>{let s={...e,common:{...e.common,issues:[]},parent:null};return{result:await i._parseAsync({data:e.data,path:e.path,parent:s}),ctx:s}})).then(n);{let i,s=[];for(let u of t){let d={...e,common:{...e.common,issues:[]},parent:null},h=u._parseSync({data:e.data,path:e.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:d}),d.common.issues.length&&s.push(d.common.issues)}if(i)return e.common.issues.push(...i.ctx.common.issues),i.result;let a=s.map(u=>new Ie(u));return C(e,{code:x.invalid_union,unionErrors:a}),j}}get options(){return this._def.options}};Ir.create=(r,e)=>new Ir({options:r,typeName:P.ZodUnion,...Z(e)});var st=r=>r instanceof Or?st(r.schema):r instanceof Re?st(r.innerType()):r instanceof Br?[r.value]:r instanceof Fr?r.options:r instanceof Ur?W.objectValues(r.enum):r instanceof Mr?st(r._def.innerType):r instanceof kr?[void 0]:r instanceof Cr?[null]:r instanceof Ne?[void 0,...st(r.unwrap())]:r instanceof ut?[null,...st(r.unwrap())]:r instanceof Si||r instanceof Pr?st(r.unwrap()):r instanceof Lr?st(r._def.innerType):[],za=class Va extends V{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==O.object)return C(t,{code:x.invalid_type,expected:O.object,received:t.parsedType}),j;let n=this.discriminator,i=t.data[n],s=this.optionsMap.get(i);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(C(t,{code:x.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),j)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let i=new Map;for(let s of t){let a=st(s.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let u of a){if(i.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);i.set(u,s)}}return new Va({typeName:P.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...Z(n)})}};function yi(r,e){let t=at(r),n=at(e);if(r===e)return{valid:!0,data:r};if(t===O.object&&n===O.object){let i=W.objectKeys(e),s=W.objectKeys(r).filter(u=>i.indexOf(u)!==-1),a={...r,...e};for(let u of s){let d=yi(r[u],e[u]);if(!d.valid)return{valid:!1};a[u]=d.data}return{valid:!0,data:a}}else if(t===O.array&&n===O.array){if(r.length!==e.length)return{valid:!1};let i=[];for(let s=0;s<r.length;s++){let a=r[s],u=e[s],d=yi(a,u);if(!d.valid)return{valid:!1};i.push(d.data)}return{valid:!0,data:i}}else return t===O.date&&n===O.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}var Rr=class extends V{_parse(r){let{status:e,ctx:t}=this._processInputParams(r),n=(i,s)=>{if(fi(i)||fi(s))return j;let a=yi(i.value,s.value);return a.valid?((pi(i)||pi(s))&&e.dirty(),{status:e.value,value:a.data}):(C(t,{code:x.invalid_intersection_types}),j)};return t.common.async?Promise.all([this._def.left._parseAsync({data:t.data,path:t.path,parent:t}),this._def.right._parseAsync({data:t.data,path:t.path,parent:t})]).then(([i,s])=>n(i,s)):n(this._def.left._parseSync({data:t.data,path:t.path,parent:t}),this._def.right._parseSync({data:t.data,path:t.path,parent:t}))}};Rr.create=(r,e,t)=>new Rr({left:r,right:e,typeName:P.ZodIntersection,...Z(t)});var ot=class Ga extends V{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==O.array)return C(n,{code:x.invalid_type,expected:O.array,received:n.parsedType}),j;if(n.data.length<this._def.items.length)return C(n,{code:x.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),j;!this._def.rest&&n.data.length>this._def.items.length&&(C(n,{code:x.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let i=[...n.data].map((s,a)=>{let u=this._def.items[a]||this._def.rest;return u?u._parse(new De(n,s,n.path,a)):null}).filter(s=>!!s);return n.common.async?Promise.all(i).then(s=>ye.mergeArray(t,s)):ye.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Ga({...this._def,rest:e})}};ot.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ot({items:r,typeName:P.ZodTuple,rest:null,...Z(e)})};var qa=class vi extends V{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==O.object)return C(n,{code:x.invalid_type,expected:O.object,received:n.parsedType}),j;let i=[],s=this._def.keyType,a=this._def.valueType;for(let u in n.data)i.push({key:s._parse(new De(n,u,n.path,u)),value:a._parse(new De(n,n.data[u],n.path,u)),alwaysSet:u in n.data});return n.common.async?ye.mergeObjectAsync(t,i):ye.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof V?new vi({keyType:e,valueType:t,typeName:P.ZodRecord,...Z(n)}):new vi({keyType:Qt.create(),valueType:e,typeName:P.ZodRecord,...Z(t)})}},In=class extends V{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(r){let{status:e,ctx:t}=this._processInputParams(r);if(t.parsedType!==O.map)return C(t,{code:x.invalid_type,expected:O.map,received:t.parsedType}),j;let n=this._def.keyType,i=this._def.valueType,s=[...t.data.entries()].map(([a,u],d)=>({key:n._parse(new De(t,a,t.path,[d,"key"])),value:i._parse(new De(t,u,t.path,[d,"value"]))}));if(t.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let u of s){let d=await u.key,h=await u.value;if(d.status==="aborted"||h.status==="aborted")return j;(d.status==="dirty"||h.status==="dirty")&&e.dirty(),a.set(d.value,h.value)}return{status:e.value,value:a}})}else{let a=new Map;for(let u of s){let d=u.key,h=u.value;if(d.status==="aborted"||h.status==="aborted")return j;(d.status==="dirty"||h.status==="dirty")&&e.dirty(),a.set(d.value,h.value)}return{status:e.value,value:a}}}};In.create=(r,e,t)=>new In({valueType:e,keyType:r,typeName:P.ZodMap,...Z(t)});var Rn=class wi extends V{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==O.set)return C(n,{code:x.invalid_type,expected:O.set,received:n.parsedType}),j;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(C(n,{code:x.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(C(n,{code:x.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());let s=this._def.valueType;function a(d){let h=new Set;for(let p of d){if(p.status==="aborted")return j;p.status==="dirty"&&t.dirty(),h.add(p.value)}return{status:t.value,value:h}}let u=[...n.data.values()].map((d,h)=>s._parse(new De(n,d,n.path,h)));return n.common.async?Promise.all(u).then(d=>a(d)):a(u)}min(e,t){return new wi({...this._def,minSize:{value:e,message:M.toString(t)}})}max(e,t){return new wi({...this._def,maxSize:{value:e,message:M.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};Rn.create=(r,e)=>new Rn({valueType:r,minSize:null,maxSize:null,typeName:P.ZodSet,...Z(e)});var Wa=class vn extends V{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==O.function)return C(t,{code:x.invalid_type,expected:O.function,received:t.parsedType}),j;function n(u,d){return En({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,xn(),Jt].filter(h=>!!h),issueData:{code:x.invalid_arguments,argumentsError:d}})}function i(u,d){return En({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,xn(),Jt].filter(h=>!!h),issueData:{code:x.invalid_return_type,returnTypeError:d}})}let s={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof er){let u=this;return pe(async function(...d){let h=new Ie([]),p=await u._def.args.parseAsync(d,s).catch(_=>{throw h.addIssue(n(d,_)),h}),m=await Reflect.apply(a,this,p);return await u._def.returns._def.type.parseAsync(m,s).catch(_=>{throw h.addIssue(i(m,_)),h})})}else{let u=this;return pe(function(...d){let h=u._def.args.safeParse(d,s);if(!h.success)throw new Ie([n(d,h.error)]);let p=Reflect.apply(a,this,h.data),m=u._def.returns.safeParse(p,s);if(!m.success)throw new Ie([i(p,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new vn({...this._def,args:ot.create(e).rest(kt.create())})}returns(e){return new vn({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new vn({args:e||ot.create([]).rest(kt.create()),returns:t||kt.create(),typeName:P.ZodFunction,...Z(n)})}},Or=class extends V{get schema(){return this._def.getter()}_parse(r){let{ctx:e}=this._processInputParams(r);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}};Or.create=(r,e)=>new Or({getter:r,typeName:P.ZodLazy,...Z(e)});var Br=class extends V{_parse(r){if(r.data!==this._def.value){let e=this._getOrReturnCtx(r);return C(e,{received:e.data,code:x.invalid_literal,expected:this._def.value}),j}return{status:"valid",value:r.data}}get value(){return this._def.value}};Br.create=(r,e)=>new Br({value:r,typeName:P.ZodLiteral,...Z(e)});function Ka(r,e){return new Fr({values:r,typeName:P.ZodEnum,...Z(e)})}var Fr=class _i extends V{constructor(){super(...arguments),yr.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),n=this._def.values;return C(t,{expected:W.joinValues(n),received:t.parsedType,code:x.invalid_type}),j}if(An(this,yr,"f")||ja(this,yr,new Set(this._def.values),"f"),!An(this,yr,"f").has(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return C(t,{received:t.data,code:x.invalid_enum_value,options:n}),j}return pe(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return _i.create(e,{...this._def,...t})}exclude(e,t=this._def){return _i.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}};yr=new WeakMap;Fr.create=Ka;var Ur=class extends V{constructor(){super(...arguments),vr.set(this,void 0)}_parse(r){let e=W.getValidEnumValues(this._def.values),t=this._getOrReturnCtx(r);if(t.parsedType!==O.string&&t.parsedType!==O.number){let n=W.objectValues(e);return C(t,{expected:W.joinValues(n),received:t.parsedType,code:x.invalid_type}),j}if(An(this,vr,"f")||ja(this,vr,new Set(W.getValidEnumValues(this._def.values)),"f"),!An(this,vr,"f").has(r.data)){let n=W.objectValues(e);return C(t,{received:t.data,code:x.invalid_enum_value,options:n}),j}return pe(r.data)}get enum(){return this._def.values}};vr=new WeakMap;Ur.create=(r,e)=>new Ur({values:r,typeName:P.ZodNativeEnum,...Z(e)});var er=class extends V{unwrap(){return this._def.type}_parse(r){let{ctx:e}=this._processInputParams(r);if(e.parsedType!==O.promise&&e.common.async===!1)return C(e,{code:x.invalid_type,expected:O.promise,received:e.parsedType}),j;let t=e.parsedType===O.promise?e.data:Promise.resolve(e.data);return pe(t.then(n=>this._def.type.parseAsync(n,{path:e.path,errorMap:e.common.contextualErrorMap})))}};er.create=(r,e)=>new er({type:r,typeName:P.ZodPromise,...Z(e)});var Re=class extends V{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===P.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(r){let{status:e,ctx:t}=this._processInputParams(r),n=this._def.effect||null,i={addIssue:s=>{C(t,s),s.fatal?e.abort():e.dirty()},get path(){return t.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let s=n.transform(t.data,i);if(t.common.async)return Promise.resolve(s).then(async a=>{if(e.value==="aborted")return j;let u=await this._def.schema._parseAsync({data:a,path:t.path,parent:t});return u.status==="aborted"?j:u.status==="dirty"||e.value==="dirty"?Tn(u.value):u});{if(e.value==="aborted")return j;let a=this._def.schema._parseSync({data:s,path:t.path,parent:t});return a.status==="aborted"?j:a.status==="dirty"||e.value==="dirty"?Tn(a.value):a}}if(n.type==="refinement"){let s=a=>{let u=n.refinement(a,i);if(t.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(t.common.async===!1){let a=this._def.schema._parseSync({data:t.data,path:t.path,parent:t});return a.status==="aborted"?j:(a.status==="dirty"&&e.dirty(),s(a.value),{status:e.value,value:a.value})}else return this._def.schema._parseAsync({data:t.data,path:t.path,parent:t}).then(a=>a.status==="aborted"?j:(a.status==="dirty"&&e.dirty(),s(a.value).then(()=>({status:e.value,value:a.value}))))}if(n.type==="transform")if(t.common.async===!1){let s=this._def.schema._parseSync({data:t.data,path:t.path,parent:t});if(!xr(s))return s;let a=n.transform(s.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:a}}else return this._def.schema._parseAsync({data:t.data,path:t.path,parent:t}).then(s=>xr(s)?Promise.resolve(n.transform(s.value,i)).then(a=>({status:e.value,value:a})):s);W.assertNever(n)}};Re.create=(r,e,t)=>new Re({schema:r,typeName:P.ZodEffects,effect:e,...Z(t)});Re.createWithPreprocess=(r,e,t)=>new Re({schema:e,effect:{type:"preprocess",transform:r},typeName:P.ZodEffects,...Z(t)});var Ne=class extends V{_parse(r){return this._getType(r)===O.undefined?pe(void 0):this._def.innerType._parse(r)}unwrap(){return this._def.innerType}};Ne.create=(r,e)=>new Ne({innerType:r,typeName:P.ZodOptional,...Z(e)});var ut=class extends V{_parse(r){return this._getType(r)===O.null?pe(null):this._def.innerType._parse(r)}unwrap(){return this._def.innerType}};ut.create=(r,e)=>new ut({innerType:r,typeName:P.ZodNullable,...Z(e)});var Mr=class extends V{_parse(r){let{ctx:e}=this._processInputParams(r),t=e.data;return e.parsedType===O.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse({data:t,path:e.path,parent:e})}removeDefault(){return this._def.innerType}};Mr.create=(r,e)=>new Mr({innerType:r,typeName:P.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Z(e)});var Lr=class extends V{_parse(r){let{ctx:e}=this._processInputParams(r),t={...e,common:{...e.common,issues:[]}},n=this._def.innerType._parse({data:t.data,path:t.path,parent:{...t}});return Sn(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ie(t.common.issues)},input:t.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Ie(t.common.issues)},input:t.data})}}removeCatch(){return this._def.innerType}};Lr.create=(r,e)=>new Lr({innerType:r,typeName:P.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Z(e)});var On=class extends V{_parse(r){if(this._getType(r)!==O.nan){let e=this._getOrReturnCtx(r);return C(e,{code:x.invalid_type,expected:O.nan,received:e.parsedType}),j}return{status:"valid",value:r.data}}};On.create=r=>new On({typeName:P.ZodNaN,...Z(r)});var Zd=Symbol("zod_brand"),Si=class extends V{_parse(r){let{ctx:e}=this._processInputParams(r),t=e.data;return this._def.type._parse({data:t,path:e.path,parent:e})}unwrap(){return this._def.type}},Ai=class Ha extends V{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?j:i.status==="dirty"?(t.dirty(),Tn(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?j:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,t){return new Ha({in:e,out:t,typeName:P.ZodPipeline})}},Pr=class extends V{_parse(r){let e=this._def.innerType._parse(r);return xr(e)&&(e.value=Object.freeze(e.value)),e}unwrap(){return this._def.innerType}};Pr.create=(r,e)=>new Pr({innerType:r,typeName:P.ZodReadonly,...Z(e)});function Ya(r,e={},t){return r?Xt.create().superRefine((n,i)=>{var s,a;if(!r(n)){let u=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,d=(a=(s=u.fatal)!==null&&s!==void 0?s:t)!==null&&a!==void 0?a:!0,h=typeof u=="string"?{message:u}:u;i.addIssue({code:"custom",...h,fatal:d})}}):Xt.create()}var $d={object:Te.lazycreate},P;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(P||(P={}));var zd=(r,e={message:`Input not instance of ${r.name}`})=>Ya(t=>t instanceof r,e),Ja=Qt.create,Qa=Er.create,Vd=On.create,Gd=Tr.create,Xa=Sr.create,qd=Ar.create,Wd=kn.create,Kd=kr.create,Hd=Cr.create,Yd=Xt.create,Jd=kt.create,Qd=He.create,Xd=Cn.create,eh=Ct.create,th=Te.create,rh=Te.strictCreate,nh=Ir.create,ih=za.create,sh=Rr.create,ah=ot.create,oh=qa.create,uh=In.create,ch=Rn.create,lh=Wa.create,dh=Or.create,hh=Br.create,fh=Fr.create,ph=Ur.create,gh=er.create,ga=Re.create,mh=Ne.create,yh=ut.create,vh=Re.createWithPreprocess,wh=Ai.create,_h=()=>Ja().optional(),bh=()=>Qa().optional(),xh=()=>Xa().optional(),Eh={string:r=>Qt.create({...r,coerce:!0}),number:r=>Er.create({...r,coerce:!0}),boolean:r=>Sr.create({...r,coerce:!0}),bigint:r=>Tr.create({...r,coerce:!0}),date:r=>Ar.create({...r,coerce:!0})},Th=j,K=Object.freeze({__proto__:null,defaultErrorMap:Jt,setErrorMap:Td,getErrorMap:xn,makeIssue:En,EMPTY_PATH:Sd,addIssueToContext:C,ParseStatus:ye,INVALID:j,DIRTY:Tn,OK:pe,isAborted:fi,isDirty:pi,isValid:xr,isAsync:Sn,get util(){return W},get objectUtil(){return hi},ZodParsedType:O,getParsedType:at,ZodType:V,datetimeRegex:Za,ZodString:Qt,ZodNumber:Er,ZodBigInt:Tr,ZodBoolean:Sr,ZodDate:Ar,ZodSymbol:kn,ZodUndefined:kr,ZodNull:Cr,ZodAny:Xt,ZodUnknown:kt,ZodNever:He,ZodVoid:Cn,ZodArray:Ct,ZodObject:Te,ZodUnion:Ir,ZodDiscriminatedUnion:za,ZodIntersection:Rr,ZodTuple:ot,ZodRecord:qa,ZodMap:In,ZodSet:Rn,ZodFunction:Wa,ZodLazy:Or,ZodLiteral:Br,ZodEnum:Fr,ZodNativeEnum:Ur,ZodPromise:er,ZodEffects:Re,ZodTransformer:Re,ZodOptional:Ne,ZodNullable:ut,ZodDefault:Mr,ZodCatch:Lr,ZodNaN:On,BRAND:Zd,ZodBranded:Si,ZodPipeline:Ai,ZodReadonly:Pr,custom:Ya,Schema:V,ZodSchema:V,late:$d,get ZodFirstPartyTypeKind(){return P},coerce:Eh,any:Yd,array:eh,bigint:Gd,boolean:Xa,date:qd,discriminatedUnion:ih,effect:ga,enum:fh,function:lh,instanceof:zd,intersection:sh,lazy:dh,literal:hh,map:uh,nan:Vd,nativeEnum:ph,never:Qd,null:Hd,nullable:yh,number:Qa,object:th,oboolean:xh,onumber:bh,optional:mh,ostring:_h,pipeline:wh,preprocess:vh,promise:gh,record:oh,set:ch,strictObject:rh,string:Ja,symbol:Wd,transformer:ga,tuple:ah,undefined:Kd,union:nh,unknown:Jd,void:Xd,NEVER:Th,ZodIssueCode:x,quotelessJson:Ed,ZodError:Ie}),eo=K.object({url:K.string(),address:K.string()}),to=K.object({url:K.string(),address:K.string(),ttl:K.coerce.number()}),Sh=K.function().args(K.string(),K.string()).returns(K.promise(K.string())),Ah=K.function().args(K.string()).returns(K.promise(eo.nullish())),kh=K.function().args(K.string(),eo,K.number()).returns(K.promise(K.any())),ki=K.function().args(K.string()).returns(K.promise(to.nullish())),Ci=K.function().args(K.string(),K.string(),K.number()).returns(K.promise(K.any())),Mn=K.function().args(K.string()).returns(K.promise(to)),Ch=Mn;function Ih({loadProcessScheduler:r,loadScheduler:e,cache:t,followRedirects:n,checkForRedirect:i}){r=Ch.implement(r),e=Mn.implement(e),i=Sh.implement(i);let s=Ah.implement(t.getByProcess),a=ki.implement(t.getByOwner),u=kh.implement(t.setByProcess),d=Ci.implement(t.setByOwner);return(h,p)=>s(h).then(async m=>m||Promise.resolve().then(async()=>p?await a(p)||e(p).then(T=>(d(T.address,T.url,T.ttl),T)):r(h)).then(async _=>{let T=_.url;n&&(T=await i(_.url,h));let A={url:T,address:_.address};return await u(h,A,_.ttl),A}))}function Rh({loadScheduler:r,cache:e}){r=Mn.implement(r);let t=ki.implement(e.getByOwner),n=Ci.implement(e.setByOwner);return i=>t(i).then(s=>s?{url:s.url}:r(i).then(a=>n(i,a.url,a.ttl).then(()=>({url:a.url}))).catch(a=>{if(!(a instanceof _n))throw a}))}function Oh({loadScheduler:r,cache:e}){r=Mn.implement(r);let t=ki.implement(e.getByOwner),n=Ci.implement(e.setByOwner);return i=>t(i).then(s=>s?!0:r(i).then(a=>n(i,a.url,a.ttl)).then(()=>!0).catch(a=>{if(a instanceof _n)return!1;throw a}))}var Bh="https://arweave.net/graphql";function Ii({cacheSize:r=100,GRAPHQL_URL:e=Bh,followRedirects:t=!1}={}){let n=yd({size:r}),i=Ra({fetch,GRAPHQL_URL:e}),s={getByProcess:vd({cache:n}),getByOwner:_d({cache:n}),setByProcess:wd({cache:n}),setByOwner:bd({cache:n})},a=Ih({loadProcessScheduler:fd({fetch,GRAPHQL_URL:e}),loadScheduler:i,cache:s,followRedirects:t,checkForRedirect:xd({fetch})}),u=Oh({loadScheduler:i,cache:s}),d=Rh({loadScheduler:i,cache:s});return{locate:a,validate:u,raw:d}}var Uh=globalThis.GRAPHQL_URL||void 0,Mh=globalThis.SCHEDULER_UTILS_CACHE_SIZE||void 0,Lh=globalThis.SCHEDULER_UTILS_FOLLOW_REDIRECTS==="true"||void 0,{locate:lg,validate:dg,raw:hg}=Ii({GRAPHQL_URL:Uh,cacheSize:Mh,followRedirects:Lh});function ro(r){function e(s){if(typeof s!="string")throw new Error("Encountered Error serializing cron: invalid interval");let[a,u]=s.split("-").map(_=>_.trim());if(!a||!u)throw new Error("Encountered Error serializing cron: invalid interval");if(!parseInt(a)||parseInt(a)<0)throw new Error("Encountered Error serializing cron: invalid interval value");let d=/^(millisecond|second|minute|hour|day|month|year|block)$/,h=/^(milliseconds|seconds|minutes|hours|days|months|years|blocks)$/,p=u.match(d),m=u.match(h);if(parseInt(a)>1&&!m||parseInt(a)===1&&!p)throw new Error("Encountered Error serializing cron: invalid interval type");return`${a}-${u}`}function t(s=[]){return s.map(a=>{if(!a.name||!a.value)throw new Error("Encountered Error serializing cron: invalid tag structure");if(typeof a.name!="string"||typeof a.value!="string")throw new Error("Encountered Error serializing cron: invalid interval tag types");return{name:`Cron-Tag-${a.name}`,value:a.value}})}let n=e(r.interval),i=t(r.tags);return[{name:"Cron-Interval",value:n},...i]}var Ph="https://arweave.net",Fh="https://mu.ao-testnet.xyz",jh="https://cu.ao-testnet.xyz";function no({GRAPHQL_URL:r="",GATEWAY_URL:e=Ph,MU_URL:t=Fh,CU_URL:n=jh}){console.log(JSON.stringify({CU_URL:n,MU_URL:t,GATEWAY_URL:e,GRAPHQL_URL:r}));let i=ii();r||(r=As({url:e,path:"/graphql"}));let{validate:s}=Ii({cacheSize:100,GRAPHQL_URL:r}),a=fs({MAX_SIZE:25}),u=i.child("result"),d=new Xr({fetch,CU_URL:n,logger:u}),h=Zs({loadResult:d.execute.bind(d),logger:u}),p=i.child("message"),m=new Lt({fetch,cache:a,logger:p}),_=new Wr({fetch,MU_URL:t,logger:p}),T=Vs({loadProcessMeta:m.execute.bind(m),deployMessage:_.execute.bind(_),logger:p}),A=i.child("spawn"),S=new hn({fetch,GRAPHQL_URL:r,logger:A}),I=new Kr({fetch,MU_URL:t,logger:A}),B=Ws({loadTransactionMeta:S.execute.bind(S),validateScheduler:s,deployProcess:I.execute.bind(I),logger:A}),$=i.child("monitor"),G=new Lt({fetch,cache:a,logger:$}),z=new Hr({fetch,MU_URL:t,logger:$}),Y=Hs({loadProcessMeta:G.execute.bind(G),deployMonitor:z.execute.bind(z),logger:$}),H=i.child("unmonitor"),ce=new Lt({fetch,cache:a,logger:H}),Ve=Js({loadProcessMeta:ce.execute.bind(ce),deployUnmonitor:new Yr({fetch,MU_URL:t,logger:H}).execute,logger:$}),Ge=i.child("results"),Dr=new en({fetch,CU_URL:n,logger:Ge}),Dn=na({queryResults:Dr.execute.bind(Dr),logger:Ge}),Zr=i.child("dryrun"),$r=new Qr({fetch,CU_URL:n,logger:Zr}),zr=Xs({dryrunFetch:$r.execute.bind($r),logger:Zr}),Vr=i.child("assign"),Gr=new Jr({fetch,MU_URL:t,logger:Vr}),Zn=ta({deployAssign:Gr.execute.bind(Gr),logger:p});return{result:h,results:Dn,message:T,spawn:B,monitor:Y,unmonitor:Ve,dryrun:zr,assign:Zn}}var Nn={};Jo(Nn,{createDataItemSigner:()=>zf});var Wi=qn(So(),1);var vf=Object.create,Vi=Object.defineProperty,wf=Object.getOwnPropertyDescriptor,_f=Object.getOwnPropertyNames,bf=Object.getPrototypeOf,xf=Object.prototype.hasOwnProperty,Qe=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Ef=(r,e)=>{for(var t in e)Vi(r,t,{get:e[t],enumerable:!0})},Tf=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _f(e))!xf.call(r,i)&&i!==t&&Vi(r,i,{get:()=>e[i],enumerable:!(n=wf(e,i))||n.enumerable});return r},Ot=(r,e,t)=>(t=r!=null?vf(bf(r)):{},Tf(e||!r||!r.__esModule?Vi(t,"default",{value:r,enumerable:!0}):t,r)),Sf=Qe(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});function e(t){var n=4,i=t.length,s=i%n;if(!s)return t;var a=i,u=n-s,d=i+u,h=Buffer.alloc(d);for(h.write(t);u--;)h.write("=",a++);return h.toString()}r.default=e}),Af=Qe(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=Sf();function t(d,h){return h===void 0&&(h="utf8"),Buffer.isBuffer(d)?s(d.toString("base64")):s(Buffer.from(d,h).toString("base64"))}function n(d,h){return h===void 0&&(h="utf8"),Buffer.from(i(d),"base64").toString(h)}function i(d){return d=d.toString(),e.default(d).replace(/\-/g,"+").replace(/_/g,"/")}function s(d){return d.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function a(d){return Buffer.from(i(d),"base64")}var u=t;u.encode=t,u.decode=n,u.toBase64=i,u.fromBase64=s,u.toBuffer=a,r.default=u}),Gi=Qe((r,e)=>{e.exports=Af().default,e.exports.default=e.exports}),ko=Qe(r=>{"use strict";r.byteLength=d,r.toByteArray=p,r.fromByteArray=T;var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,a=i.length;s<a;++s)e[s]=i[s],t[i.charCodeAt(s)]=s;var s,a;t[45]=62,t[95]=63;function u(A){var S=A.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=A.indexOf("=");I===-1&&(I=S);var B=I===S?0:4-I%4;return[I,B]}function d(A){var S=u(A),I=S[0],B=S[1];return(I+B)*3/4-B}function h(A,S,I){return(S+I)*3/4-I}function p(A){var S,I=u(A),B=I[0],$=I[1],G=new n(h(A,B,$)),z=0,Y=$>0?B-4:B,H;for(H=0;H<Y;H+=4)S=t[A.charCodeAt(H)]<<18|t[A.charCodeAt(H+1)]<<12|t[A.charCodeAt(H+2)]<<6|t[A.charCodeAt(H+3)],G[z++]=S>>16&255,G[z++]=S>>8&255,G[z++]=S&255;return $===2&&(S=t[A.charCodeAt(H)]<<2|t[A.charCodeAt(H+1)]>>4,G[z++]=S&255),$===1&&(S=t[A.charCodeAt(H)]<<10|t[A.charCodeAt(H+1)]<<4|t[A.charCodeAt(H+2)]>>2,G[z++]=S>>8&255,G[z++]=S&255),G}function m(A){return e[A>>18&63]+e[A>>12&63]+e[A>>6&63]+e[A&63]}function _(A,S,I){for(var B,$=[],G=S;G<I;G+=3)B=(A[G]<<16&16711680)+(A[G+1]<<8&65280)+(A[G+2]&255),$.push(m(B));return $.join("")}function T(A){for(var S,I=A.length,B=I%3,$=[],G=16383,z=0,Y=I-B;z<Y;z+=G)$.push(_(A,z,z+G>Y?Y:z+G));return B===1?(S=A[I-1],$.push(e[S>>2]+e[S<<4&63]+"==")):B===2&&(S=(A[I-2]<<8)+A[I-1],$.push(e[S>>10]+e[S>>4&63]+e[S<<2&63]+"=")),$.join("")}}),Co=Qe(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.b64UrlDecode=r.b64UrlEncode=r.bufferTob64Url=r.bufferTob64=r.b64UrlToBuffer=r.stringToB64Url=r.stringToBuffer=r.bufferToString=r.b64UrlToString=r.concatBuffers=void 0;var e=ko();function t(_){let T=0;for(let I=0;I<_.length;I++)T+=_[I].byteLength;let A=new Uint8Array(T),S=0;A.set(new Uint8Array(_[0]),S),S+=_[0].byteLength;for(let I=1;I<_.length;I++)A.set(new Uint8Array(_[I]),S),S+=_[I].byteLength;return A}r.concatBuffers=t;function n(_){let T=u(_);return i(T)}r.b64UrlToString=n;function i(_){return new TextDecoder("utf-8",{fatal:!0}).decode(_)}r.bufferToString=i;function s(_){return new TextEncoder().encode(_)}r.stringToBuffer=s;function a(_){return h(s(_))}r.stringToB64Url=a;function u(_){return new Uint8Array(e.toByteArray(m(_)))}r.b64UrlToBuffer=u;function d(_){return e.fromByteArray(new Uint8Array(_))}r.bufferTob64=d;function h(_){return p(d(_))}r.bufferTob64Url=h;function p(_){return _.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}r.b64UrlEncode=p;function m(_){_=_.replace(/\-/g,"+").replace(/\_/g,"/");let T;return _.length%4==0?T=0:T=4-_.length%4,_.concat("=".repeat(T))}r.b64UrlDecode=m}),kf=Qe(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=Co(),t=class{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let n=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),i=await this.driver.exportKey("jwk",n.privateKey);return{kty:i.kty,e:i.e,n:i.n,d:i.d,p:i.p,q:i.q,dp:i.dp,dq:i.dq,qi:i.qi}}async sign(n,i,{saltLength:s}={}){let a=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(n),i);return new Uint8Array(a)}async hash(n,i="SHA-256"){let s=await this.driver.digest(i,n);return new Uint8Array(s)}async verify(n,i,s){let a={kty:"RSA",e:"AQAB",n},u=await this.jwkToPublicCryptoKey(a),d=await this.driver.digest("SHA-256",i),h=await this.driver.verify({name:"RSA-PSS",saltLength:0},u,s,i),p=await this.driver.verify({name:"RSA-PSS",saltLength:32},u,s,i),m=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((u.algorithm.modulusLength-1)/8)-d.byteLength-2},u,s,i);return h||p||m}async jwkToCryptoKey(n){return this.driver.importKey("jwk",n,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(n){return this.driver.importKey("jwk",n,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;let n=crypto?.subtle;return n===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(i=>typeof n[i]=="function")}async encrypt(n,i,s){let a=await this.driver.importKey("raw",typeof i=="string"?e.stringToBuffer(i):i,{name:"PBKDF2",length:32},!1,["deriveKey"]),u=await this.driver.deriveKey({name:"PBKDF2",salt:s?e.stringToBuffer(s):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},a,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),d=new Uint8Array(16);crypto.getRandomValues(d);let h=await this.driver.encrypt({name:"AES-CBC",iv:d},u,n);return e.concatBuffers([d,h])}async decrypt(n,i,s){let a=await this.driver.importKey("raw",typeof i=="string"?e.stringToBuffer(i):i,{name:"PBKDF2",length:32},!1,["deriveKey"]),u=await this.driver.deriveKey({name:"PBKDF2",salt:s?e.stringToBuffer(s):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},a,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),d=n.slice(0,16),h=await this.driver.decrypt({name:"AES-CBC",iv:d},u,n.slice(16));return e.concatBuffers([h])}};r.default=t}),Cf=Qe(r=>{r.read=function(e,t,n,i,s){var a,u,d=s*8-i-1,h=(1<<d)-1,p=h>>1,m=-7,_=n?s-1:0,T=n?-1:1,A=e[t+_];for(_+=T,a=A&(1<<-m)-1,A>>=-m,m+=d;m>0;a=a*256+e[t+_],_+=T,m-=8);for(u=a&(1<<-m)-1,a>>=-m,m+=i;m>0;u=u*256+e[t+_],_+=T,m-=8);if(a===0)a=1-p;else{if(a===h)return u?NaN:(A?-1:1)*(1/0);u=u+Math.pow(2,i),a=a-p}return(A?-1:1)*u*Math.pow(2,a-i)},r.write=function(e,t,n,i,s,a){var u,d,h,p=a*8-s-1,m=(1<<p)-1,_=m>>1,T=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=i?0:a-1,S=i?1:-1,I=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(d=isNaN(t)?1:0,u=m):(u=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-u))<1&&(u--,h*=2),u+_>=1?t+=T/h:t+=T*Math.pow(2,1-_),t*h>=2&&(u++,h/=2),u+_>=m?(d=0,u=m):u+_>=1?(d=(t*h-1)*Math.pow(2,s),u=u+_):(d=t*Math.pow(2,_-1)*Math.pow(2,s),u=0));s>=8;e[n+A]=d&255,A+=S,d/=256,s-=8);for(u=u<<s|d,p+=s;p>0;e[n+A]=u&255,A+=S,u/=256,p-=8);e[n+A-S]|=I*128}}),Zi=Qe(r=>{"use strict";var e=ko(),t=Cf(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=$,r.INSPECT_MAX_BYTES=50;var i=2147483647;r.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=s(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{let o=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(o,c),o.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function a(o){if(o>i)throw new RangeError('The value "'+o+'" is invalid for option "size"');let c=new Uint8Array(o);return Object.setPrototypeOf(c,u.prototype),c}function u(o,c,l){if(typeof o=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(o)}return d(o,c,l)}u.poolSize=8192;function d(o,c,l){if(typeof o=="string")return _(o,c);if(ArrayBuffer.isView(o))return A(o);if(o==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(Ue(o,ArrayBuffer)||o&&Ue(o.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ue(o,SharedArrayBuffer)||o&&Ue(o.buffer,SharedArrayBuffer)))return S(o,c,l);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let f=o.valueOf&&o.valueOf();if(f!=null&&f!==o)return u.from(f,c,l);let g=I(o);if(g)return g;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return u.from(o[Symbol.toPrimitive]("string"),c,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}u.from=function(o,c,l){return d(o,c,l)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function h(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(o<0)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function p(o,c,l){return h(o),o<=0?a(o):c!==void 0?typeof l=="string"?a(o).fill(c,l):a(o).fill(c):a(o)}u.alloc=function(o,c,l){return p(o,c,l)};function m(o){return h(o),a(o<0?0:B(o)|0)}u.allocUnsafe=function(o){return m(o)},u.allocUnsafeSlow=function(o){return m(o)};function _(o,c){if((typeof c!="string"||c==="")&&(c="utf8"),!u.isEncoding(c))throw new TypeError("Unknown encoding: "+c);let l=G(o,c)|0,f=a(l),g=f.write(o,c);return g!==l&&(f=f.slice(0,g)),f}function T(o){let c=o.length<0?0:B(o.length)|0,l=a(c);for(let f=0;f<c;f+=1)l[f]=o[f]&255;return l}function A(o){if(Ue(o,Uint8Array)){let c=new Uint8Array(o);return S(c.buffer,c.byteOffset,c.byteLength)}return T(o)}function S(o,c,l){if(c<0||o.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<c+(l||0))throw new RangeError('"length" is outside of buffer bounds');let f;return c===void 0&&l===void 0?f=new Uint8Array(o):l===void 0?f=new Uint8Array(o,c):f=new Uint8Array(o,c,l),Object.setPrototypeOf(f,u.prototype),f}function I(o){if(u.isBuffer(o)){let c=B(o.length)|0,l=a(c);return l.length===0||o.copy(l,0,0,c),l}if(o.length!==void 0)return typeof o.length!="number"||Vn(o.length)?a(0):T(o);if(o.type==="Buffer"&&Array.isArray(o.data))return T(o.data)}function B(o){if(o>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return o|0}function $(o){return+o!=o&&(o=0),u.alloc(+o)}u.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==u.prototype},u.compare=function(o,c){if(Ue(o,Uint8Array)&&(o=u.from(o,o.offset,o.byteLength)),Ue(c,Uint8Array)&&(c=u.from(c,c.offset,c.byteLength)),!u.isBuffer(o)||!u.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===c)return 0;let l=o.length,f=c.length;for(let g=0,w=Math.min(l,f);g<w;++g)if(o[g]!==c[g]){l=o[g],f=c[g];break}return l<f?-1:f<l?1:0},u.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(o,c){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return u.alloc(0);let l;if(c===void 0)for(c=0,l=0;l<o.length;++l)c+=o[l].length;let f=u.allocUnsafe(c),g=0;for(l=0;l<o.length;++l){let w=o[l];if(Ue(w,Uint8Array))g+w.length>f.length?(u.isBuffer(w)||(w=u.from(w)),w.copy(f,g)):Uint8Array.prototype.set.call(f,w,g);else if(u.isBuffer(w))w.copy(f,g);else throw new TypeError('"list" argument must be an Array of Buffers');g+=w.length}return f};function G(o,c){if(u.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||Ue(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);let l=o.length,f=arguments.length>2&&arguments[2]===!0;if(!f&&l===0)return 0;let g=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return zn(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return ts(o).length;default:if(g)return f?-1:zn(o).length;c=(""+c).toLowerCase(),g=!0}}u.byteLength=G;function z(o,c,l){let f=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,c>>>=0,l<=c))return"";for(o||(o="utf8");;)switch(o){case"hex":return Fo(this,c,l);case"utf8":case"utf-8":return zr(this,c,l);case"ascii":return Zn(this,c,l);case"latin1":case"binary":return Po(this,c,l);case"base64":return $r(this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return jo(this,c,l);default:if(f)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),f=!0}}u.prototype._isBuffer=!0;function Y(o,c,l){let f=o[c];o[c]=o[l],o[l]=f}u.prototype.swap16=function(){let o=this.length;if(o%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<o;c+=2)Y(this,c,c+1);return this},u.prototype.swap32=function(){let o=this.length;if(o%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<o;c+=4)Y(this,c,c+3),Y(this,c+1,c+2);return this},u.prototype.swap64=function(){let o=this.length;if(o%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<o;c+=8)Y(this,c,c+7),Y(this,c+1,c+6),Y(this,c+2,c+5),Y(this,c+3,c+4);return this},u.prototype.toString=function(){let o=this.length;return o===0?"":arguments.length===0?zr(this,0,o):z.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(o){if(!u.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:u.compare(this,o)===0},u.prototype.inspect=function(){let o="",c=r.INSPECT_MAX_BYTES;return o=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(o+=" ... "),"<Buffer "+o+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(o,c,l,f,g){if(Ue(o,Uint8Array)&&(o=u.from(o,o.offset,o.byteLength)),!u.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(c===void 0&&(c=0),l===void 0&&(l=o?o.length:0),f===void 0&&(f=0),g===void 0&&(g=this.length),c<0||l>o.length||f<0||g>this.length)throw new RangeError("out of range index");if(f>=g&&c>=l)return 0;if(f>=g)return-1;if(c>=l)return 1;if(c>>>=0,l>>>=0,f>>>=0,g>>>=0,this===o)return 0;let w=g-f,E=l-c,J=Math.min(w,E),oe=this.slice(f,g),ee=o.slice(c,l);for(let Q=0;Q<J;++Q)if(oe[Q]!==ee[Q]){w=oe[Q],E=ee[Q];break}return w<E?-1:E<w?1:0};function H(o,c,l,f,g){if(o.length===0)return-1;if(typeof l=="string"?(f=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,Vn(l)&&(l=g?0:o.length-1),l<0&&(l=o.length+l),l>=o.length){if(g)return-1;l=o.length-1}else if(l<0)if(g)l=0;else return-1;if(typeof c=="string"&&(c=u.from(c,f)),u.isBuffer(c))return c.length===0?-1:ce(o,c,l,f,g);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?g?Uint8Array.prototype.indexOf.call(o,c,l):Uint8Array.prototype.lastIndexOf.call(o,c,l):ce(o,[c],l,f,g);throw new TypeError("val must be string, number or Buffer")}function ce(o,c,l,f,g){let w=1,E=o.length,J=c.length;if(f!==void 0&&(f=String(f).toLowerCase(),f==="ucs2"||f==="ucs-2"||f==="utf16le"||f==="utf-16le")){if(o.length<2||c.length<2)return-1;w=2,E/=2,J/=2,l/=2}function oe(Q,te){return w===1?Q[te]:Q.readUInt16BE(te*w)}let ee;if(g){let Q=-1;for(ee=l;ee<E;ee++)if(oe(o,ee)===oe(c,Q===-1?0:ee-Q)){if(Q===-1&&(Q=ee),ee-Q+1===J)return Q*w}else Q!==-1&&(ee-=ee-Q),Q=-1}else for(l+J>E&&(l=E-J),ee=l;ee>=0;ee--){let Q=!0;for(let te=0;te<J;te++)if(oe(o,ee+te)!==oe(c,te)){Q=!1;break}if(Q)return ee}return-1}u.prototype.includes=function(o,c,l){return this.indexOf(o,c,l)!==-1},u.prototype.indexOf=function(o,c,l){return H(this,o,c,l,!0)},u.prototype.lastIndexOf=function(o,c,l){return H(this,o,c,l,!1)};function Ve(o,c,l,f){l=Number(l)||0;let g=o.length-l;f?(f=Number(f),f>g&&(f=g)):f=g;let w=c.length;f>w/2&&(f=w/2);let E;for(E=0;E<f;++E){let J=parseInt(c.substr(E*2,2),16);if(Vn(J))return E;o[l+E]=J}return E}function Ge(o,c,l,f){return qr(zn(c,o.length-l),o,l,f)}function Dr(o,c,l,f){return qr($o(c),o,l,f)}function Dn(o,c,l,f){return qr(ts(c),o,l,f)}function Zr(o,c,l,f){return qr(zo(c,o.length-l),o,l,f)}u.prototype.write=function(o,c,l,f){if(c===void 0)f="utf8",l=this.length,c=0;else if(l===void 0&&typeof c=="string")f=c,l=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(l)?(l=l>>>0,f===void 0&&(f="utf8")):(f=l,l=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let g=this.length-c;if((l===void 0||l>g)&&(l=g),o.length>0&&(l<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");f||(f="utf8");let w=!1;for(;;)switch(f){case"hex":return Ve(this,o,c,l);case"utf8":case"utf-8":return Ge(this,o,c,l);case"ascii":case"latin1":case"binary":return Dr(this,o,c,l);case"base64":return Dn(this,o,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Zr(this,o,c,l);default:if(w)throw new TypeError("Unknown encoding: "+f);f=(""+f).toLowerCase(),w=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $r(o,c,l){return c===0&&l===o.length?e.fromByteArray(o):e.fromByteArray(o.slice(c,l))}function zr(o,c,l){l=Math.min(o.length,l);let f=[],g=c;for(;g<l;){let w=o[g],E=null,J=w>239?4:w>223?3:w>191?2:1;if(g+J<=l){let oe,ee,Q,te;switch(J){case 1:w<128&&(E=w);break;case 2:oe=o[g+1],(oe&192)===128&&(te=(w&31)<<6|oe&63,te>127&&(E=te));break;case 3:oe=o[g+1],ee=o[g+2],(oe&192)===128&&(ee&192)===128&&(te=(w&15)<<12|(oe&63)<<6|ee&63,te>2047&&(te<55296||te>57343)&&(E=te));break;case 4:oe=o[g+1],ee=o[g+2],Q=o[g+3],(oe&192)===128&&(ee&192)===128&&(Q&192)===128&&(te=(w&15)<<18|(oe&63)<<12|(ee&63)<<6|Q&63,te>65535&&te<1114112&&(E=te))}}E===null?(E=65533,J=1):E>65535&&(E-=65536,f.push(E>>>10&1023|55296),E=56320|E&1023),f.push(E),g+=J}return Gr(f)}var Vr=4096;function Gr(o){let c=o.length;if(c<=Vr)return String.fromCharCode.apply(String,o);let l="",f=0;for(;f<c;)l+=String.fromCharCode.apply(String,o.slice(f,f+=Vr));return l}function Zn(o,c,l){let f="";l=Math.min(o.length,l);for(let g=c;g<l;++g)f+=String.fromCharCode(o[g]&127);return f}function Po(o,c,l){let f="";l=Math.min(o.length,l);for(let g=c;g<l;++g)f+=String.fromCharCode(o[g]);return f}function Fo(o,c,l){let f=o.length;(!c||c<0)&&(c=0),(!l||l<0||l>f)&&(l=f);let g="";for(let w=c;w<l;++w)g+=Vo[o[w]];return g}function jo(o,c,l){let f=o.slice(c,l),g="";for(let w=0;w<f.length-1;w+=2)g+=String.fromCharCode(f[w]+f[w+1]*256);return g}u.prototype.slice=function(o,c){let l=this.length;o=~~o,c=c===void 0?l:~~c,o<0?(o+=l,o<0&&(o=0)):o>l&&(o=l),c<0?(c+=l,c<0&&(c=0)):c>l&&(c=l),c<o&&(c=o);let f=this.subarray(o,c);return Object.setPrototypeOf(f,u.prototype),f};function ie(o,c,l){if(o%1!==0||o<0)throw new RangeError("offset is not uint");if(o+c>l)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(o,c,l){o=o>>>0,c=c>>>0,l||ie(o,c,this.length);let f=this[o],g=1,w=0;for(;++w<c&&(g*=256);)f+=this[o+w]*g;return f},u.prototype.readUintBE=u.prototype.readUIntBE=function(o,c,l){o=o>>>0,c=c>>>0,l||ie(o,c,this.length);let f=this[o+--c],g=1;for(;c>0&&(g*=256);)f+=this[o+--c]*g;return f},u.prototype.readUint8=u.prototype.readUInt8=function(o,c){return o=o>>>0,c||ie(o,1,this.length),this[o]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(o,c){return o=o>>>0,c||ie(o,2,this.length),this[o]|this[o+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(o,c){return o=o>>>0,c||ie(o,2,this.length),this[o]<<8|this[o+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(o,c){return o=o>>>0,c||ie(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(o,c){return o=o>>>0,c||ie(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])},u.prototype.readBigUInt64LE=Xe(function(o){o=o>>>0,Ut(o,"offset");let c=this[o],l=this[o+7];(c===void 0||l===void 0)&&or(o,this.length-8);let f=c+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24,g=this[++o]+this[++o]*2**8+this[++o]*2**16+l*2**24;return BigInt(f)+(BigInt(g)<<BigInt(32))}),u.prototype.readBigUInt64BE=Xe(function(o){o=o>>>0,Ut(o,"offset");let c=this[o],l=this[o+7];(c===void 0||l===void 0)&&or(o,this.length-8);let f=c*2**24+this[++o]*2**16+this[++o]*2**8+this[++o],g=this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+l;return(BigInt(f)<<BigInt(32))+BigInt(g)}),u.prototype.readIntLE=function(o,c,l){o=o>>>0,c=c>>>0,l||ie(o,c,this.length);let f=this[o],g=1,w=0;for(;++w<c&&(g*=256);)f+=this[o+w]*g;return g*=128,f>=g&&(f-=Math.pow(2,8*c)),f},u.prototype.readIntBE=function(o,c,l){o=o>>>0,c=c>>>0,l||ie(o,c,this.length);let f=c,g=1,w=this[o+--f];for(;f>0&&(g*=256);)w+=this[o+--f]*g;return g*=128,w>=g&&(w-=Math.pow(2,8*c)),w},u.prototype.readInt8=function(o,c){return o=o>>>0,c||ie(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]},u.prototype.readInt16LE=function(o,c){o=o>>>0,c||ie(o,2,this.length);let l=this[o]|this[o+1]<<8;return l&32768?l|4294901760:l},u.prototype.readInt16BE=function(o,c){o=o>>>0,c||ie(o,2,this.length);let l=this[o+1]|this[o]<<8;return l&32768?l|4294901760:l},u.prototype.readInt32LE=function(o,c){return o=o>>>0,c||ie(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},u.prototype.readInt32BE=function(o,c){return o=o>>>0,c||ie(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},u.prototype.readBigInt64LE=Xe(function(o){o=o>>>0,Ut(o,"offset");let c=this[o],l=this[o+7];(c===void 0||l===void 0)&&or(o,this.length-8);let f=this[o+4]+this[o+5]*2**8+this[o+6]*2**16+(l<<24);return(BigInt(f)<<BigInt(32))+BigInt(c+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24)}),u.prototype.readBigInt64BE=Xe(function(o){o=o>>>0,Ut(o,"offset");let c=this[o],l=this[o+7];(c===void 0||l===void 0)&&or(o,this.length-8);let f=(c<<24)+this[++o]*2**16+this[++o]*2**8+this[++o];return(BigInt(f)<<BigInt(32))+BigInt(this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+l)}),u.prototype.readFloatLE=function(o,c){return o=o>>>0,c||ie(o,4,this.length),t.read(this,o,!0,23,4)},u.prototype.readFloatBE=function(o,c){return o=o>>>0,c||ie(o,4,this.length),t.read(this,o,!1,23,4)},u.prototype.readDoubleLE=function(o,c){return o=o>>>0,c||ie(o,8,this.length),t.read(this,o,!0,52,8)},u.prototype.readDoubleBE=function(o,c){return o=o>>>0,c||ie(o,8,this.length),t.read(this,o,!1,52,8)};function ge(o,c,l,f,g,w){if(!u.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>g||c<w)throw new RangeError('"value" argument is out of bounds');if(l+f>o.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(o,c,l,f){if(o=+o,c=c>>>0,l=l>>>0,!f){let E=Math.pow(2,8*l)-1;ge(this,o,c,l,E,0)}let g=1,w=0;for(this[c]=o&255;++w<l&&(g*=256);)this[c+w]=o/g&255;return c+l},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(o,c,l,f){if(o=+o,c=c>>>0,l=l>>>0,!f){let E=Math.pow(2,8*l)-1;ge(this,o,c,l,E,0)}let g=l-1,w=1;for(this[c+g]=o&255;--g>=0&&(w*=256);)this[c+g]=o/w&255;return c+l},u.prototype.writeUint8=u.prototype.writeUInt8=function(o,c,l){return o=+o,c=c>>>0,l||ge(this,o,c,1,255,0),this[c]=o&255,c+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(o,c,l){return o=+o,c=c>>>0,l||ge(this,o,c,2,65535,0),this[c]=o&255,this[c+1]=o>>>8,c+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(o,c,l){return o=+o,c=c>>>0,l||ge(this,o,c,2,65535,0),this[c]=o>>>8,this[c+1]=o&255,c+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(o,c,l){return o=+o,c=c>>>0,l||ge(this,o,c,4,4294967295,0),this[c+3]=o>>>24,this[c+2]=o>>>16,this[c+1]=o>>>8,this[c]=o&255,c+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(o,c,l){return o=+o,c=c>>>0,l||ge(this,o,c,4,4294967295,0),this[c]=o>>>24,this[c+1]=o>>>16,this[c+2]=o>>>8,this[c+3]=o&255,c+4};function Ki(o,c,l,f,g){es(c,f,g,o,l,7);let w=Number(c&BigInt(4294967295));o[l++]=w,w=w>>8,o[l++]=w,w=w>>8,o[l++]=w,w=w>>8,o[l++]=w;let E=Number(c>>BigInt(32)&BigInt(4294967295));return o[l++]=E,E=E>>8,o[l++]=E,E=E>>8,o[l++]=E,E=E>>8,o[l++]=E,l}function Hi(o,c,l,f,g){es(c,f,g,o,l,7);let w=Number(c&BigInt(4294967295));o[l+7]=w,w=w>>8,o[l+6]=w,w=w>>8,o[l+5]=w,w=w>>8,o[l+4]=w;let E=Number(c>>BigInt(32)&BigInt(4294967295));return o[l+3]=E,E=E>>8,o[l+2]=E,E=E>>8,o[l+1]=E,E=E>>8,o[l]=E,l+8}u.prototype.writeBigUInt64LE=Xe(function(o,c=0){return Ki(this,o,c,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Xe(function(o,c=0){return Hi(this,o,c,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(o,c,l,f){if(o=+o,c=c>>>0,!f){let J=Math.pow(2,8*l-1);ge(this,o,c,l,J-1,-J)}let g=0,w=1,E=0;for(this[c]=o&255;++g<l&&(w*=256);)o<0&&E===0&&this[c+g-1]!==0&&(E=1),this[c+g]=(o/w>>0)-E&255;return c+l},u.prototype.writeIntBE=function(o,c,l,f){if(o=+o,c=c>>>0,!f){let J=Math.pow(2,8*l-1);ge(this,o,c,l,J-1,-J)}let g=l-1,w=1,E=0;for(this[c+g]=o&255;--g>=0&&(w*=256);)o<0&&E===0&&this[c+g+1]!==0&&(E=1),this[c+g]=(o/w>>0)-E&255;return c+l},u.prototype.writeInt8=function(o,c,l){return o=+o,c=c>>>0,l||ge(this,o,c,1,127,-128),o<0&&(o=255+o+1),this[c]=o&255,c+1},u.prototype.writeInt16LE=function(o,c,l){return o=+o,c=c>>>0,l||ge(this,o,c,2,32767,-32768),this[c]=o&255,this[c+1]=o>>>8,c+2},u.prototype.writeInt16BE=function(o,c,l){return o=+o,c=c>>>0,l||ge(this,o,c,2,32767,-32768),this[c]=o>>>8,this[c+1]=o&255,c+2},u.prototype.writeInt32LE=function(o,c,l){return o=+o,c=c>>>0,l||ge(this,o,c,4,2147483647,-2147483648),this[c]=o&255,this[c+1]=o>>>8,this[c+2]=o>>>16,this[c+3]=o>>>24,c+4},u.prototype.writeInt32BE=function(o,c,l){return o=+o,c=c>>>0,l||ge(this,o,c,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[c]=o>>>24,this[c+1]=o>>>16,this[c+2]=o>>>8,this[c+3]=o&255,c+4},u.prototype.writeBigInt64LE=Xe(function(o,c=0){return Ki(this,o,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Xe(function(o,c=0){return Hi(this,o,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Yi(o,c,l,f,g,w){if(l+f>o.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function Ji(o,c,l,f,g){return c=+c,l=l>>>0,g||Yi(o,c,l,4,34028234663852886e22,-34028234663852886e22),t.write(o,c,l,f,23,4),l+4}u.prototype.writeFloatLE=function(o,c,l){return Ji(this,o,c,!0,l)},u.prototype.writeFloatBE=function(o,c,l){return Ji(this,o,c,!1,l)};function Qi(o,c,l,f,g){return c=+c,l=l>>>0,g||Yi(o,c,l,8,17976931348623157e292,-17976931348623157e292),t.write(o,c,l,f,52,8),l+8}u.prototype.writeDoubleLE=function(o,c,l){return Qi(this,o,c,!0,l)},u.prototype.writeDoubleBE=function(o,c,l){return Qi(this,o,c,!1,l)},u.prototype.copy=function(o,c,l,f){if(!u.isBuffer(o))throw new TypeError("argument should be a Buffer");if(l||(l=0),!f&&f!==0&&(f=this.length),c>=o.length&&(c=o.length),c||(c=0),f>0&&f<l&&(f=l),f===l||o.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(l<0||l>=this.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("sourceEnd out of bounds");f>this.length&&(f=this.length),o.length-c<f-l&&(f=o.length-c+l);let g=f-l;return this===o&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,l,f):Uint8Array.prototype.set.call(o,this.subarray(l,f),c),g},u.prototype.fill=function(o,c,l,f){if(typeof o=="string"){if(typeof c=="string"?(f=c,c=0,l=this.length):typeof l=="string"&&(f=l,l=this.length),f!==void 0&&typeof f!="string")throw new TypeError("encoding must be a string");if(typeof f=="string"&&!u.isEncoding(f))throw new TypeError("Unknown encoding: "+f);if(o.length===1){let w=o.charCodeAt(0);(f==="utf8"&&w<128||f==="latin1")&&(o=w)}}else typeof o=="number"?o=o&255:typeof o=="boolean"&&(o=Number(o));if(c<0||this.length<c||this.length<l)throw new RangeError("Out of range index");if(l<=c)return this;c=c>>>0,l=l===void 0?this.length:l>>>0,o||(o=0);let g;if(typeof o=="number")for(g=c;g<l;++g)this[g]=o;else{let w=u.isBuffer(o)?o:u.from(o,f),E=w.length;if(E===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(g=0;g<l-c;++g)this[g+c]=w[g%E]}return this};var Bt={};function $n(o,c,l){Bt[o]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${o}]`,this.stack,delete this.name}get code(){return o}set code(f){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:f,writable:!0})}toString(){return`${this.name} [${o}]: ${this.message}`}}}$n("ERR_BUFFER_OUT_OF_BOUNDS",function(o){return o?`${o} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),$n("ERR_INVALID_ARG_TYPE",function(o,c){return`The "${o}" argument must be of type number. Received type ${typeof c}`},TypeError),$n("ERR_OUT_OF_RANGE",function(o,c,l){let f=`The value of "${o}" is out of range.`,g=l;return Number.isInteger(l)&&Math.abs(l)>2**32?g=Xi(String(l)):typeof l=="bigint"&&(g=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(g=Xi(g)),g+="n"),f+=` It must be ${c}. Received ${g}`,f},RangeError);function Xi(o){let c="",l=o.length,f=o[0]==="-"?1:0;for(;l>=f+4;l-=3)c=`_${o.slice(l-3,l)}${c}`;return`${o.slice(0,l)}${c}`}function No(o,c,l){Ut(c,"offset"),(o[c]===void 0||o[c+l]===void 0)&&or(c,o.length-(l+1))}function es(o,c,l,f,g,w){if(o>l||o<c){let E=typeof c=="bigint"?"n":"",J;throw w>3?c===0||c===BigInt(0)?J=`>= 0${E} and < 2${E} ** ${(w+1)*8}${E}`:J=`>= -(2${E} ** ${(w+1)*8-1}${E}) and < 2 ** ${(w+1)*8-1}${E}`:J=`>= ${c}${E} and <= ${l}${E}`,new Bt.ERR_OUT_OF_RANGE("value",J,o)}No(f,g,w)}function Ut(o,c){if(typeof o!="number")throw new Bt.ERR_INVALID_ARG_TYPE(c,"number",o)}function or(o,c,l){throw Math.floor(o)!==o?(Ut(o,l),new Bt.ERR_OUT_OF_RANGE(l||"offset","an integer",o)):c<0?new Bt.ERR_BUFFER_OUT_OF_BOUNDS:new Bt.ERR_OUT_OF_RANGE(l||"offset",`>= ${l?1:0} and <= ${c}`,o)}var Do=/[^+/0-9A-Za-z-_]/g;function Zo(o){if(o=o.split("=")[0],o=o.trim().replace(Do,""),o.length<2)return"";for(;o.length%4!==0;)o=o+"=";return o}function zn(o,c){c=c||1/0;let l,f=o.length,g=null,w=[];for(let E=0;E<f;++E){if(l=o.charCodeAt(E),l>55295&&l<57344){if(!g){if(l>56319){(c-=3)>-1&&w.push(239,191,189);continue}else if(E+1===f){(c-=3)>-1&&w.push(239,191,189);continue}g=l;continue}if(l<56320){(c-=3)>-1&&w.push(239,191,189),g=l;continue}l=(g-55296<<10|l-56320)+65536}else g&&(c-=3)>-1&&w.push(239,191,189);if(g=null,l<128){if((c-=1)<0)break;w.push(l)}else if(l<2048){if((c-=2)<0)break;w.push(l>>6|192,l&63|128)}else if(l<65536){if((c-=3)<0)break;w.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((c-=4)<0)break;w.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return w}function $o(o){let c=[];for(let l=0;l<o.length;++l)c.push(o.charCodeAt(l)&255);return c}function zo(o,c){let l,f,g,w=[];for(let E=0;E<o.length&&!((c-=2)<0);++E)l=o.charCodeAt(E),f=l>>8,g=l%256,w.push(g),w.push(f);return w}function ts(o){return e.toByteArray(Zo(o))}function qr(o,c,l,f){let g;for(g=0;g<f&&!(g+l>=c.length||g>=o.length);++g)c[g+l]=o[g];return g}function Ue(o,c){return o instanceof c||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===c.name}function Vn(o){return o!==o}var Vo=function(){let o="0123456789abcdef",c=new Array(256);for(let l=0;l<16;++l){let f=l*16;for(let g=0;g<16;++g)c[f+g]=o[l]+o[g]}return c}();function Xe(o){return typeof BigInt>"u"?Go:o}function Go(){throw new Error("BigInt not supported")}}),If=Qe((r,e)=>{typeof window<"u"?(window.global=window,global.fetch=window.fetch,e.exports={Buffer:Zi().Buffer,Crypto:window.crypto}):e.exports={Buffer:Zi().Buffer,Crypto:crypto}}),Io={};Ef(Io,{AVSCTap:()=>jn,ArweaveSigner:()=>Bo,DataItem:()=>ar,MAX_TAG_BYTES:()=>qi,MIN_BINARY_SIZE:()=>Lo,SIG_CONFIG:()=>Nr,SignatureConfig:()=>Be,Signer:()=>Rf,createData:()=>Zf,deserializeTags:()=>zi,indexToType:()=>Uo,serializeTags:()=>Mo,tagsExceedLimit:()=>Ff});var Rf=class{signer;publicKey;signatureType;signatureLength;ownerLength;pem;static verify(r,e,t,n){throw new Error("You must implement verify method on child")}},Of=Ot(Gi(),1),Oe=Ot(Co(),1);async function Ro(r){if(Array.isArray(r)){let i=(0,Oe.concatBuffers)([(0,Oe.stringToBuffer)("list"),(0,Oe.stringToBuffer)(r.length.toString())]);return await Oo(r,await Je().hash(i,"SHA-384"))}let e=r,t=(0,Oe.concatBuffers)([(0,Oe.stringToBuffer)("blob"),(0,Oe.stringToBuffer)(e.byteLength.toString())]),n=(0,Oe.concatBuffers)([await Je().hash(t,"SHA-384"),await Je().hash(e,"SHA-384")]);return await Je().hash(n,"SHA-384")}async function Oo(r,e){if(r.length<1)return e;let t=(0,Oe.concatBuffers)([e,await Ro(r[0])]),n=await Je().hash(t,"SHA-384");return await Oo(r.slice(1),n)}var Di=Ot(kf(),1),Bf=Di.default.default?Di.default.default:Di.default,Uf=class extends Bf{getPublicKey(r){throw new Error("Unimplemented")}},Mf;function Je(){return Mf??=new Uf}var Be;(function(r){r[r.ARWEAVE=1]="ARWEAVE",r[r.ED25519=2]="ED25519",r[r.ETHEREUM=3]="ETHEREUM",r[r.SOLANA=4]="SOLANA",r[r.INJECTEDAPTOS=5]="INJECTEDAPTOS",r[r.MULTIAPTOS=6]="MULTIAPTOS",r[r.TYPEDETHEREUM=7]="TYPEDETHEREUM"})(Be||(Be={}));var Nr={[Be.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[Be.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[Be.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[Be.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"},[Be.INJECTEDAPTOS]:{sigLength:64,pubLength:32,sigName:"injectedAptos"},[Be.MULTIAPTOS]:{sigLength:64*32+4,pubLength:32*32+1,sigName:"multiAptos"},[Be.TYPEDETHEREUM]:{sigLength:65,pubLength:42,sigName:"typedEthereum"}},Bo=class{signatureType=1;ownerLength=Nr[1].pubLength;signatureLength=Nr[1].sigLength;jwk;pk;constructor(r){this.pk=r.n,this.jwk=r}get publicKey(){return Of.default.toBuffer(this.pk)}sign(r){return Je().sign(this.jwk,r)}static async verify(r,e,t){return await Je().verify(r,e,t)}},Uo={1:Bo},ze=Ot(Gi(),1);async function $i(r){return Ro([(0,Oe.stringToBuffer)("dataitem"),(0,Oe.stringToBuffer)("1"),(0,Oe.stringToBuffer)(r.signatureType.toString()),r.rawOwner,r.rawTarget,r.rawAnchor,r.rawTags,r.rawData])}async function Lf(r,e){let t=await $i(r),n=await e.sign(t),i=await Je().hash(n);return{signature:Buffer.from(n),id:Buffer.from(i)}}async function Pf(r,e){let{signature:t,id:n}=await Lf(r,e);return r.getRaw().set(t,2),n}var jn=class{buf;pos;constructor(r=Buffer.alloc(qi),e=0){this.buf=r,this.pos=e}writeTags(r){if(!Array.isArray(r))throw new Error("input must be array");let e=r.length,t;if(e)for(this.writeLong(e),t=0;t<e;t++){let n=r[t];if(n?.name===void 0||n?.value===void 0)throw new Error(`Invalid tag format for ${n}, expected {name:string, value: string}`);this.writeString(n.name),this.writeString(n.value)}this.writeLong(0)}toBuffer(){let r=Buffer.alloc(this.pos);if(this.pos>this.buf.length)throw new Error(`Too many tag bytes (${this.pos} > ${this.buf.length})`);return this.buf.copy(r,0,0,this.pos),r}tagsExceedLimit(){return this.pos>this.buf.length}writeLong(r){let e=this.buf,t,n;if(r>=-1073741824&&r<1073741824){n=r>=0?r<<1:~r<<1|1;do e[this.pos]=n&127,n>>=7;while(n&&(e[this.pos++]|=128))}else{t=r>=0?r*2:-r*2-1;do e[this.pos]=t&127,t/=128;while(t>=1&&(e[this.pos++]|=128))}this.pos++,this.buf=e}writeString(r){let e=Buffer.byteLength(r),t=this.buf;this.writeLong(e);let n=this.pos;if(this.pos+=e,!(this.pos>t.length)){if(e>64)this.buf.write(r,this.pos-e,e,"utf8");else{let i,s,a,u;for(i=0,s=e;i<s;i++)a=r.charCodeAt(i),a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=a&63|128):(a&64512)===55296&&((u=r.charCodeAt(i+1))&64512)===56320?(a=65536+((a&1023)<<10)+(u&1023),i++,t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=a&63|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=a&63|128)}this.buf=t}}readLong(){let r=0,e=0,t=this.buf,n,i,s,a;do n=t[this.pos++],i=n&128,r|=(n&127)<<e,e+=7;while(i&&e<28);if(i){s=r,a=268435456;do n=t[this.pos++],s+=(n&127)*a,a*=128;while(n&128);return(s%2?-(s+1):s)/2}return r>>1^-(r&1)}skipLong(){let r=this.buf;for(;r[this.pos++]&128;);}readTags(){let r=[],e;for(;e=this.readLong();)for(e<0&&(e=-e,this.skipLong());e--;){let t=this.readString(),n=this.readString();r.push({name:t,value:n})}return r}readString(){let r=this.readLong(),e=this.pos,t=this.buf;if(this.pos+=r,!(this.pos>t.length))return this.buf.slice(e,e+r).toString()}};function Mo(r){let e=new jn;return e.writeTags(r),e.toBuffer()}function Ff(r){let e=new jn;return e.writeTags(r),e.tagsExceedLimit()}function zi(r){return new jn(r).readTags()}function lt(r){let e=0;for(let t=r.length-1;t>=0;t--)e=e*256+r[t];return e}function jf(r){if(r>29)throw new Error("Short too long");let e=[0,0];for(let t=0;t<e.length;t++){let n=r&255;e[t]=n,r=(r-n)/256}return Uint8Array.from(e)}function Ao(r){let e=[0,0,0,0,0,0,0,0];for(let t=0;t<e.length;t++){let n=r&255;e[t]=n,r=(r-n)/256}return Uint8Array.from(e)}var Nf=Ot(If(),1),sr=Ot(Zi(),1),qi=4096,Lo=80,ar=class{binary;_id;constructor(r){this.binary=r}static isDataItem(r){return r.binary!==void 0}get signatureType(){let r=lt(this.binary.subarray(0,2));if(Be?.[r]!==void 0)return r;throw new Error("Unknown signature type: "+r)}async isValid(){return ar.verify(this.binary)}get id(){return(async()=>ze.default.encode(await this.rawId))()}set id(r){this._id=ze.default.toBuffer(r)}get rawId(){return(async()=>sr.Buffer.from(await Nf.Crypto.subtle.digest("SHA-256",this.rawSignature)))()}set rawId(r){this._id=r}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return ze.default.encode(this.rawSignature)}set rawOwner(r){if(r.byteLength!=this.ownerLength)throw new Error(`Expected raw owner (pubkey) to be ${this.ownerLength} bytes, got ${r.byteLength} bytes.`);this.binary.set(r,2+this.signatureLength)}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get signatureLength(){return Nr[this.signatureType].sigLength}get owner(){return ze.default.encode(this.rawOwner)}get ownerLength(){return Nr[this.signatureType].pubLength}get rawTarget(){let r=this.getTargetStart();return this.binary[r]==1?this.binary.subarray(r+1,r+33):sr.Buffer.alloc(0)}get target(){return ze.default.encode(this.rawTarget)}get rawAnchor(){let r=this.getAnchorStart();return this.binary[r]==1?this.binary.subarray(r+1,r+33):sr.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){let r=this.getTagsStart(),e=lt(this.binary.subarray(r+8,r+16));return this.binary.subarray(r+16,r+16+e)}get tags(){let r=this.getTagsStart();if(lt(this.binary.subarray(r,r+8))==0)return[];let e=lt(this.binary.subarray(r+8,r+16));return zi(sr.Buffer.from(this.binary.subarray(r+16,r+16+e)))}get tagsB64Url(){return this.tags.map(r=>({name:ze.default.encode(r.name),value:ze.default.encode(r.value)}))}getStartOfData(){let r=this.getTagsStart(),e=this.binary.subarray(r+8,r+16),t=lt(e);return r+16+t}get rawData(){let r=this.getTagsStart(),e=this.binary.subarray(r+8,r+16),t=lt(e),n=r+16+t;return this.binary.subarray(n,this.binary.length)}get data(){return ze.default.encode(this.rawData)}getRaw(){return this.binary}async sign(r){return this._id=await Pf(this,r),this.rawId}async setSignature(r){this.binary.set(r,2),this._id=sr.Buffer.from(await Je().hash(r))}isSigned(){return(this._id?.length??0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(r=>({name:ze.default.encode(r.name),value:ze.default.encode(r.value)})),data:this.data}}static async verify(r){if(r.byteLength<Lo)return!1;let e=new ar(r),t=e.signatureType,n=e.getTagsStart(),i=lt(r.subarray(n,n+8)),s=r.subarray(n+8,n+16),a=lt(s);if(a>qi)return!1;if(i>0)try{if(zi(sr.Buffer.from(r.subarray(n+16,n+16+a))).length!==i)return!1}catch{return!1}let u=Uo[t],d=await $i(e);return await u.verify(e.rawOwner,d,e.rawSignature)}async getSignatureData(){return $i(this)}getTagsStart(){let r=this.getTargetStart(),e=this.binary[r]==1,t=r+(e?33:1),n=this.binary[t]==1;return t+=n?33:1,t}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let r=this.getTargetStart()+1,e=this.binary[this.getTargetStart()]==1;return r+=e?32:0,r}},Df=Ot(Gi(),1);function Zf(r,e,t){let n=e.publicKey,i=t?.target?Df.default.toBuffer(t.target):null,s=1+(i?.byteLength??0),a=t?.anchor?Buffer.from(t.anchor):null,u=1+(a?.byteLength??0),d=(t?.tags?.length??0)>0?Mo(t.tags):null,h=16+(d?d.byteLength:0),p=Buffer.from(r),m=p.byteLength,_=2+e.signatureLength+e.ownerLength+s+u+h+m,T=Buffer.alloc(_);if(T.set(jf(e.signatureType),0),T.set(new Uint8Array(e.signatureLength).fill(0),2),n.byteLength!==e.ownerLength)throw new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${n.byteLength}`);T.set(n,2+e.signatureLength);let A=2+e.signatureLength+e.ownerLength;if(T[A]=i?1:0,i){if(i.byteLength!==32)throw new Error(`Target must be 32 bytes but was incorrectly ${i.byteLength}`);T.set(i,A+1)}let S=A+s,I=S+1;if(T[S]=a?1:0,a){if(I+=a.byteLength,a.byteLength!==32)throw new Error("Anchor must be 32 bytes");T.set(a,S+1)}T.set(Ao(t?.tags?.length??0),I);let B=Ao(d?.byteLength??0);T.set(B,I+8),d&&T.set(d,I+16);let $=I+h;return T.set(p,$),new ar(T)}var $f={...Io};globalThis.arbundles??=$f;globalThis.Buffer||(globalThis.Buffer=Wi.Buffer);function zf(r){let e=t=>new ar(t);return async({data:t,tags:n,target:i,anchor:s})=>{let a=await r.signDataItem({data:t,tags:n,target:i,anchor:s}),u=e(Wi.Buffer.from(a));return{id:await u.id,raw:u.getRaw()}}}var Vf=globalThis.GATEWAY_URL||void 0,Gf=globalThis.MU_URL||void 0,qf=globalThis.CU_URL||void 0,Wf=globalThis.GRAPHQL_URL||void 0,{result:Em,results:Tm,message:Sm,spawn:Am,monitor:km,unmonitor:Cm,dryrun:Im,assign:Rm}=no({GATEWAY_URL:Vf,MU_URL:Gf,CU_URL:qf,GRAPHQL_URL:Wf});var Om=Nn.createDataItemSigner;export{Rm as assign,no as connect,Om as createDataItemSigner,Im as dryrun,Sm as message,km as monitor,Em as result,Tm as results,ro as serializeCron,Am as spawn,Cm as unmonitor};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

warp-arbundles/build/web/esm/bundle.js:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/
//# sourceMappingURL=browser.js.map
